2025-05-17 15:28:12.952 [main] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听端口: 9999
2025-05-17 15:28:23.794 [main] INFO  com.chatroom.server.ChatServer - 新客户端连接: /127.0.0.1:4369
2025-05-17 15:28:23.797 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: localhost:9999
2025-05-17 15:28:23.806 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户登录成功: nomanda
2025-05-17 15:28:23.808 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 处理请求时出错: Cannot invoke "com.chatroom.common.network.RequestType.ordinal()" because "requestType" is null
2025-05-17 15:28:24.997 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户登录成功: nomanda
2025-05-17 15:28:24.998 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 处理请求时出错: Cannot invoke "com.chatroom.common.network.RequestType.ordinal()" because "requestType" is null
2025-05-17 15:28:31.450 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 15:28:31.450 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 客户端断开连接: /127.0.0.1:4369
2025-05-17 15:28:31.450 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户注销: nomanda
2025-05-17 15:28:31.451 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 15:28:31.452 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送消息时出错: 你的主机中的软件中止了一个已建立的连接。
2025-05-17 15:28:31.452 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 15:37:19.633 [main] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听端口: 9999
2025-05-17 15:37:28.379 [main] INFO  com.chatroom.server.ChatServer - 新客户端连接: /127.0.0.1:13557
2025-05-17 15:37:28.381 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: localhost:9999
2025-05-17 15:37:28.388 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户登录成功: 1234
2025-05-17 15:37:28.396 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 处理请求时出错: Cannot invoke "com.chatroom.common.network.RequestType.ordinal()" because "requestType" is null
2025-05-17 15:38:42.810 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户登录成功: 1234
2025-05-17 15:38:42.811 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 处理请求时出错: Cannot invoke "com.chatroom.common.network.RequestType.ordinal()" because "requestType" is null
2025-05-17 15:41:19.990 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户登录成功: 1234
2025-05-17 15:41:19.990 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 处理请求时出错: Cannot invoke "com.chatroom.common.network.RequestType.ordinal()" because "requestType" is null
2025-05-17 15:41:20.787 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 客户端断开连接: /127.0.0.1:13557
2025-05-17 15:41:20.787 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 15:41:20.788 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户注销: 1234
2025-05-17 15:41:20.788 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 15:41:20.790 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送消息时出错: 你的主机中的软件中止了一个已建立的连接。
2025-05-17 15:41:20.790 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送消息时出错: 你的主机中的软件中止了一个已建立的连接。
2025-05-17 15:41:20.791 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 15:41:33.523 [main] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听端口: 9999
2025-05-17 15:41:39.094 [main] INFO  com.chatroom.server.ChatServer - 新客户端连接: /127.0.0.1:2104
2025-05-17 15:41:39.097 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: localhost:9999
2025-05-17 15:41:39.103 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户登录成功: nomanda
2025-05-17 15:47:26.876 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 客户端断开连接: /127.0.0.1:2104
2025-05-17 15:47:26.877 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户注销: nomanda
2025-05-17 15:47:26.877 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 客户端连接已关闭: /127.0.0.1:2104
2025-05-17 15:47:40.402 [main] INFO  com.chatroom.server.ChatServer - 新客户端连接: /127.0.0.1:3029
2025-05-17 15:47:40.403 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: localhost:9999
2025-05-17 15:47:40.408 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户登录成功: nomanda
2025-05-17 15:47:40.526 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 15:51:16.336 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 客户端断开连接: /127.0.0.1:3029
2025-05-17 15:51:16.336 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户注销: nomanda
2025-05-17 15:51:16.337 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 客户端连接已关闭: /127.0.0.1:3029
2025-05-17 15:51:24.481 [main] INFO  com.chatroom.server.ChatServer - 新客户端连接: /127.0.0.1:5681
2025-05-17 15:51:24.483 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: localhost:9999
2025-05-17 15:51:24.491 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户登录成功: nomanda
2025-05-17 15:51:24.583 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 15:51:24.584 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='65ded2ac-4b64-4f73-8070-08e17211c2e1', requestId='26041eaf-4f93-4032-87ca-e51f5944c964', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747468284584}
2025-05-17 15:51:24.646 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 15:51:28.617 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 15:51:28.617 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='612feac2-dfbb-4d61-9d00-0e14a287e4ae', requestId='90b026ef-43c6-43a4-964b-881ccebdc69b', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747468288617}
2025-05-17 15:51:28.618 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 15:51:29.036 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 15:51:29.037 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='2a0c7c50-3fdf-47d1-83f6-15215519e54c', requestId='c842f3c4-9b57-4a31-ac4e-6deafae39fd1', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747468289036}
2025-05-17 15:51:29.037 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 15:52:54.749 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户注销: nomanda
2025-05-17 15:52:54.749 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 15:52:54.750 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 15:52:54.752 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
2025-05-17 15:52:54.752 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 15:52:54.752 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 16:07:33.834 [main] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听端口: 9999
2025-05-17 16:07:42.617 [main] INFO  com.chatroom.server.ChatServer - 新客户端连接: /127.0.0.1:8426
2025-05-17 16:07:42.625 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: localhost:9999
2025-05-17 16:07:42.634 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户登录成功: nomada
2025-05-17 16:07:42.767 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 16:07:42.768 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='5f0e7d30-b341-4a16-9479-21bbb2106a22', requestId='1d6c7045-773f-4b8c-b306-ac73cf4792d2', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747469262768}
2025-05-17 16:07:42.827 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 16:10:22.900 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 16:10:22.901 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='2472b63b-7181-4912-860f-7b55750ae9e9', requestId='04ada552-aa38-4f81-bba0-48871658b211', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747469422900}
2025-05-17 16:10:22.901 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 16:14:56.782 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 16:14:56.782 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户注销: nomada
2025-05-17 16:14:56.783 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 16:14:56.785 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
2025-05-17 16:14:56.785 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 16:14:56.785 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 16:15:15.988 [Thread-2] ERROR com.chatroom.client.ChatClient - 连接服务器失败: Connection refused: connect
2025-05-17 16:28:17.572 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 配置文件不存在，使用默认配置
2025-05-17 16:28:17.574 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-17 16:28:24.309 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-17 16:28:24.312 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 配置已保存: 绑定地址=10.129.5.3, 端口=9999, 自动选择端口=false
2025-05-17 16:28:24.315 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 正在启动服务器...
2025-05-17 16:28:24.316 [Thread-2] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.129.5.3:9999
2025-05-17 16:28:24.316 [Thread-2] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.129.5.3:9999
2025-05-17 16:28:39.452 [Thread-2] ERROR com.chatroom.client.ChatClient - 连接服务器失败: Connection refused: connect
2025-05-17 16:39:19.540 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.129.5.3, port=9999, autoSelectPort=false
2025-05-17 16:39:23.103 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-17 16:39:23.107 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 配置已保存: 绑定地址=10.129.5.3, 端口=9999, 自动选择端口=false
2025-05-17 16:39:23.110 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 正在启动服务器...
2025-05-17 16:39:23.113 [Thread-2] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.129.5.3:9999
2025-05-17 16:39:23.113 [Thread-2] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.129.5.3:9999
2025-05-17 16:39:23.117 [Thread-2] INFO  c.c.s.d.ServerDiscoveryResponder - 服务器发现响应器已启动，监听端口: 8888
2025-05-17 16:39:23.117 [Thread-2] INFO  com.chatroom.server.ChatServer - 服务器发现响应器已启动
2025-05-17 16:39:37.664 [Thread-2] ERROR com.chatroom.client.ChatClient - 连接服务器失败: Connection refused: connect
2025-05-17 16:39:43.517 [Thread-3] ERROR com.chatroom.client.ChatClient - 连接服务器失败: Connection refused: connect
2025-05-17 16:39:49.573 [main] INFO  c.chatroom.server.ChatServerLauncher - 使用图形界面启动服务器
2025-05-17 16:39:49.915 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.129.5.3, port=9999, autoSelectPort=false
2025-05-17 16:39:58.770 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-17 16:39:58.773 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 配置已保存: 绑定地址=10.129.5.3, 端口=9999, 自动选择端口=true
2025-05-17 16:39:58.775 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 正在启动服务器...
2025-05-17 16:39:58.777 [Thread-2] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.129.5.3:9999
2025-05-17 16:39:58.777 [Thread-2] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.129.5.3:9999
2025-05-17 16:39:58.780 [Thread-2] INFO  c.c.s.d.ServerDiscoveryResponder - 服务器发现响应器已启动，监听端口: 8888
2025-05-17 16:39:58.780 [Thread-2] INFO  com.chatroom.server.ChatServer - 服务器发现响应器已启动
2025-05-17 16:40:08.412 [Thread-2] ERROR com.chatroom.client.ChatClient - 连接服务器失败: Connection refused: connect
2025-05-17 16:43:59.094 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.129.5.3, port=9999, autoSelectPort=true
2025-05-17 16:44:06.242 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-17 16:44:06.244 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 配置已保存: 绑定地址=10.129.5.3, 端口=9999, 自动选择端口=true
2025-05-17 16:44:06.246 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 正在启动服务器...
2025-05-17 16:44:06.247 [Thread-2] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.129.5.3:9999
2025-05-17 16:44:06.248 [Thread-2] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.129.5.3:9999
2025-05-17 16:44:06.251 [Thread-2] INFO  c.c.s.d.ServerDiscoveryResponder - 服务器发现响应器已启动，监听端口: 8888
2025-05-17 16:44:06.251 [Thread-2] INFO  com.chatroom.server.ChatServer - 服务器发现响应器已启动
2025-05-17 16:44:13.441 [Thread-2] ERROR com.chatroom.client.ChatClient - 连接服务器失败: Connection refused: connect
2025-05-17 16:50:02.922 [main] INFO  c.chatroom.server.ChatServerLauncher - 使用图形界面启动服务器
2025-05-17 16:50:03.233 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.129.5.3, port=9999, autoSelectPort=true
2025-05-17 16:50:07.580 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-17 16:50:07.583 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 配置已保存: 绑定地址=10.129.5.3, 端口=9999, 自动选择端口=true
2025-05-17 16:50:07.585 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 正在启动服务器...
2025-05-17 16:50:07.587 [Thread-2] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.129.5.3:9999
2025-05-17 16:50:07.587 [Thread-2] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.129.5.3:9999
2025-05-17 16:50:11.775 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.129.5.3, port=9999, autoSelectPort=true
2025-05-17 16:50:14.507 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-17 16:50:14.510 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 配置已保存: 绑定地址=10.129.5.3, 端口=9999, 自动选择端口=true
2025-05-17 16:50:14.512 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 正在启动服务器...
2025-05-17 16:50:14.513 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 端口 9999 已被占用，自动切换到端口 10000
2025-05-17 16:50:14.514 [Thread-2] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.129.5.3:10000
2025-05-17 16:50:14.514 [Thread-2] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.129.5.3:10000
2025-05-17 16:50:24.733 [Thread-2] ERROR com.chatroom.client.ChatClient - 连接服务器失败: Connection refused: connect
2025-05-17 16:54:17.290 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.129.5.3, port=9999, autoSelectPort=true
2025-05-17 16:54:19.407 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-17 16:54:19.410 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 配置已保存: 绑定地址=10.129.5.3, 端口=9999, 自动选择端口=true
2025-05-17 16:54:19.412 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 正在启动服务器...
2025-05-17 16:54:19.413 [Thread-2] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.129.5.3:9999
2025-05-17 16:54:19.414 [Thread-2] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.129.5.3:9999
2025-05-17 16:54:37.603 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 1 个历史连接记录
2025-05-17 16:54:37.606 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.129.5.3:7423
2025-05-17 16:54:37.608 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.129.5.3:9999
2025-05-17 16:55:48.640 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 16:55:48.640 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 客户端断开连接: /10.129.5.3:7423
2025-05-17 16:55:48.640 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 客户端连接已关闭: /10.129.5.3:7423
2025-05-17 16:55:48.640 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 16:56:01.903 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 1 个历史连接记录
2025-05-17 16:56:03.220 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 1 个历史连接记录
2025-05-17 16:56:11.193 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 1 个历史连接记录
2025-05-17 16:56:11.195 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.129.5.3:11452
2025-05-17 16:56:11.196 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.129.5.3:9999
2025-05-17 16:56:11.201 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 16:56:11.201 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 16:56:11.201 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 16:57:13.740 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 16:57:13.740 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 客户端断开连接: /10.129.5.3:11452
2025-05-17 16:57:13.740 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 16:57:13.740 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 客户端连接已关闭: /10.129.5.3:11452
2025-05-17 16:57:22.154 [main] INFO  c.chatroom.server.ChatServerLauncher - 使用图形界面启动服务器
2025-05-17 16:57:22.458 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.129.5.3, port=9999, autoSelectPort=true
2025-05-17 16:57:24.457 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-17 16:57:24.460 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 配置已保存: 绑定地址=10.129.5.3, 端口=9999, 自动选择端口=true
2025-05-17 16:57:24.462 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 正在启动服务器...
2025-05-17 16:57:24.464 [Thread-2] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.129.5.3:9999
2025-05-17 16:57:24.465 [Thread-2] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.129.5.3:9999
2025-05-17 16:57:29.472 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 1 个历史连接记录
2025-05-17 16:57:33.270 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.129.5.3:9999
2025-05-17 16:57:33.271 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 1 个历史连接记录
2025-05-17 16:57:33.272 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 16:57:33.273 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.129.5.3:9999
2025-05-17 16:57:33.273 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.129.5.3:1095
2025-05-17 16:57:33.275 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.129.5.3:9999
2025-05-17 16:57:33.275 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 16:57:33.275 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=1
2025-05-17 16:57:33.277 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 16:57:33.280 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='26abfdc1-f9a3-43d5-a9cb-65d7eb383dc9', type=LOGIN, sender=null, timestamp=1747472253276}
2025-05-17 16:57:33.283 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1
2025-05-17 16:57:33.284 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@5e6fdbb5
2025-05-17 16:57:33.284 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 16:57:33.287 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 16:57:33.289 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 16:57:33.290 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 16:57:33.290 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 16:57:33.290 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 16:57:33.290 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 16:57:43.290 [Thread-3] WARN  com.chatroom.client.ui.LoginFrame - 登录响应超时
2025-05-17 16:58:19.181 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.129.5.3:9999
2025-05-17 16:58:19.182 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 1 个历史连接记录
2025-05-17 16:58:19.182 [Thread-4] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 16:58:19.183 [Thread-4] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.129.5.3:9999
2025-05-17 16:58:19.183 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.129.5.3:1201
2025-05-17 16:58:19.184 [Thread-4] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.129.5.3:9999
2025-05-17 16:58:19.184 [Thread-4] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 16:58:19.184 [Thread-4] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=1
2025-05-17 16:58:19.184 [Thread-4] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 16:58:19.185 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='816dc5f0-16aa-4ea0-afb7-07e5ff5a58ea', type=LOGIN, sender=null, timestamp=1747472299184}
2025-05-17 16:58:19.185 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1
2025-05-17 16:58:19.185 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@5e52df6
2025-05-17 16:58:19.185 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 16:58:19.185 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=false, message=用户名已存在
2025-05-17 16:58:19.186 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 16:58:19.186 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名已存在
2025-05-17 16:58:19.186 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=false, 消息=用户名已存在
2025-05-17 16:58:19.186 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 16:58:19.186 [pool-2-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名已存在
2025-05-17 16:58:19.186 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 16:58:19.190 [AWT-EventQueue-0] WARN  com.chatroom.client.ui.LoginFrame - 登录失败: 用户名已存在
2025-05-17 16:58:20.023 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.129.5.3:9999
2025-05-17 16:58:20.024 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 1 个历史连接记录
2025-05-17 16:58:20.025 [Thread-6] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 16:58:20.025 [Thread-6] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.129.5.3:9999
2025-05-17 16:58:20.026 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.129.5.3:1203
2025-05-17 16:58:20.026 [Thread-6] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.129.5.3:9999
2025-05-17 16:58:20.027 [Thread-6] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 16:58:20.027 [Thread-6] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=1
2025-05-17 16:58:20.027 [Thread-6] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 16:58:20.027 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='e7d08c54-8096-42bf-8bc2-e4144f43ae4c', type=LOGIN, sender=null, timestamp=1747472300027}
2025-05-17 16:58:20.028 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1
2025-05-17 16:58:20.028 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@13f80c93
2025-05-17 16:58:20.028 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 16:58:20.028 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 登录响应: success=false, message=用户名已存在
2025-05-17 16:58:20.028 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 16:58:20.028 [pool-3-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名已存在
2025-05-17 16:58:20.029 [pool-3-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=false, 消息=用户名已存在
2025-05-17 16:58:20.029 [pool-3-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 16:58:20.029 [pool-3-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名已存在
2025-05-17 16:58:20.029 [pool-3-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 16:58:20.034 [AWT-EventQueue-0] WARN  com.chatroom.client.ui.LoginFrame - 登录失败: 用户名已存在
2025-05-17 16:58:23.218 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.129.5.3:9999
2025-05-17 16:58:23.219 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 1 个历史连接记录
2025-05-17 16:58:23.220 [Thread-8] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 16:58:23.220 [Thread-8] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.129.5.3:9999
2025-05-17 16:58:23.220 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.129.5.3:1221
2025-05-17 16:58:23.221 [Thread-8] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.129.5.3:9999
2025-05-17 16:58:23.221 [Thread-8] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 16:58:23.221 [Thread-8] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=1
2025-05-17 16:58:23.222 [Thread-8] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 16:58:23.222 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='a713ace2-8747-49a1-b452-51e030bb7f4c', type=LOGIN, sender=null, timestamp=1747472303221}
2025-05-17 16:58:23.222 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1
2025-05-17 16:58:23.222 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@71bf5a7c
2025-05-17 16:58:23.222 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 16:58:23.222 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 登录响应: success=false, message=用户名已存在
2025-05-17 16:58:23.223 [pool-4-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名已存在
2025-05-17 16:58:23.223 [pool-4-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=false, 消息=用户名已存在
2025-05-17 16:58:23.223 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 16:58:23.223 [pool-4-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 16:58:23.223 [pool-4-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名已存在
2025-05-17 16:58:23.223 [pool-4-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 16:58:23.226 [AWT-EventQueue-0] WARN  com.chatroom.client.ui.LoginFrame - 登录失败: 用户名已存在
2025-05-17 16:58:23.397 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.129.5.3:9999
2025-05-17 16:58:23.398 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 1 个历史连接记录
2025-05-17 16:58:23.399 [Thread-10] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 16:58:23.399 [Thread-10] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.129.5.3:9999
2025-05-17 16:58:23.399 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.129.5.3:1230
2025-05-17 16:58:23.400 [Thread-10] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.129.5.3:9999
2025-05-17 16:58:23.400 [Thread-10] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 16:58:23.400 [Thread-10] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=1
2025-05-17 16:58:23.401 [Thread-10] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 16:58:23.401 [pool-1-thread-5] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='1a9492f3-eb00-412a-bda2-27db814d0659', type=LOGIN, sender=null, timestamp=1747472303400}
2025-05-17 16:58:23.401 [pool-1-thread-5] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1
2025-05-17 16:58:23.401 [pool-1-thread-5] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@26f43be2
2025-05-17 16:58:23.401 [pool-1-thread-5] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 16:58:23.401 [pool-1-thread-5] INFO  c.c.server.handler.ClientHandler - 登录响应: success=false, message=用户名已存在
2025-05-17 16:58:23.402 [pool-5-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名已存在
2025-05-17 16:58:23.402 [pool-5-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=false, 消息=用户名已存在
2025-05-17 16:58:23.402 [pool-5-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 16:58:23.402 [pool-5-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名已存在
2025-05-17 16:58:23.402 [pool-5-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 16:58:23.402 [pool-1-thread-5] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 16:58:23.404 [AWT-EventQueue-0] WARN  com.chatroom.client.ui.LoginFrame - 登录失败: 用户名已存在
2025-05-17 16:58:23.579 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.129.5.3:9999
2025-05-17 16:58:23.580 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 1 个历史连接记录
2025-05-17 16:58:23.580 [Thread-12] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 16:58:23.580 [Thread-12] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.129.5.3:9999
2025-05-17 16:58:23.581 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.129.5.3:1231
2025-05-17 16:58:23.582 [Thread-12] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.129.5.3:9999
2025-05-17 16:58:23.582 [Thread-12] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 16:58:23.582 [Thread-12] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=1
2025-05-17 16:58:23.582 [Thread-12] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 16:58:23.582 [pool-1-thread-6] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='10692648-8029-4141-bc56-044a73050033', type=LOGIN, sender=null, timestamp=1747472303582}
2025-05-17 16:58:23.582 [pool-1-thread-6] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1
2025-05-17 16:58:23.583 [pool-1-thread-6] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@17606f6d
2025-05-17 16:58:23.583 [pool-1-thread-6] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 16:58:23.583 [pool-1-thread-6] INFO  c.c.server.handler.ClientHandler - 登录响应: success=false, message=用户名已存在
2025-05-17 16:58:23.583 [pool-1-thread-6] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 16:58:23.583 [pool-6-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名已存在
2025-05-17 16:58:23.583 [pool-6-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=false, 消息=用户名已存在
2025-05-17 16:58:23.584 [pool-6-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 16:58:23.584 [pool-6-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名已存在
2025-05-17 16:58:23.584 [pool-6-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 16:58:23.585 [AWT-EventQueue-0] WARN  com.chatroom.client.ui.LoginFrame - 登录失败: 用户名已存在
2025-05-17 16:58:23.784 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.129.5.3:9999
2025-05-17 16:58:23.785 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 1 个历史连接记录
2025-05-17 16:58:23.786 [Thread-14] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 16:58:23.786 [Thread-14] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.129.5.3:9999
2025-05-17 16:58:23.786 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.129.5.3:1232
2025-05-17 16:58:23.787 [Thread-14] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.129.5.3:9999
2025-05-17 16:58:23.787 [Thread-14] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 16:58:23.787 [Thread-14] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=1
2025-05-17 16:58:23.787 [Thread-14] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 16:58:23.788 [pool-1-thread-7] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='f14402d7-6e4a-4a2d-9e41-ec59c92f1bf2', type=LOGIN, sender=null, timestamp=1747472303787}
2025-05-17 16:58:23.788 [pool-1-thread-7] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1
2025-05-17 16:58:23.788 [pool-1-thread-7] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@de25bd
2025-05-17 16:58:23.788 [pool-1-thread-7] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 16:58:23.788 [pool-1-thread-7] INFO  c.c.server.handler.ClientHandler - 登录响应: success=false, message=用户名已存在
2025-05-17 16:58:23.789 [pool-1-thread-7] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 16:58:23.789 [pool-7-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名已存在
2025-05-17 16:58:23.789 [pool-7-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=false, 消息=用户名已存在
2025-05-17 16:58:23.789 [pool-7-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 16:58:23.789 [pool-7-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名已存在
2025-05-17 16:58:23.789 [pool-7-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 16:58:23.792 [AWT-EventQueue-0] WARN  com.chatroom.client.ui.LoginFrame - 登录失败: 用户名已存在
2025-05-17 16:58:23.978 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.129.5.3:9999
2025-05-17 16:58:23.980 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 1 个历史连接记录
2025-05-17 16:58:23.980 [Thread-16] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 16:58:23.980 [Thread-16] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.129.5.3:9999
2025-05-17 16:58:23.981 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.129.5.3:1233
2025-05-17 16:58:23.981 [Thread-16] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.129.5.3:9999
2025-05-17 16:58:23.981 [Thread-16] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 16:58:23.981 [Thread-16] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=1
2025-05-17 16:58:23.982 [Thread-16] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 16:58:23.982 [pool-1-thread-8] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='fca983ea-a075-4904-9abc-a4e96a6a3dc2', type=LOGIN, sender=null, timestamp=1747472303982}
2025-05-17 16:58:23.982 [pool-1-thread-8] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1
2025-05-17 16:58:23.982 [pool-1-thread-8] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@5f17d600
2025-05-17 16:58:23.982 [pool-1-thread-8] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 16:58:23.982 [pool-1-thread-8] INFO  c.c.server.handler.ClientHandler - 登录响应: success=false, message=用户名已存在
2025-05-17 16:58:23.983 [pool-1-thread-8] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 16:58:23.983 [pool-8-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名已存在
2025-05-17 16:58:23.983 [pool-8-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=false, 消息=用户名已存在
2025-05-17 16:58:23.983 [pool-8-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 16:58:23.983 [pool-8-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名已存在
2025-05-17 16:58:23.983 [pool-8-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 16:58:23.984 [AWT-EventQueue-0] WARN  com.chatroom.client.ui.LoginFrame - 登录失败: 用户名已存在
2025-05-17 16:59:27.533 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 16:59:27.533 [pool-1-thread-8] INFO  c.c.server.handler.ClientHandler - 客户端断开连接: /10.129.5.3:1233
2025-05-17 16:59:27.533 [pool-1-thread-8] INFO  c.c.server.handler.ClientHandler - 客户端连接已关闭: /10.129.5.3:1233
2025-05-17 16:59:27.534 [pool-8-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 16:59:28.200 [pool-1-thread-7] INFO  c.c.server.handler.ClientHandler - 客户端断开连接: /10.129.5.3:1232
2025-05-17 16:59:28.200 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 客户端断开连接: /10.129.5.3:1203
2025-05-17 16:59:28.200 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 客户端断开连接: /10.129.5.3:1095
2025-05-17 16:59:28.200 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 客户端断开连接: /10.129.5.3:1221
2025-05-17 16:59:28.200 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 客户端断开连接: /10.129.5.3:1201
2025-05-17 16:59:28.200 [pool-1-thread-6] INFO  c.c.server.handler.ClientHandler - 客户端断开连接: /10.129.5.3:1231
2025-05-17 16:59:28.200 [pool-1-thread-5] INFO  c.c.server.handler.ClientHandler - 客户端断开连接: /10.129.5.3:1230
2025-05-17 16:59:28.200 [pool-1-thread-7] INFO  c.c.server.handler.ClientHandler - 客户端连接已关闭: /10.129.5.3:1232
2025-05-17 16:59:28.200 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 客户端连接已关闭: /10.129.5.3:1203
2025-05-17 16:59:28.200 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 客户端连接已关闭: /10.129.5.3:1095
2025-05-17 16:59:28.200 [pool-1-thread-5] INFO  c.c.server.handler.ClientHandler - 客户端连接已关闭: /10.129.5.3:1230
2025-05-17 16:59:28.200 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 客户端连接已关闭: /10.129.5.3:1201
2025-05-17 16:59:28.200 [pool-1-thread-6] INFO  c.c.server.handler.ClientHandler - 客户端连接已关闭: /10.129.5.3:1231
2025-05-17 16:59:28.200 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 客户端连接已关闭: /10.129.5.3:1221
2025-05-17 16:59:36.976 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 1 个历史连接记录
2025-05-17 16:59:39.501 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.129.5.3:9999
2025-05-17 16:59:39.503 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 1 个历史连接记录
2025-05-17 16:59:39.505 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 16:59:39.505 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.129.5.3:9999
2025-05-17 16:59:39.506 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.129.5.3:1446
2025-05-17 16:59:39.506 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.129.5.3:9999
2025-05-17 16:59:39.506 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 16:59:39.507 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=1
2025-05-17 16:59:39.508 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 16:59:39.509 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='7992d95e-3552-47d8-bbda-b08ba53c470d', type=LOGIN, sender=null, timestamp=1747472379508}
2025-05-17 16:59:39.509 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1
2025-05-17 16:59:39.509 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@3e45b000
2025-05-17 16:59:39.509 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 16:59:39.509 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 16:59:39.510 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 16:59:39.513 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 16:59:39.514 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-17 16:59:39.514 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 1 个用户对象
2025-05-17 16:59:39.514 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 1
2025-05-17 16:59:39.514 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-17 16:59:39.515 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 16:59:39.515 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 16:59:39.515 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 16:59:39.516 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-17 16:59:39.517 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 16:59:39.517 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 16:59:39.517 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 16:59:39.618 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 16:59:39.619 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 16:59:39.620 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 16:59:39.620 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='0c5a7e4b-35a4-4a8f-965b-5ef8c2833fd8', requestId='8d97d7aa-9d19-468f-9380-84b75f68fa68', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747472379619}
2025-05-17 16:59:39.623 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 16:59:39.668 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 16:59:46.430 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 16:59:46.431 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 16:59:46.432 [pool-1-thread-4] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeNonProxyDesc(ObjectOutputStream.java:1303)
	at java.base/java.io.ObjectOutputStream.writeClassDesc(ObjectOutputStream.java:1248)
	at java.base/java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1444)
	at java.base/java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1195)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1616)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:288)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:185)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:111)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:76)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-17 16:59:46.434 [pool-1-thread-4] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 16:59:46.434 [pool-1-thread-4] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 17:02:28.159 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.129.5.3, port=9999, autoSelectPort=true
2025-05-17 17:02:41.576 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 1 个历史连接记录
2025-05-17 17:02:56.601 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=lxy爸爸, 服务器=10.129.5.3:9999
2025-05-17 17:02:56.603 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 1 个历史连接记录
2025-05-17 17:02:56.605 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 17:02:56.605 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.129.5.3:9999
2025-05-17 17:02:58.645 [Thread-2] ERROR com.chatroom.client.ChatClient - 连接服务器失败: Connection refused: connect
2025-05-17 17:02:58.646 [Thread-2] ERROR com.chatroom.client.ui.LoginFrame - 连接服务器失败: 10.129.5.3:9999
2025-05-17 17:03:13.015 [main] INFO  c.chatroom.server.ChatServerLauncher - 使用图形界面启动服务器
2025-05-17 17:03:13.366 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.129.5.3, port=9999, autoSelectPort=true
2025-05-17 17:03:15.786 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-17 17:03:15.789 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 配置已保存: 绑定地址=10.129.5.3, 端口=9999, 自动选择端口=true
2025-05-17 17:03:15.791 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 正在启动服务器...
2025-05-17 17:03:15.793 [Thread-2] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.129.5.3:9999
2025-05-17 17:03:15.793 [Thread-2] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.129.5.3:9999
2025-05-17 17:03:22.204 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 1 个历史连接记录
2025-05-17 17:03:27.866 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.129.5.3:9999
2025-05-17 17:03:27.867 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 1 个历史连接记录
2025-05-17 17:03:27.869 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 17:03:27.869 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.129.5.3:9999
2025-05-17 17:03:27.870 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.129.5.3:5676
2025-05-17 17:03:27.871 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.129.5.3:9999
2025-05-17 17:03:27.871 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 17:03:27.871 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=1
2025-05-17 17:03:27.873 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 17:03:27.876 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='f77b1b0d-9437-4ea2-9f1d-49f366144e84', type=LOGIN, sender=null, timestamp=1747472607873}
2025-05-17 17:03:27.878 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1
2025-05-17 17:03:27.879 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@3903ae31
2025-05-17 17:03:27.879 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 17:03:27.883 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 17:03:27.884 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 17:03:27.885 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 17:03:27.886 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-17 17:03:27.886 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 1 个用户对象
2025-05-17 17:03:27.886 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 1
2025-05-17 17:03:27.886 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-17 17:03:27.886 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 17:03:27.887 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 17:03:27.887 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 17:03:27.888 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 17:03:27.888 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 17:03:27.888 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 17:03:27.888 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 17:03:27.894 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-17 17:03:27.973 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 17:03:27.975 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 17:03:27.975 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 17:03:27.975 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='f58aa6da-3a7b-430c-9011-c48f8bdd7306', requestId='ee5fd71b-d65c-4fcf-9d60-ccea553fb913', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747472607975}
2025-05-17 17:03:27.979 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 17:03:28.033 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 17:03:37.875 [Thread-3] WARN  com.chatroom.client.ui.LoginFrame - 登录响应超时
2025-05-17 17:03:54.309 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.129.85.71:55639
2025-05-17 17:03:54.406 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='d9cdac3b-55e7-4972-8444-0ed5bbb6b6fc', type=LOGIN, sender=null, timestamp=1747472635673}
2025-05-17 17:03:54.406 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2
2025-05-17 17:03:54.406 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@71bf5a7c
2025-05-17 17:03:54.406 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 17:03:54.407 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 17:03:54.407 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 17:04:04.612 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 17:04:04.612 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 17:04:04.612 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 17:04:04.613 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='9bcd4f15-67be-4c96-a507-469d729defea', requestId='6c5790f7-395d-49b5-a913-fea59995f62e', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747472644612}
2025-05-17 17:04:04.613 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 17:04:04.613 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 2 个用户
2025-05-17 17:04:06.127 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 2 的聊天窗口
2025-05-17 17:04:06.139 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 2 的新聊天窗口
2025-05-17 17:04:10.767 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-17 17:04:10.767 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 17:04:10.767 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 17:04:18.446 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-17 17:04:18.446 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 17:04:18.446 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 17:05:09.808 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 17:05:09.809 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 17:05:09.809 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 17:05:09.809 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='0e08053a-fc18-442b-b5a3-d806bcad2825', requestId='3ee4ed50-63d9-4117-be53-c6f4218e7779', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747472709808}
2025-05-17 17:05:09.809 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 17:05:09.809 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 2 个用户
2025-05-17 17:05:13.955 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-17 17:05:13.955 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 17:05:13.955 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 17:06:22.013 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 客户端连接已关闭: /10.129.85.71:55639
2025-05-17 17:06:22.013 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 客户端连接已关闭: /10.129.85.71:55639
2025-05-17 17:06:37.405 [pool-1-thread-1] ERROR com.chatroom.client.MessageHandler - 读取数据时出错: Connection reset
2025-05-17 17:06:37.405 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 17:06:39.593 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-17 17:06:39.594 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 断开连接时出错: Socket closed
2025-05-17 20:18:57.805 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.129.5.3, port=9999, autoSelectPort=true
2025-05-17 20:18:59.183 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.129.5.3, port=9999, autoSelectPort=true
2025-05-17 20:19:03.136 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-17 20:19:03.139 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 配置已保存: 绑定地址=10.129.5.3, 端口=9999, 自动选择端口=true
2025-05-17 20:19:03.142 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 正在启动服务器...
2025-05-17 20:19:03.145 [Thread-2] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.129.5.3:9999
2025-05-17 20:19:03.145 [Thread-2] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.129.5.3:9999
2025-05-17 20:19:07.116 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 1 个历史连接记录
2025-05-17 20:19:08.487 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 1 个历史连接记录
2025-05-17 20:19:11.713 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.129.5.3:9999
2025-05-17 20:19:11.715 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 1 个历史连接记录
2025-05-17 20:19:11.716 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 20:19:11.716 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.129.5.3:9999
2025-05-17 20:19:11.717 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.129.5.3:13143
2025-05-17 20:19:11.718 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.129.5.3:9999
2025-05-17 20:19:11.718 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 20:19:11.718 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=1
2025-05-17 20:19:11.721 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 20:19:11.723 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='357833c8-d24a-4308-9ec1-f7c53ac51aa7', type=LOGIN, sender=null, timestamp=1747484351720}
2025-05-17 20:19:11.727 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1
2025-05-17 20:19:11.728 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@7184fe45
2025-05-17 20:19:11.728 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 20:19:11.731 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 20:19:11.732 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 20:19:11.734 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 20:19:11.734 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-17 20:19:11.734 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 1 个用户对象
2025-05-17 20:19:11.734 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 1
2025-05-17 20:19:11.734 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-17 20:19:11.735 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 20:19:11.735 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 20:19:11.735 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 20:19:11.735 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-17 20:19:11.737 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 20:19:11.737 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 20:19:11.737 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 20:19:11.840 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 20:19:11.842 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 20:19:11.842 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 20:19:11.842 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='f7212551-dbac-4bfb-8422-ad1202fb62c8', requestId='600ee40a-ac06-4192-902b-ffb590ddb23c', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747484351842}
2025-05-17 20:19:11.845 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 20:19:11.921 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 20:19:14.246 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.129.5.3:9999
2025-05-17 20:19:14.248 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 1 个历史连接记录
2025-05-17 20:19:14.249 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 20:19:14.249 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.129.5.3:9999
2025-05-17 20:19:14.250 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.129.5.3:13145
2025-05-17 20:19:14.251 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.129.5.3:9999
2025-05-17 20:19:14.251 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 20:19:14.251 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=2
2025-05-17 20:19:14.253 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 20:19:14.253 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='91e74bc9-a1db-4283-b767-db01877d4f40', type=LOGIN, sender=null, timestamp=1747484354252}
2025-05-17 20:19:14.254 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2
2025-05-17 20:19:14.254 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@17606f6d
2025-05-17 20:19:14.254 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 20:19:14.256 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 20:19:14.257 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 20:19:14.259 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 20:19:14.260 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-17 20:19:14.260 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 1 个用户对象
2025-05-17 20:19:14.260 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 2
2025-05-17 20:19:14.260 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-17 20:19:14.261 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 20:19:14.261 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 20:19:14.261 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 20:19:14.261 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-17 20:19:14.261 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 20:19:14.262 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 20:19:14.262 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 20:19:14.380 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 20:19:14.382 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 20:19:14.382 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 20:19:14.382 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='810a83db-658a-48a1-888b-3949eaa980f0', requestId='1494d814-ef02-422e-b5fc-c89de7ff8270', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747484354382}
2025-05-17 20:19:14.386 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 20:19:14.437 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 2 个用户
2025-05-17 20:19:17.275 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 20:19:17.276 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 20:19:17.277 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 20:19:17.277 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='c043abc9-d85e-4add-9745-e5196a51a4ea', requestId='1ef813a7-1c47-4c80-9ea8-76c2c5510d99', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747484357276}
2025-05-17 20:19:17.277 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 20:19:17.277 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 2 个用户
2025-05-17 20:19:19.893 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 2 的聊天窗口
2025-05-17 20:19:19.902 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 2 的新聊天窗口
2025-05-17 20:19:21.310 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-17 20:19:21.321 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 1 的新聊天窗口
2025-05-17 20:19:21.737 [Thread-3] WARN  com.chatroom.client.ui.LoginFrame - 登录响应超时
2025-05-17 20:19:24.255 [Thread-3] WARN  com.chatroom.client.ui.LoginFrame - 登录响应超时
2025-05-17 20:19:25.187 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=1, 接收者=fb8f96d5-41f7-4b18-9e5c-646ef690983c, 内容=1
2025-05-17 20:19:25.187 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: fb8f96d5-41f7-4b18-9e5c-646ef690983c
2025-05-17 20:19:25.187 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 回显消息给发送者
2025-05-17 20:19:25.188 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-17 20:19:25.188 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 20:19:25.188 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 20:19:30.269 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=4c648648-b1f5-48a7-8285-abf82ed843ae, 内容=2
2025-05-17 20:19:30.269 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 4c648648-b1f5-48a7-8285-abf82ed843ae
2025-05-17 20:19:30.270 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 回显消息给发送者
2025-05-17 20:19:30.270 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-17 20:19:30.271 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 20:19:30.271 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 20:27:23.755 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 客户端断开连接: /10.129.5.3:13145
2025-05-17 20:27:23.755 [pool-1-thread-1] ERROR com.chatroom.client.MessageHandler - 读取数据时出错: 你的主机中的软件中止了一个已建立的连接。
2025-05-17 20:27:23.755 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 20:27:23.755 [pool-1-thread-1] ERROR com.chatroom.client.MessageHandler - 读取数据时出错: 你的主机中的软件中止了一个已建立的连接。
2025-05-17 20:27:23.755 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 客户端断开连接: /10.129.5.3:13143
2025-05-17 20:27:23.755 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 20:27:23.757 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送消息时出错: Connection reset by peer
2025-05-17 20:27:23.757 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 20:27:23.757 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 客户端连接已关闭: /10.129.5.3:13145
2025-05-17 20:35:10.708 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 20:35:10.710 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-17 20:35:10.710 [AWT-EventQueue-0] ERROR c.chatroom.client.ui.ChatMainFrame - 发送获取用户列表请求失败
2025-05-17 20:35:14.196 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-17 20:35:14.740 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-17 20:35:14.953 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-17 20:35:18.245 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-17 20:35:18.756 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-17 20:35:18.961 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-17 20:35:19.162 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-17 20:35:21.621 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-17 20:35:22.144 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-17 20:35:23.554 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 2 的聊天窗口
2025-05-17 20:35:26.190 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 2 的聊天窗口
2025-05-17 20:35:29.567 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-17 20:35:29.567 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 断开连接时出错: Socket closed
2025-05-17 20:35:30.768 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 20:35:30.769 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-17 20:35:30.769 [AWT-EventQueue-0] ERROR c.chatroom.client.ui.ChatMainFrame - 发送获取用户列表请求失败
2025-05-17 20:35:31.578 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 20:35:31.579 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-17 20:35:31.579 [AWT-EventQueue-0] ERROR c.chatroom.client.ui.ChatMainFrame - 发送获取用户列表请求失败
2025-05-17 20:35:32.969 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 20:35:32.969 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-17 20:35:32.969 [AWT-EventQueue-0] ERROR c.chatroom.client.ui.ChatMainFrame - 发送获取用户列表请求失败
2025-05-17 20:35:33.169 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 20:35:33.169 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-17 20:35:33.169 [AWT-EventQueue-0] ERROR c.chatroom.client.ui.ChatMainFrame - 发送获取用户列表请求失败
2025-05-17 20:35:35.315 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 20:35:35.315 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-17 20:35:35.315 [AWT-EventQueue-0] ERROR c.chatroom.client.ui.ChatMainFrame - 发送获取用户列表请求失败
2025-05-17 20:35:35.526 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 20:35:35.526 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-17 20:35:35.526 [AWT-EventQueue-0] ERROR c.chatroom.client.ui.ChatMainFrame - 发送获取用户列表请求失败
2025-05-17 20:35:35.696 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 20:35:35.696 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-17 20:35:35.696 [AWT-EventQueue-0] ERROR c.chatroom.client.ui.ChatMainFrame - 发送获取用户列表请求失败
2025-05-17 20:35:36.914 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-17 20:35:39.113 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-17 20:35:39.113 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 断开连接时出错: Socket closed
2025-05-17 20:41:04.406 [main] INFO  c.chatroom.server.ChatServerLauncher - 使用图形界面启动服务器
2025-05-17 20:41:04.761 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.129.5.3, port=9999, autoSelectPort=true
2025-05-17 20:41:10.593 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-17 20:41:10.595 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 配置已保存: 绑定地址=10.29.183.159, 端口=9999, 自动选择端口=true
2025-05-17 20:41:10.598 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 正在启动服务器...
2025-05-17 20:41:10.600 [Thread-2] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-17 20:41:10.600 [Thread-2] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-17 20:41:16.417 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 1 个历史连接记录
2025-05-17 20:41:17.834 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 1 个历史连接记录
2025-05-17 20:41:20.072 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.129.5.3:9999
2025-05-17 20:41:20.074 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 1 个历史连接记录
2025-05-17 20:41:20.075 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 20:41:20.075 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.129.5.3:9999
2025-05-17 20:41:24.153 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.129.5.3:9999
2025-05-17 20:41:24.155 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 1 个历史连接记录
2025-05-17 20:41:24.157 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 20:41:24.157 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.129.5.3:9999
2025-05-17 20:41:41.094 [Thread-2] ERROR com.chatroom.client.ChatClient - 连接服务器失败: Connection timed out: connect
2025-05-17 20:41:41.095 [Thread-2] ERROR com.chatroom.client.ui.LoginFrame - 连接服务器失败: 10.129.5.3:9999
2025-05-17 20:41:45.208 [Thread-2] ERROR com.chatroom.client.ChatClient - 连接服务器失败: Connection timed out: connect
2025-05-17 20:41:45.209 [Thread-2] ERROR com.chatroom.client.ui.LoginFrame - 连接服务器失败: 10.129.5.3:9999
2025-05-17 20:42:00.272 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-17 20:42:02.789 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-17 20:42:02.792 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 配置已保存: 绑定地址=10.29.183.159, 端口=9999, 自动选择端口=true
2025-05-17 20:42:02.795 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 正在启动服务器...
2025-05-17 20:42:02.796 [Thread-2] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-17 20:42:02.796 [Thread-2] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-17 20:42:07.563 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 1 个历史连接记录
2025-05-17 20:42:08.902 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 1 个历史连接记录
2025-05-17 20:42:10.468 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.129.5.3:9999
2025-05-17 20:42:10.470 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 1 个历史连接记录
2025-05-17 20:42:10.472 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 20:42:10.472 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.129.5.3:9999
2025-05-17 20:42:13.310 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.129.5.3:9999
2025-05-17 20:42:13.312 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 1 个历史连接记录
2025-05-17 20:42:13.313 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 20:42:13.313 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.129.5.3:9999
2025-05-17 20:42:31.498 [Thread-2] ERROR com.chatroom.client.ChatClient - 连接服务器失败: Connection timed out: connect
2025-05-17 20:42:31.498 [Thread-2] ERROR com.chatroom.client.ui.LoginFrame - 连接服务器失败: 10.129.5.3:9999
2025-05-17 20:42:34.353 [Thread-2] ERROR com.chatroom.client.ChatClient - 连接服务器失败: Connection timed out: connect
2025-05-17 20:42:34.354 [Thread-2] ERROR com.chatroom.client.ui.LoginFrame - 连接服务器失败: 10.129.5.3:9999
2025-05-17 20:44:56.678 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-17 20:44:56.679 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-17 20:44:56.680 [Thread-3] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 20:44:56.680 [Thread-3] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.29.183.159:9999
2025-05-17 20:44:56.681 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:4380
2025-05-17 20:44:56.682 [Thread-3] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-17 20:44:56.682 [Thread-3] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 20:44:56.683 [Thread-3] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=2
2025-05-17 20:44:56.685 [Thread-3] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 20:44:56.688 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='2f860423-0c72-4149-8214-6fbfd4fdbdf1', type=LOGIN, sender=null, timestamp=1747485896684}
2025-05-17 20:44:56.690 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2
2025-05-17 20:44:56.692 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@585bf789
2025-05-17 20:44:56.692 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 20:44:56.694 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 20:44:56.696 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 20:44:56.697 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 20:44:56.697 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-17 20:44:56.697 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 1 个用户对象
2025-05-17 20:44:56.697 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 2
2025-05-17 20:44:56.697 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-17 20:44:56.698 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 20:44:56.698 [pool-2-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 20:44:56.698 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 20:44:56.698 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-17 20:44:56.700 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 20:44:56.700 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 20:44:56.700 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 20:44:56.808 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 20:44:56.810 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 20:44:56.810 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 20:44:56.810 [pool-2-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='041ee323-6c47-4daf-b135-b24c59be8fc7', requestId='5dc1f1b4-32d0-4f63-afd6-64b3bf745fbc', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747485896809}
2025-05-17 20:44:56.813 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 20:44:56.868 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-17 20:44:56.869 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-17 20:45:06.687 [Thread-4] WARN  com.chatroom.client.ui.LoginFrame - 登录响应超时
2025-05-17 20:45:10.626 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-17 20:45:10.627 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-17 20:45:10.628 [Thread-3] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 20:45:10.628 [Thread-3] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.29.183.159:9999
2025-05-17 20:45:10.628 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:4395
2025-05-17 20:45:10.629 [Thread-3] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-17 20:45:10.629 [Thread-3] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 20:45:10.630 [Thread-3] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=1
2025-05-17 20:45:10.631 [Thread-3] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 20:45:10.631 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='9bfb0152-3e9d-4c01-98c2-72d28030c7f6', type=LOGIN, sender=null, timestamp=1747485910631}
2025-05-17 20:45:10.631 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1
2025-05-17 20:45:10.632 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@76c32ffc
2025-05-17 20:45:10.632 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 20:45:10.632 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 20:45:10.632 [pool-2-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 内容=1 已加入聊天室
2025-05-17 20:45:10.633 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 20:45:10.636 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 20:45:10.636 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-17 20:45:10.636 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 1 个用户对象
2025-05-17 20:45:10.636 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 1
2025-05-17 20:45:10.636 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-17 20:45:10.636 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 20:45:10.637 [pool-2-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 20:45:10.637 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 20:45:10.637 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-17 20:45:10.637 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 20:45:10.637 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 20:45:10.637 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 20:45:10.722 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 20:45:10.724 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 20:45:10.724 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 20:45:10.724 [pool-2-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='5a2fde60-d50d-42cd-8680-0582ef971ed8', requestId='8a6d3c3d-8733-4418-8dcc-35ff6a386ed4', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747485910723}
2025-05-17 20:45:10.728 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 20:45:10.779 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 20:45:10.780 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 20:45:12.618 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 20:45:12.619 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 20:45:12.620 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 20:45:12.620 [pool-2-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='034598ce-a9d2-43a5-90b6-4d139ddd84ff', requestId='5eb23687-aa20-422b-b38c-a6926dc2d985', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747485912619}
2025-05-17 20:45:12.620 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 20:45:12.620 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 20:45:12.620 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 20:45:13.466 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 20:45:13.467 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 20:45:13.467 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 20:45:13.467 [pool-2-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='8603e283-76e5-4f2b-9f55-3550d27a275e', requestId='3b401a4d-99c9-4048-a92c-7a9685edbfdb', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747485913467}
2025-05-17 20:45:13.467 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 20:45:13.467 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 20:45:13.467 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 20:45:14.837 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 20:45:14.838 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 20:45:14.839 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 20:45:14.839 [pool-2-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='dc3fd53f-628a-43c6-a017-8c85fbc78d78', requestId='f8ae0926-8c5c-4f0f-ba39-d0d9fd7f2d34', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747485914838}
2025-05-17 20:45:14.839 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 20:45:14.839 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 20:45:14.839 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 20:45:15.058 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 20:45:15.059 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 20:45:15.059 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 20:45:15.059 [pool-2-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='e6dcae2f-a435-426a-a91a-ab5cacb1ca3b', requestId='a53d8ce9-4cee-4957-8afa-821608165271', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747485915059}
2025-05-17 20:45:15.059 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 20:45:15.059 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 20:45:15.059 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 20:45:15.222 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 20:45:15.223 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 20:45:15.223 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 20:45:15.223 [pool-2-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='28e44045-5eb7-4b8a-8451-bf86459aa95b', requestId='3ceb2bc4-bd28-4f8c-b708-309bb0545931', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747485915223}
2025-05-17 20:45:15.223 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 20:45:15.224 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 20:45:15.224 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 20:45:15.960 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 20:45:15.961 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 20:45:15.961 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 20:45:15.961 [pool-2-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='d71ea216-dfbc-457f-98ff-52d842a3be31', requestId='7cb27aa7-2d7e-459f-ac61-0820e619f3a5', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747485915961}
2025-05-17 20:45:15.961 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 20:45:15.961 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 20:45:15.962 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 20:45:16.169 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 20:45:16.170 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 20:45:16.170 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 20:45:16.170 [pool-2-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='45b20b1c-1530-485f-a0e5-68d45efcc29f', requestId='2b45743a-337a-482e-953a-0a0e4f81548b', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747485916170}
2025-05-17 20:45:16.170 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 20:45:16.170 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 20:45:16.171 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 20:45:16.371 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 20:45:16.371 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 20:45:16.371 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 20:45:16.371 [pool-2-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='78518179-689d-418d-8521-3dfeed4ef487', requestId='ca5627e7-42b3-472f-b478-f985cd17b2e7', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747485916371}
2025-05-17 20:45:16.372 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 20:45:16.372 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 20:45:16.372 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 20:45:16.575 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 20:45:16.575 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 20:45:16.576 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 20:45:16.576 [pool-2-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='661a1538-0970-4505-9f29-2e93bdab13a7', requestId='1a07db92-6054-49b0-a4e6-3d5810b5a853', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747485916575}
2025-05-17 20:45:16.576 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 20:45:16.576 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 20:45:16.576 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 20:45:17.562 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 2 的聊天窗口
2025-05-17 20:45:17.573 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 2 的新聊天窗口
2025-05-17 20:45:20.640 [Thread-4] WARN  com.chatroom.client.ui.LoginFrame - 登录响应超时
2025-05-17 20:45:22.565 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 内容=1
2025-05-17 20:45:22.565 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=1, 接收者=1514ab77-9424-40ef-81d2-f7baa7da82a1, 内容=1
2025-05-17 20:45:22.565 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 1514ab77-9424-40ef-81d2-f7baa7da82a1
2025-05-17 20:45:22.566 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 回显消息给发送者
2025-05-17 20:45:22.566 [pool-2-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 内容=1
2025-05-17 20:45:22.566 [pool-2-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 内容=1
2025-05-17 20:45:22.566 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-17 20:45:22.566 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-17 20:45:22.566 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 20:45:22.566 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 20:45:22.579 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 1 的新聊天窗口
2025-05-17 20:45:25.077 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-17 20:45:27.550 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 内容=2
2025-05-17 20:45:27.550 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=613b00ba-c04d-4c04-8ffc-344f9d9f2373, 内容=2
2025-05-17 20:45:27.550 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 613b00ba-c04d-4c04-8ffc-344f9d9f2373
2025-05-17 20:45:27.550 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 回显消息给发送者
2025-05-17 20:45:27.550 [pool-2-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 内容=2
2025-05-17 20:45:27.551 [pool-2-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 内容=2
2025-05-17 20:45:27.551 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-17 20:45:27.551 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 20:45:27.551 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 20:45:53.017 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 内容=1231
2025-05-17 20:45:53.017 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=613b00ba-c04d-4c04-8ffc-344f9d9f2373, 内容=1231
2025-05-17 20:45:53.017 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 613b00ba-c04d-4c04-8ffc-344f9d9f2373
2025-05-17 20:45:53.018 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 回显消息给发送者
2025-05-17 20:45:53.018 [pool-2-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 内容=1231
2025-05-17 20:45:53.018 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-17 20:45:53.018 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 20:45:53.018 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 20:45:53.018 [pool-2-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 内容=1231
2025-05-17 20:51:01.937 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 20:51:01.937 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 20:51:01.937 [pool-2-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 内容=1 已离开聊天室
2025-05-17 20:51:01.940 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:314)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:185)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:111)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:76)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-17 20:51:01.942 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 20:51:01.942 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 20:51:05.901 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 20:51:05.902 [pool-2-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 20:51:05.902 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:314)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:185)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:111)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:76)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-17 20:51:05.902 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 20:51:05.902 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 20:51:13.253 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-17 20:51:14.654 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-17 20:51:16.671 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-17 20:51:16.673 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-17 20:51:16.674 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 20:51:16.675 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.29.183.159:9999
2025-05-17 20:51:16.676 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:8651
2025-05-17 20:51:16.676 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-17 20:51:16.676 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 20:51:16.677 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=1
2025-05-17 20:51:16.679 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 20:51:16.679 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='e1d5cce8-e199-47df-9ddc-c0e874501c80', type=LOGIN, sender=null, timestamp=1747486276678}
2025-05-17 20:51:16.679 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1
2025-05-17 20:51:16.679 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@76e9938b
2025-05-17 20:51:16.679 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 20:51:16.680 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 20:51:16.680 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 20:51:16.684 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 20:51:16.685 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-17 20:51:16.685 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 1 个用户对象
2025-05-17 20:51:16.685 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 1
2025-05-17 20:51:16.685 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-17 20:51:16.686 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 20:51:16.686 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 20:51:16.686 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 20:51:16.686 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-17 20:51:16.686 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 20:51:16.687 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 20:51:16.687 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 20:51:16.757 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 20:51:16.758 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 20:51:16.758 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 20:51:16.758 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='eabb2748-e07e-40ad-9e60-a95097c21963', requestId='5c477ed2-510f-44bf-8e48-281fe826f1b5', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747486276757}
2025-05-17 20:51:16.761 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 20:51:16.805 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-17 20:51:16.806 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-17 20:51:19.333 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-17 20:51:19.335 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-17 20:51:19.336 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 20:51:19.337 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.29.183.159:9999
2025-05-17 20:51:19.337 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:8658
2025-05-17 20:51:19.338 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-17 20:51:19.338 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 20:51:19.338 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=2
2025-05-17 20:51:19.340 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 20:51:19.340 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='2e49769e-e2c6-4f37-8a58-4a426e9cd1a4', type=LOGIN, sender=null, timestamp=1747486279339}
2025-05-17 20:51:19.340 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2
2025-05-17 20:51:19.340 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@11d610f8
2025-05-17 20:51:19.340 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 20:51:19.341 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 20:51:19.341 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=2 已加入聊天室
2025-05-17 20:51:19.341 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 20:51:19.344 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 20:51:19.344 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-17 20:51:19.344 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 1 个用户对象
2025-05-17 20:51:19.344 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 2
2025-05-17 20:51:19.345 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-17 20:51:19.345 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 20:51:19.345 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 20:51:19.345 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 20:51:19.346 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-17 20:51:19.346 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 20:51:19.346 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 20:51:19.346 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 20:51:19.418 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 20:51:19.419 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 20:51:19.419 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 20:51:19.419 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='c3eada3c-1b24-4448-9250-cee30d932428', requestId='ac6181d8-22ff-4faf-8c14-07825164ac15', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747486279419}
2025-05-17 20:51:19.422 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 20:51:19.472 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 20:51:19.473 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 20:51:22.342 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 20:51:22.343 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 20:51:22.343 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 20:51:22.343 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='242b8985-7f36-4a40-8985-721baa26d0be', requestId='bb9ee09a-8d4b-4a19-a334-87a6cbcb9d41', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747486282343}
2025-05-17 20:51:22.344 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 20:51:22.344 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 20:51:22.344 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 20:51:23.933 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-17 20:51:23.941 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 1 的新聊天窗口
2025-05-17 20:51:25.222 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 2 的聊天窗口
2025-05-17 20:51:25.229 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 2 的新聊天窗口
2025-05-17 20:51:26.692 [Thread-3] WARN  com.chatroom.client.ui.LoginFrame - 登录响应超时
2025-05-17 20:51:26.715 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=a525db13-b843-403c-aaf6-5de7f54124a3, 内容=1
2025-05-17 20:51:26.715 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=a525db13-b843-403c-aaf6-5de7f54124a3, 内容=1
2025-05-17 20:51:26.715 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: a525db13-b843-403c-aaf6-5de7f54124a3
2025-05-17 20:51:26.716 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 回显消息给发送者
2025-05-17 20:51:26.716 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=a525db13-b843-403c-aaf6-5de7f54124a3, 内容=1
2025-05-17 20:51:26.716 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=a525db13-b843-403c-aaf6-5de7f54124a3, 内容=1
2025-05-17 20:51:26.717 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-17 20:51:26.717 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 20:51:26.717 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 20:51:29.348 [Thread-3] WARN  com.chatroom.client.ui.LoginFrame - 登录响应超时
2025-05-17 20:51:31.231 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=c78f8bb4-8306-4f2b-8890-ed14679b0e62, 内容=2
2025-05-17 20:51:31.231 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=1, 接收者=c78f8bb4-8306-4f2b-8890-ed14679b0e62, 内容=2
2025-05-17 20:51:31.231 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: c78f8bb4-8306-4f2b-8890-ed14679b0e62
2025-05-17 20:51:31.231 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 回显消息给发送者
2025-05-17 20:51:31.231 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=c78f8bb4-8306-4f2b-8890-ed14679b0e62, 内容=2
2025-05-17 20:51:31.232 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=c78f8bb4-8306-4f2b-8890-ed14679b0e62, 内容=2
2025-05-17 20:51:31.232 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-17 20:51:31.232 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 20:51:31.232 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 21:04:50.678 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 21:04:50.679 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 21:04:50.679 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=1 已离开聊天室
2025-05-17 21:04:50.679 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:314)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:185)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:111)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:76)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-17 21:04:50.680 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 21:04:50.680 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 21:04:53.626 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 21:04:53.627 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:314)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:185)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:111)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:76)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-17 21:04:53.627 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 21:04:53.627 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 21:04:53.627 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 21:05:03.734 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-17 21:05:05.092 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-17 21:05:06.865 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-17 21:05:06.867 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-17 21:05:06.868 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 21:05:06.869 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.29.183.159:9999
2025-05-17 21:05:06.869 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:14614
2025-05-17 21:05:06.870 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-17 21:05:06.870 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 21:05:06.870 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=1
2025-05-17 21:05:06.872 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 21:05:06.872 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='b45ac56f-e492-45df-85ee-c2e890962c06', type=LOGIN, sender=null, timestamp=1747487106871}
2025-05-17 21:05:06.872 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1
2025-05-17 21:05:06.872 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@40ae5e57
2025-05-17 21:05:06.872 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 21:05:06.873 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 21:05:06.873 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 21:05:06.877 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 21:05:06.878 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-17 21:05:06.878 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 1 个用户对象
2025-05-17 21:05:06.878 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 1
2025-05-17 21:05:06.878 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-17 21:05:06.878 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:05:06.879 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 21:05:06.879 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:05:06.879 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-17 21:05:06.879 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:05:06.879 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 21:05:06.880 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 21:05:06.956 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 21:05:06.957 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:05:06.958 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:05:06.958 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='140b434e-de47-4a2a-bb29-30c3617a8dbc', requestId='1e03f422-4358-45df-af9e-5820e7beef61', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747487106957}
2025-05-17 21:05:06.961 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:05:06.997 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-17 21:05:06.998 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-17 21:05:09.727 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-17 21:05:09.728 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-17 21:05:09.730 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 21:05:09.730 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.29.183.159:9999
2025-05-17 21:05:09.730 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:14620
2025-05-17 21:05:09.731 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-17 21:05:09.731 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 21:05:09.731 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=2
2025-05-17 21:05:09.734 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 21:05:09.734 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='0e15ac89-c4a4-4c10-869d-407f011f4080', type=LOGIN, sender=null, timestamp=1747487109733}
2025-05-17 21:05:09.734 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2
2025-05-17 21:05:09.734 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@46c5d9cb
2025-05-17 21:05:09.734 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 21:05:09.734 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 21:05:09.735 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 21:05:09.735 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=2 已加入聊天室
2025-05-17 21:05:09.738 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 21:05:09.738 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-17 21:05:09.738 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 1 个用户对象
2025-05-17 21:05:09.738 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 2
2025-05-17 21:05:09.738 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-17 21:05:09.738 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:05:09.739 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 21:05:09.739 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:05:09.739 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-17 21:05:09.739 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:05:09.739 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 21:05:09.739 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 21:05:09.805 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 21:05:09.806 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:05:09.806 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:05:09.806 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='48bc3aa6-02a9-4845-a8ad-4d2d52dc2373', requestId='cd5d74f8-34a4-45aa-9932-d172fcca8e70', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747487109805}
2025-05-17 21:05:09.810 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:05:09.850 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 21:05:09.851 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 21:05:13.148 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 21:05:13.149 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:05:13.149 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:05:13.149 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='635567f1-89d4-4d27-8d29-dc41d77bc080', requestId='34e76a56-6486-41ac-b66b-fc1b5f144a63', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747487113149}
2025-05-17 21:05:13.149 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:05:13.149 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 21:05:13.150 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 21:05:14.119 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 2 的聊天窗口
2025-05-17 21:05:14.125 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 2 的新聊天窗口
2025-05-17 21:05:16.886 [Thread-3] WARN  com.chatroom.client.ui.LoginFrame - 登录响应超时
2025-05-17 21:05:18.766 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=1, 接收者=382d5df7-1170-43a0-8dea-ee30a3494fac, 内容=1
2025-05-17 21:05:18.766 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=382d5df7-1170-43a0-8dea-ee30a3494fac, 内容=1
2025-05-17 21:05:18.766 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 382d5df7-1170-43a0-8dea-ee30a3494fac
2025-05-17 21:05:18.767 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 回显消息给发送者
2025-05-17 21:05:18.767 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-17 21:05:18.767 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 21:05:18.767 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 21:05:18.767 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=382d5df7-1170-43a0-8dea-ee30a3494fac, 内容=1
2025-05-17 21:05:18.768 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-17 21:05:18.774 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 1 的新聊天窗口
2025-05-17 21:05:19.737 [Thread-3] WARN  com.chatroom.client.ui.LoginFrame - 登录响应超时
2025-05-17 21:05:21.402 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=2075eda9-0aab-40f0-96b8-812dc98d13ca, 内容=2
2025-05-17 21:05:21.402 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 2075eda9-0aab-40f0-96b8-812dc98d13ca
2025-05-17 21:05:21.402 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=2075eda9-0aab-40f0-96b8-812dc98d13ca, 内容=2
2025-05-17 21:05:21.403 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 回显消息给发送者
2025-05-17 21:05:21.403 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-17 21:05:21.403 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=2075eda9-0aab-40f0-96b8-812dc98d13ca, 内容=2
2025-05-17 21:05:21.403 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 21:05:21.404 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 21:05:27.656 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=382d5df7-1170-43a0-8dea-ee30a3494fac, 内容=你好
2025-05-17 21:05:27.656 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=1, 接收者=382d5df7-1170-43a0-8dea-ee30a3494fac, 内容=你好
2025-05-17 21:05:27.656 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 382d5df7-1170-43a0-8dea-ee30a3494fac
2025-05-17 21:05:27.656 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 回显消息给发送者
2025-05-17 21:05:27.656 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-17 21:05:27.656 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=382d5df7-1170-43a0-8dea-ee30a3494fac, 内容=你好
2025-05-17 21:05:27.657 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 21:05:27.657 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 21:05:33.479 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=2075eda9-0aab-40f0-96b8-812dc98d13ca, 内容=你好
2025-05-17 21:05:33.479 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=2075eda9-0aab-40f0-96b8-812dc98d13ca, 内容=你好
2025-05-17 21:05:33.479 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 2075eda9-0aab-40f0-96b8-812dc98d13ca
2025-05-17 21:05:33.480 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 回显消息给发送者
2025-05-17 21:05:33.480 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=2075eda9-0aab-40f0-96b8-812dc98d13ca, 内容=你好
2025-05-17 21:05:33.480 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-17 21:05:33.480 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 21:05:33.480 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 21:20:11.695 [main] INFO  c.chatroom.server.ChatServerLauncher - 使用图形界面启动服务器
2025-05-17 21:20:12.073 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-17 21:20:14.439 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-17 21:20:14.441 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 配置已保存: 绑定地址=10.29.183.159, 端口=9999, 自动选择端口=true
2025-05-17 21:20:14.443 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 正在启动服务器...
2025-05-17 21:20:14.445 [Thread-2] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-17 21:20:14.445 [Thread-2] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-17 21:20:20.410 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-17 21:20:22.148 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-17 21:20:29.211 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=lxy蝶, 服务器=10.29.183.159:9999
2025-05-17 21:20:29.213 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-17 21:20:29.214 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 21:20:29.215 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.29.183.159:9999
2025-05-17 21:20:29.215 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:6946
2025-05-17 21:20:29.218 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-17 21:20:29.218 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 21:20:29.218 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=lxy蝶
2025-05-17 21:20:29.221 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 21:20:29.223 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='6fa762fc-7725-4d08-8e2f-f51af5f04b17', type=LOGIN, sender=null, timestamp=1747488029220}
2025-05-17 21:20:29.226 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: lxy蝶
2025-05-17 21:20:29.227 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@6f61fd98
2025-05-17 21:20:29.228 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 21:20:29.230 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 21:20:29.231 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 21:20:29.233 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 21:20:29.233 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-17 21:20:29.233 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 1 个用户对象
2025-05-17 21:20:29.233 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: lxy蝶
2025-05-17 21:20:29.233 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-17 21:20:29.234 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:20:29.234 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 21:20:29.235 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:20:29.235 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-17 21:20:29.236 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:20:29.236 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 21:20:29.236 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 21:20:29.316 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 21:20:29.317 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:20:29.317 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:20:29.317 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='5784c027-50bb-4a6f-a036-50258e036f43', requestId='f79c1ab3-3002-4aba-a3ea-74c65ef8e0e5', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747488029317}
2025-05-17 21:20:29.320 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:20:29.366 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-17 21:20:29.367 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-17 21:20:39.236 [Thread-3] WARN  com.chatroom.client.ui.LoginFrame - 登录响应超时
2025-05-17 21:20:43.155 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=lxy打碟, 服务器=10.29.183.159:9999
2025-05-17 21:20:43.159 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-17 21:20:43.160 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 21:20:43.160 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.29.183.159:9999
2025-05-17 21:20:43.160 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:6962
2025-05-17 21:20:43.161 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-17 21:20:43.161 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 21:20:43.162 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=lxy打碟
2025-05-17 21:20:43.164 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 21:20:43.164 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='f6182724-82b6-46ce-be3c-b7af00f8e952', type=LOGIN, sender=null, timestamp=1747488043163}
2025-05-17 21:20:43.164 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: lxy打碟
2025-05-17 21:20:43.164 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@ece3295
2025-05-17 21:20:43.165 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 21:20:43.166 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 21:20:43.167 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 21:20:43.167 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=lxy打碟 已加入聊天室
2025-05-17 21:20:43.170 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 21:20:43.170 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-17 21:20:43.170 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 1 个用户对象
2025-05-17 21:20:43.170 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: lxy打碟
2025-05-17 21:20:43.170 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-17 21:20:43.171 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:20:43.171 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 21:20:43.171 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:20:43.171 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-17 21:20:43.172 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:20:43.172 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 21:20:43.172 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 21:20:43.261 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 21:20:43.262 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:20:43.262 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:20:43.262 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='90d25ab0-294f-41fd-9b53-5cb65dd28cbc', requestId='51b1e092-5f40-4ba1-a608-d48fa11d9b22', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747488043262}
2025-05-17 21:20:43.266 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:20:43.315 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 21:20:43.315 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 21:20:46.833 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 21:20:46.834 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:20:46.834 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:20:46.834 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='a9e76593-e279-4339-bf9c-5269361cc974', requestId='8aefe9e9-0c76-48db-afee-648d81484e19', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747488046834}
2025-05-17 21:20:46.834 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 21:20:46.834 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:20:46.835 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 21:20:47.879 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 lxy打碟 的聊天窗口
2025-05-17 21:20:47.886 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 lxy打碟 的新聊天窗口
2025-05-17 21:20:53.174 [Thread-3] WARN  com.chatroom.client.ui.LoginFrame - 登录响应超时
2025-05-17 21:20:53.745 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=lxy蝶, 接收者=937f478b-afb7-4e98-88ec-449cd0e93e98, 内容=你好
2025-05-17 21:20:53.745 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=lxy蝶, 接收者=937f478b-afb7-4e98-88ec-449cd0e93e98, 内容=你好
2025-05-17 21:20:53.746 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 937f478b-afb7-4e98-88ec-449cd0e93e98
2025-05-17 21:20:53.746 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-17 21:20:53.747 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 21:20:53.747 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 21:20:53.746 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=lxy蝶, 接收者=937f478b-afb7-4e98-88ec-449cd0e93e98, 内容=你好
2025-05-17 21:20:53.747 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 lxy蝶 的聊天窗口
2025-05-17 21:20:53.756 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 lxy蝶 的新聊天窗口
2025-05-17 21:21:03.207 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=lxy打碟, 接收者=6193a669-1c05-435e-9883-904e33a26345, 内容=hello
2025-05-17 21:21:03.207 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=lxy打碟, 接收者=6193a669-1c05-435e-9883-904e33a26345, 内容=hello
2025-05-17 21:21:03.207 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 6193a669-1c05-435e-9883-904e33a26345
2025-05-17 21:21:03.207 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-17 21:21:03.207 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=lxy打碟, 接收者=6193a669-1c05-435e-9883-904e33a26345, 内容=hello
2025-05-17 21:21:03.207 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 21:21:03.207 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 21:21:42.780 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 21:21:42.780 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=lxy打碟 已离开聊天室
2025-05-17 21:21:42.780 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 21:21:42.787 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:308)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:185)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:111)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:76)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-17 21:21:42.788 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 21:21:42.789 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 21:21:44.540 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 21:21:44.541 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 21:21:44.541 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:308)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:185)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:111)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:76)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-17 21:21:44.541 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 21:21:44.542 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 21:25:49.153 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-17 21:25:50.505 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-17 21:26:06.625 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=lxy的碟, 服务器=10.29.183.159:9999
2025-05-17 21:26:06.627 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-17 21:26:06.628 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 21:26:06.628 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.29.183.159:9999
2025-05-17 21:26:06.629 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:10953
2025-05-17 21:26:06.630 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-17 21:26:06.630 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 21:26:06.630 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=lxy的碟
2025-05-17 21:26:06.632 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 21:26:06.632 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='92440b62-8fc1-4ac7-8f67-4a782b7561d2', type=LOGIN, sender=null, timestamp=1747488366632}
2025-05-17 21:26:06.633 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: lxy的碟
2025-05-17 21:26:06.633 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@329164c3
2025-05-17 21:26:06.633 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 21:26:06.634 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 21:26:06.635 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 21:26:06.638 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 21:26:06.638 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-17 21:26:06.639 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 1 个用户对象
2025-05-17 21:26:06.639 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: lxy的碟
2025-05-17 21:26:06.639 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-17 21:26:06.639 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:26:06.639 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 21:26:06.639 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:26:06.639 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-17 21:26:06.639 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:26:06.640 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 21:26:06.640 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 21:26:06.742 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 21:26:06.743 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:26:06.743 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:26:06.743 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='b7b5a5c9-c9d9-4c55-957c-8707081832c2', requestId='769e8a3c-0d34-4b48-86ad-41421477545f', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747488366743}
2025-05-17 21:26:06.746 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:26:06.812 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-17 21:26:06.813 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-17 21:26:16.643 [Thread-3] WARN  com.chatroom.client.ui.LoginFrame - 登录响应超时
2025-05-17 21:26:19.443 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=lxy打碟, 服务器=10.29.183.159:9999
2025-05-17 21:26:19.446 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-17 21:26:19.447 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 21:26:19.447 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.29.183.159:9999
2025-05-17 21:26:19.448 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:10982
2025-05-17 21:26:19.449 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-17 21:26:19.449 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 21:26:19.450 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=lxy打碟
2025-05-17 21:26:19.452 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 21:26:19.452 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='c9650414-190c-4ae9-a141-8f35672d0d1a', type=LOGIN, sender=null, timestamp=1747488379451}
2025-05-17 21:26:19.452 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: lxy打碟
2025-05-17 21:26:19.452 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@bdfda95
2025-05-17 21:26:19.452 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 21:26:19.453 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 21:26:19.453 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=lxy打碟 已加入聊天室
2025-05-17 21:26:19.454 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 21:26:19.457 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 21:26:19.457 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-17 21:26:19.457 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 1 个用户对象
2025-05-17 21:26:19.457 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: lxy打碟
2025-05-17 21:26:19.457 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-17 21:26:19.458 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:26:19.458 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 21:26:19.458 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:26:19.458 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-17 21:26:19.459 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:26:19.459 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 21:26:19.459 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 21:26:19.596 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 21:26:19.597 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:26:19.598 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:26:19.598 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='7cfcc075-167d-4adb-b07d-0456b37e8015', requestId='53dcc175-3a2d-4a70-9681-4e7ffa02a232', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747488379597}
2025-05-17 21:26:19.601 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:26:19.675 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 21:26:19.676 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 21:26:22.437 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 lxy的碟 的聊天窗口
2025-05-17 21:26:22.446 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 lxy的碟 的新聊天窗口
2025-05-17 21:26:24.766 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 21:26:24.767 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:26:24.767 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:26:24.767 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='06d5a18d-c00a-4f68-bac8-7101a22e3c78', requestId='a389523f-890a-40c4-b295-aaa4c704ca3f', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747488384767}
2025-05-17 21:26:24.767 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:26:24.767 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 21:26:24.768 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 21:26:25.564 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 lxy打碟 的聊天窗口
2025-05-17 21:26:25.570 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 lxy打碟 的新聊天窗口
2025-05-17 21:26:29.455 [Thread-3] WARN  com.chatroom.client.ui.LoginFrame - 登录响应超时
2025-05-17 21:26:33.478 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=lxy的碟, 接收者=868caa87-5fa6-46c5-920b-6c2108aa5457, 内容=我是你碟
2025-05-17 21:26:33.478 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=lxy的碟, 接收者=868caa87-5fa6-46c5-920b-6c2108aa5457, 内容=我是你碟
2025-05-17 21:26:33.478 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 868caa87-5fa6-46c5-920b-6c2108aa5457
2025-05-17 21:26:33.479 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-17 21:26:33.479 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 21:26:33.479 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 21:26:33.479 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=lxy的碟, 接收者=868caa87-5fa6-46c5-920b-6c2108aa5457, 内容=我是你碟
2025-05-17 21:26:42.230 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=lxy打碟, 接收者=7d4d294d-24d8-402c-b324-1a39a43ccd34, 内容=我是你碟
2025-05-17 21:26:42.230 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=lxy打碟, 接收者=7d4d294d-24d8-402c-b324-1a39a43ccd34, 内容=我是你碟
2025-05-17 21:26:42.231 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 7d4d294d-24d8-402c-b324-1a39a43ccd34
2025-05-17 21:26:42.231 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=lxy打碟, 接收者=7d4d294d-24d8-402c-b324-1a39a43ccd34, 内容=我是你碟
2025-05-17 21:26:42.231 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-17 21:26:42.231 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 21:26:42.231 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 21:31:29.469 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 21:31:29.470 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=lxy的碟 已离开聊天室
2025-05-17 21:31:29.470 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 21:31:29.470 [pool-1-thread-3] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:308)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:185)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:111)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:76)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-17 21:31:29.471 [pool-1-thread-3] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 21:31:29.471 [pool-1-thread-3] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 21:31:32.550 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 21:31:32.550 [pool-1-thread-4] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:308)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:185)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:111)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:76)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-17 21:31:32.551 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 21:31:32.551 [pool-1-thread-4] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 21:31:32.551 [pool-1-thread-4] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 21:31:40.027 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-17 21:31:41.449 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-17 21:31:42.096 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-17 21:31:42.099 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-17 21:31:42.100 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 21:31:42.101 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.29.183.159:9999
2025-05-17 21:31:42.101 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:14456
2025-05-17 21:31:42.102 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-17 21:31:42.102 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 21:31:42.102 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=1
2025-05-17 21:31:42.105 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 21:31:42.105 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='a31b4aae-89d1-44bf-a7cf-8b2231aa7078', type=LOGIN, sender=null, timestamp=1747488702104}
2025-05-17 21:31:42.105 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1
2025-05-17 21:31:42.105 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@7909c65e
2025-05-17 21:31:42.105 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 21:31:42.106 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 21:31:42.106 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 21:31:42.110 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 21:31:42.110 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-17 21:31:42.110 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 1 个用户对象
2025-05-17 21:31:42.110 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 1
2025-05-17 21:31:42.111 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-17 21:31:42.111 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:31:42.111 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 21:31:42.112 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:31:42.112 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-17 21:31:42.112 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:31:42.112 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 21:31:42.112 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 21:31:42.223 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 21:31:42.224 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:31:42.224 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:31:42.225 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='93902f74-9656-4431-8022-3fd9072345d1', requestId='c73032af-f473-43a2-acbf-0fb7ad4c2f6e', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747488702224}
2025-05-17 21:31:42.229 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:31:42.317 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-17 21:31:42.318 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-17 21:31:45.448 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-17 21:31:45.450 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-17 21:31:45.451 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 21:31:45.451 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.29.183.159:9999
2025-05-17 21:31:45.452 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:14462
2025-05-17 21:31:45.453 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-17 21:31:45.453 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 21:31:45.453 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=2
2025-05-17 21:31:45.455 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 21:31:45.455 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='e440857d-f521-4dea-ab0c-4b8011eb3075', type=LOGIN, sender=null, timestamp=1747488705454}
2025-05-17 21:31:45.455 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2
2025-05-17 21:31:45.455 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@e7e4722
2025-05-17 21:31:45.455 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 21:31:45.456 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 21:31:45.456 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=2 已加入聊天室, 是否群消息=false
2025-05-17 21:31:45.456 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 21:31:45.459 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 21:31:45.459 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-17 21:31:45.460 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 1 个用户对象
2025-05-17 21:31:45.460 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 2
2025-05-17 21:31:45.460 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-17 21:31:45.460 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:31:45.461 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 21:31:45.461 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:31:45.461 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:31:45.462 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:31:45.462 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:31:45.462 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:31:45.462 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-17 21:31:45.558 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 21:31:45.559 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:31:45.559 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:31:45.559 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='2430c93f-3714-496b-b69c-4a83cdc8d531', requestId='57f95796-3651-46aa-8974-c1a67627561a', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747488705559}
2025-05-17 21:31:45.562 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:31:45.621 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 21:31:45.622 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 21:31:48.896 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 21:31:48.897 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:31:48.897 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:31:48.897 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='dbc7c21c-082d-42af-9591-7362e67b3321', requestId='c961b2a0-3b29-4ad8-8224-2661e3e729d4', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747488708897}
2025-05-17 21:31:48.897 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:31:48.898 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 21:31:48.898 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 21:31:50.919 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 2 的聊天窗口
2025-05-17 21:31:50.924 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 2 的新聊天窗口
2025-05-17 21:31:52.108 [Thread-3] WARN  com.chatroom.client.ui.LoginFrame - 登录响应超时
2025-05-17 21:31:52.243 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-17 21:31:52.251 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 1 的新聊天窗口
2025-05-17 21:31:54.404 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 21:31:54.405 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:31:54.405 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:31:54.405 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='a050a373-8e71-4991-a2a5-90751dabdcd2', requestId='14d88552-6006-4233-bed0-3b4d1936d157', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747488714404}
2025-05-17 21:31:54.405 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:31:54.405 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 21:31:54.406 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 21:31:55.459 [Thread-3] WARN  com.chatroom.client.ui.LoginFrame - 登录响应超时
2025-05-17 21:33:49.014 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 2 的聊天窗口
2025-05-17 21:33:55.550 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 21:33:55.551 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 21:33:55.551 [pool-1-thread-4] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:308)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:185)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:111)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:76)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-17 21:33:55.551 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=1 已离开聊天室, 是否群消息=false
2025-05-17 21:33:55.552 [pool-1-thread-4] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 21:33:55.552 [pool-1-thread-4] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 21:33:55.553 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-17 21:33:57.479 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=3, 服务器=10.29.183.159:9999
2025-05-17 21:33:57.480 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-17 21:33:57.481 [Thread-4] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 21:33:57.481 [Thread-4] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.29.183.159:9999
2025-05-17 21:33:57.482 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:12282
2025-05-17 21:33:57.482 [Thread-4] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-17 21:33:57.482 [Thread-4] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 21:33:57.482 [Thread-4] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=3
2025-05-17 21:33:57.483 [Thread-4] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 21:33:57.483 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='89af6dcb-8883-4a88-80de-686b2a051056', type=LOGIN, sender=null, timestamp=1747488837482}
2025-05-17 21:33:57.483 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 3
2025-05-17 21:33:57.483 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@382c3ad1
2025-05-17 21:33:57.483 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 21:33:57.484 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 21:33:57.484 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=3 已加入聊天室, 是否群消息=false
2025-05-17 21:33:57.484 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 21:33:57.484 [pool-3-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 21:33:57.485 [pool-3-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-17 21:33:57.485 [pool-3-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 1 个用户对象
2025-05-17 21:33:57.485 [pool-3-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 3
2025-05-17 21:33:57.485 [pool-3-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-17 21:33:57.485 [pool-3-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:33:57.485 [pool-3-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 21:33:57.485 [pool-3-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:33:57.485 [pool-3-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:33:57.485 [pool-3-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:33:57.486 [pool-3-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:33:57.486 [pool-3-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:33:57.489 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-17 21:33:57.540 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 21:33:57.541 [pool-3-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:33:57.541 [pool-3-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:33:57.541 [pool-3-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='b7fd0e6a-1403-45c5-a98e-fbfed7b60b2e', requestId='7133310f-ca8d-4a3c-a42b-7662a24b7bdc', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747488837541}
2025-05-17 21:33:57.541 [pool-3-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:33:57.606 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 21:33:57.606 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 21:33:59.586 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 2 的聊天窗口
2025-05-17 21:33:59.590 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 2 的新聊天窗口
2025-05-17 21:34:07.496 [Thread-5] WARN  com.chatroom.client.ui.LoginFrame - 登录响应超时
2025-05-17 21:34:07.615 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 21:34:07.615 [pool-3-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 21:34:07.615 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=3 已离开聊天室, 是否群消息=false
2025-05-17 21:34:07.616 [pool-1-thread-4] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:308)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:185)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:111)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:76)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-17 21:34:07.616 [pool-1-thread-4] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 21:34:07.616 [pool-1-thread-4] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 21:34:30.700 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 客户端断开连接: /10.29.183.159:14462
2025-05-17 21:34:30.700 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 客户端连接已关闭: /10.29.183.159:14462
2025-05-17 21:34:42.291 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-17 21:34:44.718 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-17 21:34:44.721 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 配置已保存: 绑定地址=10.29.183.159, 端口=9999, 自动选择端口=true
2025-05-17 21:34:44.723 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 正在启动服务器...
2025-05-17 21:34:44.726 [Thread-2] INFO  com.chatroom.server.ChatServer - 已创建公共聊天室: 公共聊天室
2025-05-17 21:34:44.726 [Thread-2] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-17 21:34:44.726 [Thread-2] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-17 21:34:50.329 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-17 21:34:51.700 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-17 21:34:53.615 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-17 21:34:53.617 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-17 21:34:53.618 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 21:34:53.619 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.29.183.159:9999
2025-05-17 21:34:53.619 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:12370
2025-05-17 21:34:53.620 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-17 21:34:53.621 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 21:34:53.621 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=2
2025-05-17 21:34:53.624 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 21:34:53.625 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='bc8225e7-9332-4dcd-b760-e8c7453106e3', type=LOGIN, sender=null, timestamp=1747488893623}
2025-05-17 21:34:53.628 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2
2025-05-17 21:34:53.629 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@45ae383e
2025-05-17 21:34:53.629 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 21:34:53.631 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 2 已自动加入公共聊天室
2025-05-17 21:34:53.632 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 21:34:53.635 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 21:34:53.636 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 21:34:53.636 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-17 21:34:53.636 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 2 个用户对象
2025-05-17 21:34:53.636 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 2
2025-05-17 21:34:53.636 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-17 21:34:53.637 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:34:53.637 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 21:34:53.638 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:34:53.638 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-17 21:34:53.638 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-17 21:34:53.639 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:34:53.639 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 21:34:53.639 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 21:34:53.724 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 21:34:53.725 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-17 21:34:53.725 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:34:53.725 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:34:53.725 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='e879481f-a7e9-4ed0-b1f9-b1656744b9ed', requestId='c5e46e96-c2c6-44ad-ab2c-3d9b8d0f1b7b', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747488893725}
2025-05-17 21:34:53.729 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:34:53.781 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-17 21:34:53.783 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-17 21:34:56.327 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-17 21:34:56.329 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-17 21:34:56.330 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 21:34:56.330 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.29.183.159:9999
2025-05-17 21:34:56.331 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:12378
2025-05-17 21:34:56.332 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-17 21:34:56.332 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 21:34:56.332 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=1
2025-05-17 21:34:56.334 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 21:34:56.335 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='4bf2416e-3719-435d-bcbc-d680f99d1e61', type=LOGIN, sender=null, timestamp=1747488896334}
2025-05-17 21:34:56.335 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1
2025-05-17 21:34:56.335 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@45119232
2025-05-17 21:34:56.335 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 21:34:56.337 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 1 已自动加入公共聊天室
2025-05-17 21:34:56.337 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=public_chat_room, 内容=欢迎 1 加入公共聊天室！, 是否群消息=true
2025-05-17 21:34:56.338 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 21:34:56.338 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=1 已加入聊天室, 是否群消息=false
2025-05-17 21:34:56.338 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 21:34:56.341 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 21:34:56.341 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-17 21:34:56.341 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 2 个用户对象
2025-05-17 21:34:56.341 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 1
2025-05-17 21:34:56.341 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-17 21:34:56.341 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:34:56.342 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 21:34:56.342 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:34:56.342 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-17 21:34:56.342 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-17 21:34:56.342 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:34:56.342 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 21:34:56.342 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 21:34:56.426 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 21:34:56.427 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-17 21:34:56.427 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:34:56.427 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:34:56.427 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='a2cab798-2760-48ff-8b1e-1083dbff15ff', requestId='8c32e84e-517b-4705-8db9-80f1b2245e09', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747488896427}
2025-05-17 21:34:56.437 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:34:56.507 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 21:34:56.508 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 21:35:03.633 [Thread-3] WARN  com.chatroom.client.ui.LoginFrame - 登录响应超时
2025-05-17 21:35:04.947 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public_chat_room, 内容=你好, 是否群消息=true
2025-05-17 21:35:04.948 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=public_chat_room, 内容=你好
2025-05-17 21:35:04.948 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 发送群组消息: groupId=public_chat_room
2025-05-17 21:35:04.949 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-17 21:35:04.949 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public_chat_room, 内容=你好, 是否群消息=true
2025-05-17 21:35:04.949 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 21:35:04.949 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 21:35:06.337 [Thread-3] WARN  com.chatroom.client.ui.LoginFrame - 登录响应超时
2025-05-17 21:35:11.788 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public_chat_room, 内容=你好, 是否群消息=true
2025-05-17 21:35:11.788 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=1, 接收者=public_chat_room, 内容=你好
2025-05-17 21:35:11.788 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 发送群组消息: groupId=public_chat_room
2025-05-17 21:35:11.789 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public_chat_room, 内容=你好, 是否群消息=true
2025-05-17 21:35:11.789 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-17 21:35:11.789 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 21:35:11.789 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 21:35:20.803 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 21:35:20.803 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=2 已离开聊天室, 是否群消息=false
2025-05-17 21:35:20.804 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 21:35:20.805 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:308)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:185)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:111)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:76)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-17 21:35:20.807 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 21:35:20.807 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 21:35:22.656 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 21:35:22.657 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 21:35:22.657 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:308)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:185)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:111)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:76)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-17 21:35:22.657 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 21:35:22.657 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 21:54:11.208 [main] INFO  c.chatroom.server.ChatServerLauncher - 使用图形界面启动服务器
2025-05-17 21:54:11.530 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-17 21:54:12.534 [main] INFO  c.chatroom.server.ChatServerLauncher - 使用图形界面启动服务器
2025-05-17 21:54:12.851 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-17 21:54:26.706 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-17 21:54:26.710 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 配置已保存: 绑定地址=10.29.183.159, 端口=9999, 自动选择端口=true
2025-05-17 21:54:26.713 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 正在启动服务器...
2025-05-17 21:54:26.716 [Thread-2] INFO  com.chatroom.server.ChatServer - 已创建公共聊天室: 公共聊天室
2025-05-17 21:54:26.717 [Thread-2] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-17 21:54:26.717 [Thread-2] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-17 21:54:32.710 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-17 21:54:34.068 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-17 21:54:35.261 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-17 21:54:35.262 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-17 21:54:35.264 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 21:54:35.264 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.29.183.159:9999
2025-05-17 21:54:35.265 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:4410
2025-05-17 21:54:35.266 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-17 21:54:35.267 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 21:54:35.267 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=1
2025-05-17 21:54:35.269 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 21:54:35.271 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='fdf72533-9730-46f4-af49-ee81da34faed', type=LOGIN, sender=null, timestamp=1747490075268}
2025-05-17 21:54:35.274 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1
2025-05-17 21:54:35.275 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@5ad84f26
2025-05-17 21:54:35.275 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 21:54:35.277 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已自动加入公共聊天室
2025-05-17 21:54:35.279 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 21:54:35.281 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 21:54:35.282 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 21:54:35.283 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-17 21:54:35.283 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 2 个用户对象
2025-05-17 21:54:35.283 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 1
2025-05-17 21:54:35.283 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-17 21:54:35.283 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:54:35.283 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 21:54:35.284 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:54:35.284 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-17 21:54:35.284 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-17 21:54:35.285 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:54:35.285 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 21:54:35.285 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 21:54:35.378 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 21:54:35.379 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-17 21:54:35.379 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:54:35.379 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:54:35.379 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='de25129f-9171-42c2-9708-f2b3e7278465', requestId='816ba86c-cb61-4aa0-a3e1-7fa4e0881677', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747490075379}
2025-05-17 21:54:35.382 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:54:35.434 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-17 21:54:35.435 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-17 21:54:39.655 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-17 21:54:39.657 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-17 21:54:39.659 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 21:54:39.659 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.29.183.159:9999
2025-05-17 21:54:39.659 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:4415
2025-05-17 21:54:39.660 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-17 21:54:39.661 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 21:54:39.661 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=2
2025-05-17 21:54:39.663 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 21:54:39.663 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='694b28c9-8d7f-4df0-aad0-8c1333b53874', type=LOGIN, sender=null, timestamp=1747490079662}
2025-05-17 21:54:39.663 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2
2025-05-17 21:54:39.663 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@5231d0c2
2025-05-17 21:54:39.664 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 21:54:39.665 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 2 已自动加入公共聊天室
2025-05-17 21:54:39.665 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=public_chat_room, 内容=欢迎 2 加入公共聊天室！, 是否群消息=true
2025-05-17 21:54:39.665 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=2 已加入聊天室, 是否群消息=false
2025-05-17 21:54:39.665 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 21:54:39.666 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 21:54:39.670 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 21:54:39.670 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-17 21:54:39.670 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 2 个用户对象
2025-05-17 21:54:39.671 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 2
2025-05-17 21:54:39.671 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-17 21:54:39.671 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:54:39.671 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 21:54:39.672 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:54:39.672 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-17 21:54:39.672 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-17 21:54:39.672 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:54:39.672 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 21:54:39.672 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 21:54:39.751 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 21:54:39.753 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-17 21:54:39.753 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 21:54:39.753 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 21:54:39.753 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='097a012c-85f5-40e8-9ab5-f36ffba3a935', requestId='816b24c0-8f13-4756-af3a-423ec812b094', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747490079753}
2025-05-17 21:54:39.757 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 21:54:39.872 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 21:54:39.874 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 21:54:45.271 [Thread-3] WARN  com.chatroom.client.ui.LoginFrame - 登录响应超时
2025-05-17 21:54:49.664 [Thread-3] WARN  com.chatroom.client.ui.LoginFrame - 登录响应超时
2025-05-17 21:55:25.072 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=public_chat_room, 内容=发送文件：屏幕截图 2023-10-12 225537.png
2025-05-17 21:55:25.073 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 发送群组消息: groupId=public_chat_room
2025-05-17 21:55:25.073 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public_chat_room, 内容=发送文件：屏幕截图 2023-10-12 225537.png, 是否群消息=true
2025-05-17 21:55:25.074 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public_chat_room, 内容=发送文件：屏幕截图 2023-10-12 225537.png, 是否群消息=true
2025-05-17 21:55:25.075 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-17 21:55:25.076 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 21:55:25.076 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 21:55:30.862 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-17 21:55:30.867 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 1 的新聊天窗口
2025-05-17 21:56:49.680 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 21:56:49.681 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 21:56:49.681 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=1 已离开聊天室, 是否群消息=false
2025-05-17 21:56:49.683 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:308)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:185)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:111)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:76)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-17 21:56:49.685 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 21:56:49.685 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 21:56:51.324 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 21:56:51.324 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:308)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:185)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:111)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:76)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-17 21:56:51.325 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 21:56:51.325 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 21:56:51.325 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 22:02:56.943 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-17 22:03:01.107 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-17 22:03:01.109 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 配置已保存: 绑定地址=10.29.183.159, 端口=9999, 自动选择端口=true
2025-05-17 22:03:01.111 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 正在启动服务器...
2025-05-17 22:03:01.114 [Thread-2] INFO  com.chatroom.server.ChatServer - 已创建公共聊天室: 公共聊天室
2025-05-17 22:03:01.114 [Thread-2] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-17 22:03:01.114 [Thread-2] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-17 22:03:06.166 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-17 22:03:07.504 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-17 22:03:09.934 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-17 22:03:09.935 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-17 22:03:09.937 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 22:03:09.937 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.29.183.159:9999
2025-05-17 22:03:09.937 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:10052
2025-05-17 22:03:09.939 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-17 22:03:09.939 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 22:03:09.939 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=1
2025-05-17 22:03:09.941 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 22:03:09.943 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='44ee807c-9b52-439e-9602-24f07f8b7fc1', type=LOGIN, sender=null, timestamp=1747490589940}
2025-05-17 22:03:09.947 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1
2025-05-17 22:03:09.947 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@6eba2e66
2025-05-17 22:03:09.947 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 22:03:09.949 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已自动加入公共聊天室
2025-05-17 22:03:09.951 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 22:03:09.954 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 22:03:09.954 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 22:03:09.955 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-17 22:03:09.955 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 2 个用户对象
2025-05-17 22:03:09.955 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 1
2025-05-17 22:03:09.955 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-17 22:03:09.955 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 22:03:09.955 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 22:03:09.956 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 22:03:09.956 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-17 22:03:09.956 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-17 22:03:09.957 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:03:09.957 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 22:03:09.957 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 22:03:10.023 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 22:03:10.023 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-17 22:03:10.024 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:03:10.024 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 22:03:10.024 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='2febe328-bbfc-49d2-ae36-8a541cccfdc8', requestId='7ffe69b5-56b3-470f-b040-947d0b3ca732', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747490590023}
2025-05-17 22:03:10.027 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 22:03:10.082 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-17 22:03:10.084 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-17 22:03:12.647 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-17 22:03:12.649 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-17 22:03:12.650 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 22:03:12.651 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.29.183.159:9999
2025-05-17 22:03:12.651 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:10054
2025-05-17 22:03:12.652 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-17 22:03:12.652 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 22:03:12.652 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=2
2025-05-17 22:03:12.655 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 22:03:12.655 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='a1e0b312-4024-48e7-9616-d4d92365190b', type=LOGIN, sender=null, timestamp=1747490592654}
2025-05-17 22:03:12.655 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2
2025-05-17 22:03:12.655 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@26f43be2
2025-05-17 22:03:12.656 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 22:03:12.656 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 2 已自动加入公共聊天室
2025-05-17 22:03:12.657 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=public_chat_room, 内容=欢迎 2 加入公共聊天室！, 是否群消息=true
2025-05-17 22:03:12.658 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 22:03:12.659 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=2 已加入聊天室, 是否群消息=false
2025-05-17 22:03:12.659 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 22:03:12.662 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 22:03:12.662 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-17 22:03:12.662 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 2 个用户对象
2025-05-17 22:03:12.662 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 2
2025-05-17 22:03:12.662 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-17 22:03:12.662 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 22:03:12.662 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 22:03:12.663 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-17 22:03:12.663 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 22:03:12.663 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-17 22:03:12.663 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:03:12.663 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 22:03:12.663 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 22:03:12.730 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 22:03:12.731 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-17 22:03:12.731 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:03:12.731 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 22:03:12.731 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='cc987047-38c8-4f29-bf99-66caa5c96678', requestId='0ae3d826-d112-47dd-a47a-0f67a22c43c1', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747490592731}
2025-05-17 22:03:12.740 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 22:03:12.816 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 22:03:12.817 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 22:03:19.948 [Thread-3] WARN  com.chatroom.client.ui.LoginFrame - 登录响应超时
2025-05-17 22:03:22.666 [Thread-3] WARN  com.chatroom.client.ui.LoginFrame - 登录响应超时
2025-05-17 22:03:26.852 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=public_chat_room, 内容=发送图片：屏幕截图 2024-05-11 174116.png
2025-05-17 22:03:26.852 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public_chat_room, 内容=发送图片：屏幕截图 2024-05-11 174116.png, 是否群消息=true
2025-05-17 22:03:26.853 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 发送群组消息: groupId=public_chat_room
2025-05-17 22:03:26.854 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public_chat_room, 内容=发送图片：屏幕截图 2024-05-11 174116.png, 是否群消息=true
2025-05-17 22:03:26.855 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-17 22:03:26.855 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 22:03:26.855 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 22:03:33.003 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 22:03:33.003 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=1 已离开聊天室, 是否群消息=false
2025-05-17 22:03:33.004 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 22:03:33.005 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:308)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:185)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:111)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:76)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-17 22:03:33.007 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 22:03:33.007 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 22:03:34.400 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 22:03:34.400 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 22:03:34.400 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:308)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:185)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:111)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:76)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-17 22:03:34.401 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 22:03:34.401 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 22:08:52.810 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-17 22:08:55.124 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-17 22:08:55.127 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 配置已保存: 绑定地址=10.29.183.159, 端口=9999, 自动选择端口=true
2025-05-17 22:08:55.135 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 正在启动服务器...
2025-05-17 22:08:55.138 [Thread-2] INFO  com.chatroom.server.ChatServer - 已创建公共聊天室: 公共聊天室
2025-05-17 22:08:55.139 [Thread-2] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-17 22:08:55.139 [Thread-2] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-17 22:10:27.852 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-17 22:10:29.124 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-17 22:10:46.491 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-17 22:10:46.493 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-17 22:10:46.495 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 22:10:46.495 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.29.183.159:9999
2025-05-17 22:10:46.495 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:3481
2025-05-17 22:10:46.497 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-17 22:10:46.497 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 22:10:46.497 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=1
2025-05-17 22:10:46.499 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 22:10:46.501 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='84d5ef77-4cb7-4cee-ac39-eb2a050403bd', type=LOGIN, sender=null, timestamp=1747491046498}
2025-05-17 22:10:46.504 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1
2025-05-17 22:10:46.505 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@6c388d70
2025-05-17 22:10:46.505 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 22:10:46.507 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已自动加入公共聊天室
2025-05-17 22:10:46.508 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: 用户上线: 1
2025-05-17 22:10:46.509 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 22:10:46.511 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 22:10:46.512 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 22:10:46.513 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-17 22:10:46.513 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 2 个用户对象
2025-05-17 22:10:46.513 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 1
2025-05-17 22:10:46.513 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-17 22:10:46.513 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 22:10:46.514 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 22:10:46.514 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 22:10:46.514 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-17 22:10:46.514 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-17 22:10:46.515 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:10:46.516 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 22:10:46.516 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 22:10:46.610 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 22:10:46.611 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-17 22:10:46.611 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 22:10:46.611 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:10:46.611 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 22:10:46.611 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-17 22:10:46.611 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='f6c20351-194e-4b27-8651-c735791b1e5a', requestId='0a5e7b57-213a-42c9-ae10-1f8a2026816d', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747491046611}
2025-05-17 22:10:46.615 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='f6c20351-194e-4b27-8651-c735791b1e5a', requestId='0a5e7b57-213a-42c9-ae10-1f8a2026816d', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747491046611}
2025-05-17 22:10:46.615 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 2 个响应监听器
2025-05-17 22:10:46.615 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:10:46.615 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 22:10:46.615 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 22:10:46.691 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-17 22:10:46.693 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-17 22:10:46.693 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-17 22:10:46.693 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-17 22:10:48.629 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-17 22:10:48.631 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-17 22:10:48.632 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 22:10:48.633 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.29.183.159:9999
2025-05-17 22:10:48.633 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:3485
2025-05-17 22:10:48.634 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-17 22:10:48.634 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 22:10:48.634 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=2
2025-05-17 22:10:48.635 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 22:10:48.635 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='413b91e8-bbc4-4558-bf95-2a29b4c73428', type=LOGIN, sender=null, timestamp=1747491048635}
2025-05-17 22:10:48.635 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2
2025-05-17 22:10:48.637 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@15d9e1af
2025-05-17 22:10:48.637 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 22:10:48.637 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 2 已自动加入公共聊天室
2025-05-17 22:10:48.637 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=public_chat_room, 内容=欢迎 2 加入公共聊天室！, 是否群消息=true
2025-05-17 22:10:48.638 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: 用户上线: 2
2025-05-17 22:10:48.638 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=2 已加入聊天室, 是否群消息=false
2025-05-17 22:10:48.638 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 22:10:48.638 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=用户上线: 2, 是否群消息=false
2025-05-17 22:10:48.638 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到用户状态变更: 用户上线: 2, 刷新用户列表
2025-05-17 22:10:48.638 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 22:10:48.639 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-17 22:10:48.643 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 22:10:48.643 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-17 22:10:48.643 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 2 个用户对象
2025-05-17 22:10:48.643 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 2
2025-05-17 22:10:48.643 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-17 22:10:48.643 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 22:10:48.643 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 22:10:48.644 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 22:10:48.644 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-17 22:10:48.644 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-17 22:10:48.644 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:10:48.644 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 22:10:48.644 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 22:10:48.739 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 22:10:48.740 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-17 22:10:48.740 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 22:10:48.740 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:10:48.740 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 2 个响应监听器
2025-05-17 22:10:48.741 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-17 22:10:48.741 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='0a735150-7e84-4d6c-8b37-e1375be36d8a', requestId='c8a519b2-d97e-4d29-b269-eb3c428492da', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747491048740}
2025-05-17 22:10:48.744 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='0a735150-7e84-4d6c-8b37-e1375be36d8a', requestId='c8a519b2-d97e-4d29-b269-eb3c428492da', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747491048740}
2025-05-17 22:10:48.744 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 2 个响应监听器
2025-05-17 22:10:48.745 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:10:48.745 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 22:10:48.745 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 22:10:48.796 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 22:10:48.797 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 22:10:48.797 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 22:10:48.797 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 22:10:56.500 [Thread-3] WARN  com.chatroom.client.ui.LoginFrame - 登录响应超时
2025-05-17 22:10:58.650 [Thread-3] WARN  com.chatroom.client.ui.LoginFrame - 登录响应超时
2025-05-17 22:11:03.237 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 22:11:03.238 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:11:03.238 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 22:11:03.238 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='1488c183-b093-49b9-b32e-dddb8270d991', requestId='b1ce3e69-fbf3-4b97-b7da-3e0bb0907360', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747491063238}
2025-05-17 22:11:03.238 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 22:11:03.238 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 22:11:03.238 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 22:11:10.243 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 22:11:10.244 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: 用户离线: 1
2025-05-17 22:11:10.244 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 22:11:10.244 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-17 22:11:10.244 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=1 已离开聊天室, 是否群消息=false
2025-05-17 22:11:10.245 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=用户离线: 1, 是否群消息=false
2025-05-17 22:11:10.245 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到用户状态变更: 用户离线: 1, 刷新用户列表
2025-05-17 22:11:10.245 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-17 22:11:10.245 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 22:11:10.246 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:11:10.246 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 22:11:10.246 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='64df4e19-2c64-4929-b3e9-d84eaeb269ff', requestId='1e7001f7-9208-4ac9-901a-a82655e26347', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747491070246}
2025-05-17 22:11:10.246 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 22:11:10.246 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:358)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:187)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-17 22:11:10.247 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 22:11:10.247 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 22:11:10.311 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-17 22:11:10.311 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-17 22:11:11.989 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: 用户离线: 2
2025-05-17 22:11:11.989 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 22:11:11.990 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 2 已从群组 公共聊天室 中移除
2025-05-17 22:11:11.990 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 22:11:11.990 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:358)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:187)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-17 22:11:11.991 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 22:11:11.991 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 22:16:10.985 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-17 22:16:12.106 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-17 22:16:12.109 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 配置已保存: 绑定地址=10.29.183.159, 端口=9999, 自动选择端口=true
2025-05-17 22:16:12.113 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 正在启动服务器...
2025-05-17 22:16:12.116 [Thread-2] INFO  com.chatroom.server.ChatServer - 已创建公共聊天室: 公共聊天室
2025-05-17 22:16:12.117 [Thread-2] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-17 22:16:12.117 [Thread-2] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-17 22:16:20.261 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-17 22:16:21.577 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-17 22:16:22.715 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=, 服务器=10.29.183.159:9999
2025-05-17 22:16:24.491 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-17 22:16:24.492 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-17 22:16:24.494 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 22:16:24.495 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.29.183.159:9999
2025-05-17 22:16:24.495 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:2004
2025-05-17 22:16:24.497 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-17 22:16:24.497 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 22:16:24.497 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=1
2025-05-17 22:16:24.499 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 22:16:24.502 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='315cf30c-9b5e-49b8-9aa1-e139eba55f65', type=LOGIN, sender=null, timestamp=1747491384498}
2025-05-17 22:16:24.505 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1
2025-05-17 22:16:24.505 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@157fda10
2025-05-17 22:16:24.505 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 22:16:24.507 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已自动加入公共聊天室
2025-05-17 22:16:24.508 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户上线: 1
2025-05-17 22:16:24.509 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 22:16:24.512 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 22:16:24.513 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 22:16:24.513 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-17 22:16:24.513 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 2 个用户对象
2025-05-17 22:16:24.513 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 1
2025-05-17 22:16:24.513 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-17 22:16:24.514 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 22:16:24.514 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 22:16:24.514 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 22:16:24.514 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-17 22:16:24.515 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-17 22:16:24.515 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:16:24.515 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 22:16:24.515 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 22:16:24.586 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 22:16:24.588 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-17 22:16:24.588 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 22:16:24.588 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:16:24.588 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 2 个响应监听器
2025-05-17 22:16:24.588 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-17 22:16:24.588 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='1686f34d-2cdf-4b12-98c5-9d0dd2c2930d', requestId='44440acb-e9d8-445c-ba82-65fd1d311b21', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747491384588}
2025-05-17 22:16:24.591 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='1686f34d-2cdf-4b12-98c5-9d0dd2c2930d', requestId='44440acb-e9d8-445c-ba82-65fd1d311b21', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747491384588}
2025-05-17 22:16:24.591 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 2 个响应监听器
2025-05-17 22:16:24.591 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:16:24.591 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 22:16:24.591 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 22:16:24.656 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-17 22:16:24.657 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-17 22:16:24.658 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-17 22:16:24.658 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-17 22:16:28.384 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-17 22:16:28.386 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-17 22:16:28.387 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 22:16:28.387 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.29.183.159:9999
2025-05-17 22:16:28.388 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:2008
2025-05-17 22:16:28.389 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-17 22:16:28.389 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 22:16:28.389 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=2
2025-05-17 22:16:28.391 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 22:16:28.391 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='04b5c76d-2233-4ee3-a578-71e75abf3b6c', type=LOGIN, sender=null, timestamp=1747491388390}
2025-05-17 22:16:28.392 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2
2025-05-17 22:16:28.392 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@12c8a42d
2025-05-17 22:16:28.392 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 22:16:28.393 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 2 已自动加入公共聊天室
2025-05-17 22:16:28.393 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户上线: 2
2025-05-17 22:16:28.393 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=public_chat_room, 内容=欢迎 2 加入公共聊天室！, 是否群消息=true
2025-05-17 22:16:28.394 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 22:16:28.394 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=2 已加入聊天室, 是否群消息=false
2025-05-17 22:16:28.395 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 22:16:28.395 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]用户上线: 2, 是否群消息=false
2025-05-17 22:16:28.395 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]用户上线: 2
2025-05-17 22:16:28.395 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 用户上线: 2, 立即刷新用户列表
2025-05-17 22:16:28.395 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-17 22:16:28.396 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 22:16:28.397 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:16:28.397 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 22:16:28.397 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='59ec64ee-3a46-4363-8f4a-1b4c07c12795', requestId='7b781113-f7ca-429a-b339-7b2376ea5853', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747491388397}
2025-05-17 22:16:28.397 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 22:16:28.397 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 22:16:28.398 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-17 22:16:28.398 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 2 个用户对象
2025-05-17 22:16:28.398 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 2
2025-05-17 22:16:28.398 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-17 22:16:28.398 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 22:16:28.398 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 22:16:28.399 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 22:16:28.399 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-17 22:16:28.399 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-17 22:16:28.399 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:16:28.399 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 22:16:28.399 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 22:16:28.466 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 22:16:28.466 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 22:16:28.501 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 22:16:28.502 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-17 22:16:28.502 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:16:28.502 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 22:16:28.502 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 22:16:28.502 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-17 22:16:28.502 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='45bb01d2-b7a4-4c01-986e-b44d35370329', requestId='b2836eea-7ba8-42f0-9a66-6c51fcd5e927', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747491388502}
2025-05-17 22:16:28.505 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 22:16:28.506 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:16:28.506 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 22:16:28.506 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='ddb84d58-8db3-46b7-9d18-9c5b689d916e', requestId='7121d0f3-7c0e-40ea-bae6-6b85c1ecabb6', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747491388503}
2025-05-17 22:16:28.506 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 22:16:28.562 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 22:16:28.563 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 22:16:28.563 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 22:16:28.564 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 22:16:33.189 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 22:16:33.190 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 22:16:33.190 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 1
2025-05-17 22:16:33.191 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-17 22:16:33.191 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=1 已离开聊天室, 是否群消息=false
2025-05-17 22:16:33.191 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]用户离线: 1, 是否群消息=false
2025-05-17 22:16:33.191 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]用户离线: 1
2025-05-17 22:16:33.191 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 用户离线: 1, 立即刷新用户列表
2025-05-17 22:16:33.191 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-17 22:16:33.192 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:358)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:187)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-17 22:16:33.194 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 22:16:33.194 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 22:16:33.271 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 22:16:33.271 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:16:33.271 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 22:16:33.272 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='7946c687-b653-483c-84d0-d57440a85cb4', requestId='3958dd30-e524-4890-8e78-8330cfea351a', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747491393271}
2025-05-17 22:16:33.272 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 22:16:33.276 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-17 22:16:33.276 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-17 22:16:37.181 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 2
2025-05-17 22:16:37.181 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 22:16:37.181 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 2 已从群组 公共聊天室 中移除
2025-05-17 22:16:37.182 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 22:16:37.182 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:358)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:187)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-17 22:16:37.182 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 22:16:37.182 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 22:21:04.968 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-17 22:21:06.558 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-17 22:21:08.059 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-17 22:21:09.001 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-17 22:21:09.004 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 配置已保存: 绑定地址=10.29.183.159, 端口=9999, 自动选择端口=true
2025-05-17 22:21:09.006 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 正在启动服务器...
2025-05-17 22:21:09.011 [Thread-2] INFO  com.chatroom.server.ChatServer - 已创建公共聊天室: 公共聊天室
2025-05-17 22:21:09.011 [Thread-2] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-17 22:21:09.012 [Thread-2] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-17 22:21:11.997 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-17 22:21:11.998 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-17 22:21:12.000 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 22:21:12.000 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.29.183.159:9999
2025-05-17 22:21:12.000 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:2607
2025-05-17 22:21:12.002 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-17 22:21:12.002 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 22:21:12.002 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=1
2025-05-17 22:21:12.004 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 22:21:12.006 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='712d3955-85b5-4d5d-b59a-ac8a58858937', type=LOGIN, sender=null, timestamp=1747491672003}
2025-05-17 22:21:12.010 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1
2025-05-17 22:21:12.010 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@1e0e4fd1
2025-05-17 22:21:12.010 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 22:21:12.013 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已自动加入公共聊天室
2025-05-17 22:21:12.014 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户上线: 1
2025-05-17 22:21:12.015 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 22:21:12.018 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 22:21:12.019 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 22:21:12.019 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-17 22:21:12.019 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 2 个用户对象
2025-05-17 22:21:12.019 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 1
2025-05-17 22:21:12.019 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-17 22:21:12.020 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 22:21:12.020 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 22:21:12.020 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 22:21:12.020 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-17 22:21:12.020 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-17 22:21:12.022 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:21:12.022 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 22:21:12.022 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 22:21:12.173 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 22:21:12.186 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-17 22:21:12.186 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:21:12.186 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 22:21:12.186 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 22:21:12.187 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-17 22:21:12.186 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='9fae92bd-1016-46a0-a95a-98269b7eea59', requestId='3fdddb7c-0c02-448d-a3e9-3e60fd665f3b', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747491672186}
2025-05-17 22:21:12.192 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 22:21:12.192 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:21:12.192 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 22:21:12.192 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='e7a97b0f-aa32-4e05-a972-3a5d0296bfd4', requestId='ebb2b906-d234-4064-95d0-5cf131be505f', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747491672187}
2025-05-17 22:21:12.193 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 22:21:12.304 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-17 22:21:12.305 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-17 22:21:12.306 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-17 22:21:12.306 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-17 22:21:17.397 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-17 22:21:17.398 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-17 22:21:17.400 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 创建客户端实例
2025-05-17 22:21:17.400 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 尝试连接到服务器 10.29.183.159:9999
2025-05-17 22:21:17.400 [Thread-2] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:2617
2025-05-17 22:21:17.402 [Thread-2] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-17 22:21:17.402 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 成功连接到服务器，注册响应监听器
2025-05-17 22:21:17.403 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 发送登录请求: 用户名=2
2025-05-17 22:21:17.405 [Thread-2] INFO  com.chatroom.client.ui.LoginFrame - 登录请求已发送，等待服务器响应
2025-05-17 22:21:17.405 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='2b993c6c-6ccc-4846-b523-973247215363', type=LOGIN, sender=null, timestamp=1747491677404}
2025-05-17 22:21:17.405 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2
2025-05-17 22:21:17.405 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@7a4a0591
2025-05-17 22:21:17.406 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 22:21:17.407 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=public_chat_room, 内容=欢迎 2 加入公共聊天室！, 是否群消息=true
2025-05-17 22:21:17.407 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 2 已自动加入公共聊天室
2025-05-17 22:21:17.408 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户上线: 2
2025-05-17 22:21:17.408 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=2 已加入聊天室, 是否群消息=false
2025-05-17 22:21:17.408 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]用户上线: 2, 是否群消息=false
2025-05-17 22:21:17.408 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 22:21:17.408 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]用户上线: 2
2025-05-17 22:21:17.408 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 用户上线: 2, 立即刷新用户列表
2025-05-17 22:21:17.409 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 22:21:17.409 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-17 22:21:17.409 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 22:21:17.411 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 22:21:17.412 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-17 22:21:17.412 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 2 个用户对象
2025-05-17 22:21:17.412 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 2
2025-05-17 22:21:17.412 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-17 22:21:17.412 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 22:21:17.412 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 22:21:17.412 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:21:17.412 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 22:21:17.413 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='b35b3ec6-1b71-4ef7-b721-7ea4584b351b', requestId='fc22c009-8828-435c-a75c-00771b6676ce', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747491677412}
2025-05-17 22:21:17.413 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 22:21:17.413 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 22:21:17.413 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-17 22:21:17.413 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-17 22:21:17.413 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:21:17.413 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 22:21:17.413 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 22:21:17.484 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 22:21:17.484 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 22:21:17.553 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 22:21:17.559 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:21:17.559 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-17 22:21:17.559 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 22:21:17.559 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 22:21:17.559 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-17 22:21:17.559 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='655ad065-5eea-4b93-b2a9-3cdfefa6e4b7', requestId='200f4ae9-6c8f-46eb-8c2e-47effd94da06', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747491677558}
2025-05-17 22:21:17.563 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 22:21:17.564 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:21:17.564 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 22:21:17.564 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='72b4b899-079f-4e24-b0a3-061c3bab32cb', requestId='175fc499-aa56-417d-9dee-e8e593b0811f', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747491677559}
2025-05-17 22:21:17.564 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 22:21:17.620 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 22:21:17.621 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 22:21:17.621 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-17 22:21:17.621 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-17 22:21:22.017 [Thread-3] WARN  com.chatroom.client.ui.LoginFrame - 登录响应超时
2025-05-17 22:21:25.858 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-17 22:21:25.866 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 1 的新聊天窗口
2025-05-17 22:21:27.411 [Thread-3] WARN  com.chatroom.client.ui.LoginFrame - 登录响应超时
2025-05-17 22:21:28.590 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 2 的聊天窗口
2025-05-17 22:21:28.596 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 2 的新聊天窗口
2025-05-17 22:21:36.819 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 22:21:36.819 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 2
2025-05-17 22:21:36.819 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=2 已离开聊天室, 是否群消息=false
2025-05-17 22:21:36.819 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 22:21:36.820 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 2 已从群组 公共聊天室 中移除
2025-05-17 22:21:36.820 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]用户离线: 2, 是否群消息=false
2025-05-17 22:21:36.820 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]用户离线: 2
2025-05-17 22:21:36.820 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 用户离线: 2, 立即刷新用户列表
2025-05-17 22:21:36.821 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-17 22:21:36.821 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 22:21:36.823 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:21:36.824 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 22:21:36.824 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='6a9083f5-3e5c-4287-8998-89ace5fc9d82', requestId='b6e90350-0620-468d-85fb-d868efee781f', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747491696823}
2025-05-17 22:21:36.824 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 22:21:36.822 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:358)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:187)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-17 22:21:36.824 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 22:21:36.824 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 22:21:36.852 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-17 22:21:36.852 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-17 22:21:41.671 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 1
2025-05-17 22:21:41.671 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 22:21:41.671 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-17 22:21:41.671 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 22:21:41.671 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:358)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:187)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-17 22:21:41.671 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 22:21:41.671 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 22:41:43.497 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-17 22:42:49.326 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-17 22:42:51.202 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-17 22:43:19.560 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=use1, 服务器=10.29.183.159:9999
2025-05-17 22:43:19.565 [AWT-EventQueue-0] ERROR com.chatroom.client.ui.LoginFrame - 连接服务器失败
java.lang.NullPointerException: Cannot invoke "com.chatroom.client.MessageHandler.addResponseListener(com.chatroom.client.MessageHandler$ResponseListener)" because the return value of "com.chatroom.client.ChatClient.getMessageHandler()" is null
	at com.chatroom.client.ui.LoginFrame.login(LoginFrame.java:277)
	at com.chatroom.client.ui.LoginFrame.lambda$setupListeners$0(LoginFrame.java:218)
	at java.desktop/javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1972)
	at java.desktop/javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2314)
	at java.desktop/javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:407)
	at java.desktop/javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:262)
	at java.desktop/javax.swing.AbstractButton.doClick(AbstractButton.java:374)
	at java.desktop/javax.swing.plaf.basic.BasicRootPaneUI$Actions.actionPerformed(BasicRootPaneUI.java:259)
	at java.desktop/javax.swing.SwingUtilities.notifyAction(SwingUtilities.java:1810)
	at java.desktop/javax.swing.JComponent.processKeyBinding(JComponent.java:2962)
	at java.desktop/javax.swing.KeyboardManager.fireBinding(KeyboardManager.java:309)
	at java.desktop/javax.swing.KeyboardManager.fireKeyboardAction(KeyboardManager.java:251)
	at java.desktop/javax.swing.JComponent.processKeyBindingsForAllComponents(JComponent.java:3055)
	at java.desktop/javax.swing.JComponent.processKeyBindings(JComponent.java:3047)
	at java.desktop/javax.swing.JComponent.processKeyEvent(JComponent.java:2924)
	at java.desktop/java.awt.Component.processEvent(Component.java:6398)
	at java.desktop/java.awt.Container.processEvent(Container.java:2266)
	at java.desktop/java.awt.Component.dispatchEventImpl(Component.java:4996)
	at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2324)
	at java.desktop/java.awt.Component.dispatchEvent(Component.java:4828)
	at java.desktop/java.awt.KeyboardFocusManager.redispatchEvent(KeyboardFocusManager.java:1942)
	at java.desktop/java.awt.DefaultKeyboardFocusManager.dispatchKeyEvent(DefaultKeyboardFocusManager.java:883)
	at java.desktop/java.awt.DefaultKeyboardFocusManager.preDispatchKeyEvent(DefaultKeyboardFocusManager.java:1146)
	at java.desktop/java.awt.DefaultKeyboardFocusManager.typeAheadAssertions(DefaultKeyboardFocusManager.java:1020)
	at java.desktop/java.awt.DefaultKeyboardFocusManager.dispatchEvent(DefaultKeyboardFocusManager.java:848)
	at java.desktop/java.awt.Component.dispatchEventImpl(Component.java:4877)
	at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2324)
	at java.desktop/java.awt.Window.dispatchEventImpl(Window.java:2780)
	at java.desktop/java.awt.Component.dispatchEvent(Component.java:4828)
	at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:775)
	at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:720)
	at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:714)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:87)
	at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:98)
	at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:747)
	at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:745)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:87)
	at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:744)
	at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)
	at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)
	at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)
	at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)
	at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)
	at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
2025-05-17 22:43:21.026 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=use1, 服务器=10.29.183.159:9999
2025-05-17 22:43:21.027 [AWT-EventQueue-0] ERROR com.chatroom.client.ui.LoginFrame - 连接服务器失败
java.lang.NullPointerException: Cannot invoke "com.chatroom.client.MessageHandler.addResponseListener(com.chatroom.client.MessageHandler$ResponseListener)" because the return value of "com.chatroom.client.ChatClient.getMessageHandler()" is null
	at com.chatroom.client.ui.LoginFrame.login(LoginFrame.java:277)
	at com.chatroom.client.ui.LoginFrame.lambda$setupListeners$0(LoginFrame.java:218)
	at java.desktop/javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1972)
	at java.desktop/javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2314)
	at java.desktop/javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:407)
	at java.desktop/javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:262)
	at java.desktop/javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:279)
	at java.desktop/java.awt.Component.processMouseEvent(Component.java:6621)
	at java.desktop/javax.swing.JComponent.processMouseEvent(JComponent.java:3404)
	at java.desktop/java.awt.Component.processEvent(Component.java:6386)
	at java.desktop/java.awt.Container.processEvent(Container.java:2266)
	at java.desktop/java.awt.Component.dispatchEventImpl(Component.java:4996)
	at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2324)
	at java.desktop/java.awt.Component.dispatchEvent(Component.java:4828)
	at java.desktop/java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4948)
	at java.desktop/java.awt.LightweightDispatcher.processMouseEvent(Container.java:4575)
	at java.desktop/java.awt.LightweightDispatcher.dispatchEvent(Container.java:4516)
	at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2310)
	at java.desktop/java.awt.Window.dispatchEventImpl(Window.java:2780)
	at java.desktop/java.awt.Component.dispatchEvent(Component.java:4828)
	at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:775)
	at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:720)
	at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:714)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:87)
	at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:98)
	at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:747)
	at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:745)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:87)
	at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:744)
	at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)
	at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)
	at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)
	at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)
	at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)
	at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
2025-05-17 22:43:55.472 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=admin, 服务器=10.29.183.159:9999
2025-05-17 22:43:55.474 [AWT-EventQueue-0] ERROR com.chatroom.client.ui.LoginFrame - 连接服务器失败
java.lang.NullPointerException: Cannot invoke "com.chatroom.client.MessageHandler.addResponseListener(com.chatroom.client.MessageHandler$ResponseListener)" because the return value of "com.chatroom.client.ChatClient.getMessageHandler()" is null
	at com.chatroom.client.ui.LoginFrame.login(LoginFrame.java:277)
	at com.chatroom.client.ui.LoginFrame.lambda$setupListeners$0(LoginFrame.java:218)
	at java.desktop/javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1972)
	at java.desktop/javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2314)
	at java.desktop/javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:407)
	at java.desktop/javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:262)
	at java.desktop/javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:279)
	at java.desktop/java.awt.Component.processMouseEvent(Component.java:6621)
	at java.desktop/javax.swing.JComponent.processMouseEvent(JComponent.java:3404)
	at java.desktop/java.awt.Component.processEvent(Component.java:6386)
	at java.desktop/java.awt.Container.processEvent(Container.java:2266)
	at java.desktop/java.awt.Component.dispatchEventImpl(Component.java:4996)
	at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2324)
	at java.desktop/java.awt.Component.dispatchEvent(Component.java:4828)
	at java.desktop/java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4948)
	at java.desktop/java.awt.LightweightDispatcher.processMouseEvent(Container.java:4575)
	at java.desktop/java.awt.LightweightDispatcher.dispatchEvent(Container.java:4516)
	at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2310)
	at java.desktop/java.awt.Window.dispatchEventImpl(Window.java:2780)
	at java.desktop/java.awt.Component.dispatchEvent(Component.java:4828)
	at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:775)
	at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:720)
	at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:714)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:87)
	at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:98)
	at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:747)
	at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:745)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:87)
	at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:744)
	at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)
	at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)
	at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)
	at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)
	at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)
	at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
2025-05-17 22:43:56.451 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=admin, 服务器=10.29.183.159:9999
2025-05-17 22:43:56.452 [AWT-EventQueue-0] ERROR com.chatroom.client.ui.LoginFrame - 连接服务器失败
java.lang.NullPointerException: Cannot invoke "com.chatroom.client.MessageHandler.addResponseListener(com.chatroom.client.MessageHandler$ResponseListener)" because the return value of "com.chatroom.client.ChatClient.getMessageHandler()" is null
	at com.chatroom.client.ui.LoginFrame.login(LoginFrame.java:277)
	at com.chatroom.client.ui.LoginFrame.lambda$setupListeners$0(LoginFrame.java:218)
	at java.desktop/javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1972)
	at java.desktop/javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2314)
	at java.desktop/javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:407)
	at java.desktop/javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:262)
	at java.desktop/javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:279)
	at java.desktop/java.awt.Component.processMouseEvent(Component.java:6621)
	at java.desktop/javax.swing.JComponent.processMouseEvent(JComponent.java:3404)
	at java.desktop/java.awt.Component.processEvent(Component.java:6386)
	at java.desktop/java.awt.Container.processEvent(Container.java:2266)
	at java.desktop/java.awt.Component.dispatchEventImpl(Component.java:4996)
	at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2324)
	at java.desktop/java.awt.Component.dispatchEvent(Component.java:4828)
	at java.desktop/java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4948)
	at java.desktop/java.awt.LightweightDispatcher.processMouseEvent(Container.java:4575)
	at java.desktop/java.awt.LightweightDispatcher.dispatchEvent(Container.java:4516)
	at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2310)
	at java.desktop/java.awt.Window.dispatchEventImpl(Window.java:2780)
	at java.desktop/java.awt.Component.dispatchEvent(Component.java:4828)
	at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:775)
	at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:720)
	at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:714)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:87)
	at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:98)
	at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:747)
	at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:745)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)
	at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:87)
	at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:744)
	at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)
	at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)
	at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)
	at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)
	at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)
	at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
2025-05-17 22:49:32.061 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-17 22:49:33.376 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-17 22:49:33.378 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 已加载 4 个用户凭据
2025-05-17 22:49:33.378 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 已初始化用户凭据管理器
2025-05-17 22:49:33.381 [AWT-EventQueue-0] INFO  com.chatroom.server.ChatServer - 已创建公共聊天室: 公共聊天室
2025-05-17 22:49:33.382 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 服务器已启动: 10.29.183.159:9999
2025-05-17 22:49:33.383 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-17 22:49:33.386 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-17 22:49:37.352 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-17 22:49:45.599 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=admin, 服务器=10.29.183.159:9999
2025-05-17 22:49:45.600 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:4777
2025-05-17 22:49:45.602 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-17 22:49:45.603 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-17 22:49:45.607 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='db1bd7e1-ceb1-4912-a136-4059b6f92f67', type=LOGIN, sender=null, timestamp=1747493385605}
2025-05-17 22:49:45.611 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: admin，使用密码认证
2025-05-17 22:49:45.611 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@277d3afb
2025-05-17 22:49:45.611 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 22:49:45.612 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=false, message=用户名或密码错误
2025-05-17 22:49:45.613 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 22:49:45.614 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-17 22:49:45.614 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=false, 消息=用户名或密码错误
2025-05-17 22:49:45.614 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 22:49:45.615 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-17 22:49:45.615 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 22:49:45.622 [AWT-EventQueue-0] WARN  com.chatroom.client.ui.LoginFrame - 登录失败: 用户名或密码错误
2025-05-17 22:50:12.795 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=test, 服务器=10.29.183.159:9999
2025-05-17 22:50:12.798 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-17 22:50:12.798 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='04b3174a-dc19-4d5b-8da2-556e012fcc9a', type=LOGIN, sender=null, timestamp=1747493412798}
2025-05-17 22:50:12.798 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: test，使用密码认证
2025-05-17 22:50:12.799 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@25e3a9e0
2025-05-17 22:50:12.799 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 22:50:12.799 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=false, message=用户名或密码错误
2025-05-17 22:50:12.799 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 22:50:12.799 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-17 22:50:12.799 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=false, 消息=用户名或密码错误
2025-05-17 22:50:12.799 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 22:50:12.799 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-17 22:50:12.800 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 22:50:12.800 [AWT-EventQueue-0] WARN  com.chatroom.client.ui.LoginFrame - 登录失败: 用户名或密码错误
2025-05-17 22:50:16.838 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 22:50:16.838 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 客户端断开连接: /10.29.183.159:4777
2025-05-17 22:50:16.838 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 客户端连接已关闭: /10.29.183.159:4777
2025-05-17 22:50:16.838 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 22:54:34.346 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-17 22:54:36.284 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-17 22:54:36.285 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 用户凭据文件不存在，将创建新文件
2025-05-17 22:54:36.285 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 已添加/更新用户: admin
2025-05-17 22:54:36.286 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 已保存 1 个用户凭据
2025-05-17 22:54:36.286 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 已初始化用户凭据管理器
2025-05-17 22:54:36.289 [AWT-EventQueue-0] INFO  com.chatroom.server.ChatServer - 已创建公共聊天室: 公共聊天室
2025-05-17 22:54:36.290 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 服务器已启动: 10.29.183.159:9999
2025-05-17 22:54:36.290 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-17 22:54:36.292 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-17 22:55:21.968 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-17 22:55:24.511 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-17 22:55:24.512 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:1431
2025-05-17 22:55:24.514 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-17 22:55:24.515 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-17 22:55:24.520 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='0d707776-9088-41d0-a206-4cdd4efdb666', type=LOGIN, sender=null, timestamp=1747493724517}
2025-05-17 22:55:24.523 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-17 22:55:24.524 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@75e35e0e
2025-05-17 22:55:24.524 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-17 22:55:24.524 [pool-1-thread-1] INFO  c.c.server.config.UserCredentials - 已添加/更新用户: 1
2025-05-17 22:55:24.524 [pool-1-thread-1] INFO  c.c.server.config.UserCredentials - 已保存 2 个用户凭据
2025-05-17 22:55:24.525 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已添加新用户: 1
2025-05-17 22:55:24.526 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-17 22:55:24.529 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-17 22:55:24.530 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-17 22:55:24.533 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-17 22:55:24.535 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 22:55:24.536 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-17 22:55:24.536 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 2 个用户对象
2025-05-17 22:55:24.536 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 1
2025-05-17 22:55:24.536 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-17 22:55:24.537 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 22:55:24.537 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-17 22:55:24.538 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 22:55:24.538 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-17 22:55:24.538 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-17 22:55:24.540 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:55:24.540 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-17 22:55:24.540 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-17 22:55:24.699 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 22:55:24.700 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-17 22:55:24.700 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:55:24.700 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-17 22:55:24.700 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 22:55:24.701 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-17 22:55:24.700 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='99f98196-828e-40e8-a8d4-1010204d38ef', requestId='2c4bcaa1-1724-4e81-b01e-f50ffabe1358', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747493724700}
2025-05-17 22:55:24.704 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 22:55:24.704 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-17 22:55:24.704 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-17 22:55:24.704 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='5d93d34d-d4dd-4abc-a8e1-e71ad37e7e9a', requestId='c58b118d-c061-462b-8460-1b1a5acb30b7', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747493724701}
2025-05-17 22:55:24.705 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-17 22:55:24.788 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-17 22:55:24.789 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-17 22:55:24.789 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-17 22:55:24.789 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-17 22:55:27.532 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-17 22:55:27.532 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 1
2025-05-17 22:55:27.532 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-17 22:55:27.532 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-17 22:55:27.534 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:399)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:228)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-17 22:55:27.536 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-17 22:55:27.536 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:00:59.939 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-20 09:01:01.295 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-20 09:01:05.695 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-20 09:01:05.697 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 已加载 3 个用户凭据
2025-05-20 09:01:05.697 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 已初始化用户凭据管理器
2025-05-20 09:01:05.699 [AWT-EventQueue-0] INFO  com.chatroom.server.ChatServer - 已创建公共聊天室: 公共聊天室
2025-05-20 09:01:05.700 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 服务器已启动: 10.129.5.3:9999
2025-05-20 09:01:05.700 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.129.5.3:9999
2025-05-20 09:01:05.702 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.129.5.3:9999
2025-05-20 09:01:14.187 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:01:15.584 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:01:18.733 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 09:01:45.516 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:01:46.963 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:01:50.781 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.129.5.3:9999
2025-05-20 09:01:50.785 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.129.5.3:7295
2025-05-20 09:01:50.789 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.129.5.3:9999
2025-05-20 09:01:50.790 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:01:50.805 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='2197c5a2-00ef-460d-a930-cae05d920d14', type=LOGIN, sender=null, timestamp=1747702910791}
2025-05-20 09:01:50.808 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 09:01:50.809 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@7a8a8af5
2025-05-20 09:01:50.809 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:01:50.810 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 09:01:50.811 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 09:01:50.813 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 09:01:50.820 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:01:50.821 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:01:50.821 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-20 09:01:50.821 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 2 个用户对象
2025-05-20 09:01:50.821 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 1
2025-05-20 09:01:50.821 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-20 09:01:50.823 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:01:50.823 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:01:50.823 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:01:50.823 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 09:01:50.823 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 09:01:50.824 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:01:50.824 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-20 09:01:50.824 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-20 09:01:50.908 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:01:50.909 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 09:01:50.909 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:01:50.909 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:01:50.909 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 2 个响应监听器
2025-05-20 09:01:50.909 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 09:01:50.909 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='b4b24e2c-3af0-4619-9a3a-ac2be4b37df6', requestId='53d301fb-680e-4734-b43d-5b32042a8757', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747702910909}
2025-05-20 09:01:50.914 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='b4b24e2c-3af0-4619-9a3a-ac2be4b37df6', requestId='53d301fb-680e-4734-b43d-5b32042a8757', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747702910909}
2025-05-20 09:01:50.914 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 2 个响应监听器
2025-05-20 09:01:50.914 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:01:50.914 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-20 09:01:50.914 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-20 09:01:50.964 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:01:50.965 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:01:50.965 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:01:50.965 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:01:57.984 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-20 09:02:05.105 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 09:02:05.106 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 1
2025-05-20 09:02:05.106 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-20 09:02:05.106 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 09:02:05.109 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:399)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:228)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 09:02:05.111 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:02:05.111 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:02:13.519 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:02:14.947 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:02:19.253 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 09:02:33.841 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.129.5.3, port=9999, autoSelectPort=true
2025-05-20 09:02:36.221 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-20 09:02:36.224 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 已加载 3 个用户凭据
2025-05-20 09:02:36.225 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 已初始化用户凭据管理器
2025-05-20 09:02:36.226 [AWT-EventQueue-0] INFO  com.chatroom.server.ChatServer - 已创建公共聊天室: 公共聊天室
2025-05-20 09:02:36.228 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 服务器已启动: 10.129.5.3:9999
2025-05-20 09:02:36.229 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.129.5.3:9999
2025-05-20 09:02:36.233 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.129.5.3:9999
2025-05-20 09:02:40.570 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:02:42.376 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:02:45.223 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.129.5.3:9999
2025-05-20 09:02:45.225 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.129.5.3:7417
2025-05-20 09:02:45.226 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.129.5.3:9999
2025-05-20 09:02:45.227 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:02:45.230 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='7f173cd5-df1e-4c89-ad88-a363618421ea', type=LOGIN, sender=null, timestamp=1747702965228}
2025-05-20 09:02:45.234 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 09:02:45.235 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@11a3e2be
2025-05-20 09:02:45.235 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:02:45.237 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 09:02:45.238 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 09:02:45.239 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 09:02:45.242 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:02:45.244 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:02:45.244 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-20 09:02:45.244 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 2 个用户对象
2025-05-20 09:02:45.244 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 1
2025-05-20 09:02:45.244 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-20 09:02:45.244 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:02:45.244 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:02:45.245 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:02:45.245 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 09:02:45.245 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 09:02:45.246 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:02:45.247 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-20 09:02:45.247 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-20 09:02:45.320 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:02:45.322 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 09:02:45.322 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:02:45.322 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:02:45.322 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 2 个响应监听器
2025-05-20 09:02:45.322 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 09:02:45.322 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='058f8194-a4d2-488b-a97f-145afd7131e9', requestId='036e8187-7865-4fad-96f1-5811f02fccb4', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747702965322}
2025-05-20 09:02:45.325 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='058f8194-a4d2-488b-a97f-145afd7131e9', requestId='036e8187-7865-4fad-96f1-5811f02fccb4', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747702965322}
2025-05-20 09:02:45.326 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 2 个响应监听器
2025-05-20 09:02:45.326 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:02:45.326 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-20 09:02:45.326 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-20 09:02:45.376 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:02:45.377 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:02:45.383 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:02:45.383 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:02:53.564 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.129.5.3:9999
2025-05-20 09:02:53.566 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.129.5.3:7427
2025-05-20 09:02:53.567 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.129.5.3:9999
2025-05-20 09:02:53.568 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:02:53.570 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='7b309aef-f87b-48f1-bee7-e694686095b8', type=LOGIN, sender=null, timestamp=1747702973569}
2025-05-20 09:02:53.570 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-20 09:02:53.571 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@3dd14983
2025-05-20 09:02:53.571 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:02:53.571 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=false, message=用户名或密码错误
2025-05-20 09:02:53.572 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:02:53.574 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:02:53.574 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=false, 消息=用户名或密码错误
2025-05-20 09:02:53.574 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:02:53.574 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:02:53.575 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:02:53.576 [AWT-EventQueue-0] WARN  com.chatroom.client.ui.LoginFrame - 登录失败: 用户名或密码错误
2025-05-20 09:03:14.412 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=admin, 服务器=10.129.5.3:9999
2025-05-20 09:03:14.413 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:03:14.413 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='2c7c3077-d803-4c0a-bb60-b23ce03fbd62', type=LOGIN, sender=null, timestamp=1747702994413}
2025-05-20 09:03:14.414 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: admin，使用密码认证
2025-05-20 09:03:14.414 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@3d5300df
2025-05-20 09:03:14.414 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:03:14.415 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=false, message=用户名或密码错误
2025-05-20 09:03:14.415 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:03:14.415 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:03:14.415 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=false, 消息=用户名或密码错误
2025-05-20 09:03:14.416 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:03:14.416 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:03:14.416 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:03:14.418 [AWT-EventQueue-0] WARN  com.chatroom.client.ui.LoginFrame - 登录失败: 用户名或密码错误
2025-05-20 09:03:15.330 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:03:15.331 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:03:15.331 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:03:15.331 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='5e78525f-dee5-43ac-a1d8-4f32079a4f8c', requestId='91735f8b-fe71-4c15-974f-8359a64094a9', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747702995330}
2025-05-20 09:03:15.331 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:03:15.331 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:03:15.331 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:03:15.838 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=admin, 服务器=10.129.5.3:9999
2025-05-20 09:03:15.840 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:03:15.840 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='bf6f351c-5b3a-4bd5-9a9c-ffe02c250fb1', type=LOGIN, sender=null, timestamp=1747702995840}
2025-05-20 09:03:15.841 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: admin，使用密码认证
2025-05-20 09:03:15.841 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@3271281
2025-05-20 09:03:15.841 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:03:15.841 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=false, message=用户名或密码错误
2025-05-20 09:03:15.842 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:03:15.842 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:03:15.842 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=false, 消息=用户名或密码错误
2025-05-20 09:03:15.842 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:03:15.842 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:03:15.842 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:03:15.846 [AWT-EventQueue-0] WARN  com.chatroom.client.ui.LoginFrame - 登录失败: 用户名或密码错误
2025-05-20 09:03:16.398 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=admin, 服务器=10.129.5.3:9999
2025-05-20 09:03:16.399 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:03:16.400 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='8bbacea0-7540-4df0-bca1-10387e3267b9', type=LOGIN, sender=null, timestamp=1747702996399}
2025-05-20 09:03:16.400 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: admin，使用密码认证
2025-05-20 09:03:16.400 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@2c722a98
2025-05-20 09:03:16.400 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:03:16.401 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=false, message=用户名或密码错误
2025-05-20 09:03:16.401 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:03:16.401 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:03:16.401 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=false, 消息=用户名或密码错误
2025-05-20 09:03:16.401 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:03:16.401 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:03:16.401 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:03:16.406 [AWT-EventQueue-0] WARN  com.chatroom.client.ui.LoginFrame - 登录失败: 用户名或密码错误
2025-05-20 09:03:16.602 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=admin, 服务器=10.129.5.3:9999
2025-05-20 09:03:16.604 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:03:16.604 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='e04e3788-ba9a-4bdb-98c9-6302f0346c93', type=LOGIN, sender=null, timestamp=1747702996604}
2025-05-20 09:03:16.605 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: admin，使用密码认证
2025-05-20 09:03:16.605 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@4f1dfef5
2025-05-20 09:03:16.605 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:03:16.605 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=false, message=用户名或密码错误
2025-05-20 09:03:16.605 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:03:16.605 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:03:16.606 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=false, 消息=用户名或密码错误
2025-05-20 09:03:16.606 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:03:16.606 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:03:16.606 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:03:16.610 [AWT-EventQueue-0] WARN  com.chatroom.client.ui.LoginFrame - 登录失败: 用户名或密码错误
2025-05-20 09:03:16.777 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=admin, 服务器=10.129.5.3:9999
2025-05-20 09:03:16.778 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:03:16.778 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='4fd46f91-943d-4c05-b188-a1e8db8a7a23', type=LOGIN, sender=null, timestamp=1747702996778}
2025-05-20 09:03:16.779 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: admin，使用密码认证
2025-05-20 09:03:16.779 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@7d1fb193
2025-05-20 09:03:16.779 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:03:16.780 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=false, message=用户名或密码错误
2025-05-20 09:03:16.780 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:03:16.780 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:03:16.780 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=false, 消息=用户名或密码错误
2025-05-20 09:03:16.780 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:03:16.780 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:03:16.780 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:03:16.784 [AWT-EventQueue-0] WARN  com.chatroom.client.ui.LoginFrame - 登录失败: 用户名或密码错误
2025-05-20 09:03:24.336 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=admin, 服务器=10.129.5.3:9999
2025-05-20 09:03:24.338 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:03:24.338 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='bdcc8623-165f-43e5-bd09-5cc9abb433ae', type=LOGIN, sender=null, timestamp=1747703004338}
2025-05-20 09:03:24.339 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: admin，使用密码认证
2025-05-20 09:03:24.339 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@77034075
2025-05-20 09:03:24.339 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:03:24.339 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=false, message=用户名或密码错误
2025-05-20 09:03:24.339 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:03:24.340 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:03:24.340 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=false, 消息=用户名或密码错误
2025-05-20 09:03:24.340 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:03:24.340 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:03:24.340 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:03:24.343 [AWT-EventQueue-0] WARN  com.chatroom.client.ui.LoginFrame - 登录失败: 用户名或密码错误
2025-05-20 09:03:24.562 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=admin, 服务器=10.129.5.3:9999
2025-05-20 09:03:24.564 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:03:24.564 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='863da80e-bdab-4a16-9be3-aad4602cf488', type=LOGIN, sender=null, timestamp=1747703004564}
2025-05-20 09:03:24.565 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: admin，使用密码认证
2025-05-20 09:03:24.565 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@42d56f39
2025-05-20 09:03:24.565 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:03:24.565 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=false, message=用户名或密码错误
2025-05-20 09:03:24.565 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:03:24.565 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:03:24.565 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=false, 消息=用户名或密码错误
2025-05-20 09:03:24.566 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:03:24.566 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:03:24.566 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:03:24.569 [AWT-EventQueue-0] WARN  com.chatroom.client.ui.LoginFrame - 登录失败: 用户名或密码错误
2025-05-20 09:03:45.335 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:03:45.336 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:03:45.336 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:03:45.336 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='63aa4411-e2bf-400b-aa64-251d515a2bfd', requestId='070fe6d8-a734-490e-90e0-a80f8b99dd4b', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747703025335}
2025-05-20 09:03:45.337 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:03:45.337 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:03:45.337 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:03:46.131 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 09:03:46.131 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 客户端断开连接: /10.129.5.3:7427
2025-05-20 09:03:46.132 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 09:03:46.132 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 客户端连接已关闭: /10.129.5.3:7427
2025-05-20 09:03:47.767 [pool-1-thread-1] ERROR com.chatroom.client.MessageHandler - 读取数据时出错: Connection reset
2025-05-20 09:03:47.767 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 09:03:50.415 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-20 09:03:50.416 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 断开连接时出错: Socket closed
2025-05-20 09:04:22.078 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.129.5.3, port=9999, autoSelectPort=true
2025-05-20 09:04:25.099 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-20 09:04:25.101 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 已加载 3 个用户凭据
2025-05-20 09:04:25.101 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 已初始化用户凭据管理器
2025-05-20 09:04:25.102 [AWT-EventQueue-0] INFO  com.chatroom.server.ChatServer - 已创建公共聊天室: 公共聊天室
2025-05-20 09:04:25.104 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 服务器已启动: 10.129.5.3:9999
2025-05-20 09:04:25.105 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.129.5.3:9999
2025-05-20 09:04:25.107 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.129.5.3:9999
2025-05-20 09:04:30.714 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:04:32.272 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:04:34.397 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.129.5.3:9999
2025-05-20 09:04:34.398 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.129.5.3:7725
2025-05-20 09:04:34.400 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.129.5.3:9999
2025-05-20 09:04:34.400 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:04:34.404 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='eaee5180-c47d-4782-98a7-7ae1aa398faa', type=LOGIN, sender=null, timestamp=1747703074402}
2025-05-20 09:04:34.409 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-20 09:04:34.409 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@64b87c02
2025-05-20 09:04:34.409 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:04:34.410 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=false, message=用户名或密码错误
2025-05-20 09:04:34.411 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:04:34.411 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:04:34.411 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=false, 消息=用户名或密码错误
2025-05-20 09:04:34.411 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:04:34.411 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:04:34.413 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:04:34.413 [AWT-EventQueue-0] WARN  com.chatroom.client.ui.LoginFrame - 登录失败: 用户名或密码错误
2025-05-20 09:04:41.199 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.129.5.3:9999
2025-05-20 09:04:41.200 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:04:41.201 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='ee0830e3-292f-437e-a08d-8e540e5502a6', type=LOGIN, sender=null, timestamp=1747703081200}
2025-05-20 09:04:41.201 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 09:04:41.201 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@49959c11
2025-05-20 09:04:41.201 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:04:41.202 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 09:04:41.204 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 09:04:41.205 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 09:04:41.208 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:04:41.209 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:04:41.209 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-20 09:04:41.209 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 2 个用户对象
2025-05-20 09:04:41.209 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 1
2025-05-20 09:04:41.209 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-20 09:04:41.210 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:04:41.210 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:04:41.210 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:04:41.210 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 09:04:41.210 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 09:04:41.212 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:04:41.212 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-20 09:04:41.212 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-20 09:04:41.281 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:04:41.283 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:04:41.283 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:04:41.283 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 09:04:41.283 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:04:41.283 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 09:04:41.283 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='ac045938-e7d9-4dca-987b-5eb37667714d', requestId='01773620-ff5f-4827-a2fb-f1a0bf51297c', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747703081283}
2025-05-20 09:04:41.287 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:04:41.287 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:04:41.287 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:04:41.287 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='6dca1647-a8da-4f21-a7aa-1d9baf357828', requestId='089184de-4b5f-4381-9bfb-89dd97357d65', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747703081284}
2025-05-20 09:04:41.287 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:04:41.333 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:04:41.335 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:04:41.335 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:04:41.336 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:05:11.291 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:05:11.293 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:05:11.293 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:05:11.293 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='db7c33c3-19ac-4f95-8668-f6b9af92648e', requestId='178d061d-be86-4da0-99e6-3138096438e8', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747703111291}
2025-05-20 09:05:11.293 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:05:11.293 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:05:11.293 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:05:17.073 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=admin, 服务器=10.129.5.3:9999
2025-05-20 09:05:17.074 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.129.5.3:3575
2025-05-20 09:05:17.075 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.129.5.3:9999
2025-05-20 09:05:17.076 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:05:17.079 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='9dc4b807-ff47-48df-a5c8-8d60460b24b1', type=LOGIN, sender=null, timestamp=1747703117079}
2025-05-20 09:05:17.079 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: admin，使用密码认证
2025-05-20 09:05:17.079 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@5ff04474
2025-05-20 09:05:17.079 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:05:17.080 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=false, message=用户名或密码错误
2025-05-20 09:05:17.080 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:05:17.081 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:05:17.081 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=false, 消息=用户名或密码错误
2025-05-20 09:05:17.081 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:05:17.081 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:05:17.083 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:05:17.084 [AWT-EventQueue-0] WARN  com.chatroom.client.ui.LoginFrame - 登录失败: 用户名或密码错误
2025-05-20 09:05:17.773 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=admin, 服务器=10.129.5.3:9999
2025-05-20 09:05:17.774 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:05:17.775 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='0856ce4a-ccd0-42e9-901a-6fe898edd8eb', type=LOGIN, sender=null, timestamp=1747703117775}
2025-05-20 09:05:17.775 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: admin，使用密码认证
2025-05-20 09:05:17.775 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@100abbc1
2025-05-20 09:05:17.776 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:05:17.776 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=false, message=用户名或密码错误
2025-05-20 09:05:17.776 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:05:17.776 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:05:17.776 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=false, 消息=用户名或密码错误
2025-05-20 09:05:17.776 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:05:17.776 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:05:17.776 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:05:17.780 [AWT-EventQueue-0] WARN  com.chatroom.client.ui.LoginFrame - 登录失败: 用户名或密码错误
2025-05-20 09:05:17.971 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=admin, 服务器=10.129.5.3:9999
2025-05-20 09:05:17.972 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:05:17.973 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='5663d3bd-85e1-4b40-aa1e-cc91e95eff4a', type=LOGIN, sender=null, timestamp=1747703117973}
2025-05-20 09:05:17.973 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: admin，使用密码认证
2025-05-20 09:05:17.973 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@3534355a
2025-05-20 09:05:17.973 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:05:17.973 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=false, message=用户名或密码错误
2025-05-20 09:05:17.973 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:05:17.973 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:05:17.973 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=false, 消息=用户名或密码错误
2025-05-20 09:05:17.973 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:05:17.973 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:05:17.973 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:05:17.978 [AWT-EventQueue-0] WARN  com.chatroom.client.ui.LoginFrame - 登录失败: 用户名或密码错误
2025-05-20 09:05:18.176 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=admin, 服务器=10.129.5.3:9999
2025-05-20 09:05:18.177 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:05:18.178 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='0ba485c0-a044-40bf-97c0-fa18a0dc95ee', type=LOGIN, sender=null, timestamp=1747703118177}
2025-05-20 09:05:18.178 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: admin，使用密码认证
2025-05-20 09:05:18.178 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@3aba148e
2025-05-20 09:05:18.178 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:05:18.178 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=false, message=用户名或密码错误
2025-05-20 09:05:18.179 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:05:18.179 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:05:18.179 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=false, 消息=用户名或密码错误
2025-05-20 09:05:18.179 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:05:18.179 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:05:18.179 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:05:18.184 [AWT-EventQueue-0] WARN  com.chatroom.client.ui.LoginFrame - 登录失败: 用户名或密码错误
2025-05-20 09:05:22.611 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 09:05:22.612 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 客户端断开连接: /10.129.5.3:3575
2025-05-20 09:05:22.612 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 客户端连接已关闭: /10.129.5.3:3575
2025-05-20 09:05:22.612 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 09:05:26.553 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 09:05:26.553 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 1
2025-05-20 09:05:26.553 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 09:05:26.553 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-20 09:05:26.556 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:399)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:228)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 09:05:26.559 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:05:26.559 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:06:08.405 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.129.5.3, port=9999, autoSelectPort=true
2025-05-20 09:06:14.065 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-20 09:06:14.066 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 已加载 3 个用户凭据
2025-05-20 09:06:14.066 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 已初始化用户凭据管理器
2025-05-20 09:06:14.068 [AWT-EventQueue-0] INFO  com.chatroom.server.ChatServer - 已创建公共聊天室: 公共聊天室
2025-05-20 09:06:14.069 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 服务器已启动: 10.129.5.3:9999
2025-05-20 09:06:14.070 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.129.5.3:9999
2025-05-20 09:06:14.072 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.129.5.3:9999
2025-05-20 09:06:18.936 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:06:20.410 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:06:24.101 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.129.5.3:9999
2025-05-20 09:06:24.102 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.129.5.3:3716
2025-05-20 09:06:24.104 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.129.5.3:9999
2025-05-20 09:06:24.105 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:06:24.110 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='c84140b9-0889-4045-9079-0cd9ad746507', type=LOGIN, sender=null, timestamp=1747703184106}
2025-05-20 09:06:24.116 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 09:06:24.116 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@5ddbe31e
2025-05-20 09:06:24.116 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:06:24.117 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=false, message=用户名或密码错误
2025-05-20 09:06:24.119 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:06:24.120 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:06:24.120 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=false, 消息=用户名或密码错误
2025-05-20 09:06:24.120 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:06:24.120 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:06:24.121 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:06:24.121 [AWT-EventQueue-0] WARN  com.chatroom.client.ui.LoginFrame - 登录失败: 用户名或密码错误
2025-05-20 09:06:27.790 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 09:06:27.790 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 客户端断开连接: /10.129.5.3:3716
2025-05-20 09:06:27.790 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 客户端连接已关闭: /10.129.5.3:3716
2025-05-20 09:06:27.791 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 09:06:31.420 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.129.5.3:9999
2025-05-20 09:06:31.422 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.129.5.3:3728
2025-05-20 09:06:31.423 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.129.5.3:9999
2025-05-20 09:06:31.423 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:06:31.425 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='51ab3bda-e3cf-4a94-a54d-7ba28abda75a', type=LOGIN, sender=null, timestamp=1747703191424}
2025-05-20 09:06:31.426 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-20 09:06:31.426 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@5b27a569
2025-05-20 09:06:31.426 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:06:31.426 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=false, message=用户名或密码错误
2025-05-20 09:06:31.427 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:06:31.428 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:06:31.428 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=false, 消息=用户名或密码错误
2025-05-20 09:06:31.428 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:06:31.428 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:06:31.428 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:06:31.430 [AWT-EventQueue-0] WARN  com.chatroom.client.ui.LoginFrame - 登录失败: 用户名或密码错误
2025-05-20 09:06:33.034 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 客户端断开连接: /10.129.5.3:3728
2025-05-20 09:06:33.034 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 09:06:33.034 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 09:06:33.034 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 客户端连接已关闭: /10.129.5.3:3728
2025-05-20 09:08:02.680 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.129.5.3, port=9999, autoSelectPort=true
2025-05-20 09:08:07.364 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-20 09:08:07.366 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 用户凭据文件不存在，将创建新文件
2025-05-20 09:08:07.366 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 已添加/更新用户: admin
2025-05-20 09:08:07.367 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 已保存 1 个用户凭据
2025-05-20 09:08:07.368 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 已初始化用户凭据管理器
2025-05-20 09:08:07.369 [AWT-EventQueue-0] INFO  com.chatroom.server.ChatServer - 已创建公共聊天室: 公共聊天室
2025-05-20 09:08:07.371 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 服务器已启动: 10.29.183.159:9999
2025-05-20 09:08:07.371 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 09:08:07.373 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 09:08:30.044 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:08:31.450 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:08:37.922 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 09:08:37.924 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:8376
2025-05-20 09:08:37.925 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 09:08:37.926 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:08:37.929 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='7ea379fd-adb1-48f5-baf3-d9369a922ce9', type=LOGIN, sender=null, timestamp=1747703317927}
2025-05-20 09:08:37.944 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 09:08:37.944 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@31bb47e5
2025-05-20 09:08:37.944 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:08:37.944 [pool-1-thread-1] INFO  c.c.server.config.UserCredentials - 已添加/更新用户: 1
2025-05-20 09:08:37.945 [pool-1-thread-1] INFO  c.c.server.config.UserCredentials - 已保存 2 个用户凭据
2025-05-20 09:08:37.945 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已添加新用户: 1
2025-05-20 09:08:37.948 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 09:08:37.951 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 09:08:37.954 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 09:08:37.956 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:08:37.958 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:08:37.958 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-20 09:08:37.958 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 2 个用户对象
2025-05-20 09:08:37.958 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 1
2025-05-20 09:08:37.958 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-20 09:08:37.958 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:08:37.958 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:08:37.959 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:08:37.959 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 09:08:37.959 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 09:08:37.960 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:08:37.960 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-20 09:08:37.960 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-20 09:08:38.029 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:08:38.030 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 09:08:38.030 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:08:38.030 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:08:38.030 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:08:38.030 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 09:08:38.030 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='23b332a5-aa4e-4c1a-9991-a568de1f6cde', requestId='9b2f9e46-0fe8-4d03-9a0f-a2dc976ffb60', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747703318030}
2025-05-20 09:08:38.033 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='23b332a5-aa4e-4c1a-9991-a568de1f6cde', requestId='9b2f9e46-0fe8-4d03-9a0f-a2dc976ffb60', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747703318030}
2025-05-20 09:08:38.034 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 2 个响应监听器
2025-05-20 09:08:38.034 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:08:38.034 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-20 09:08:38.034 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-20 09:08:38.078 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:08:38.080 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:08:38.080 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:08:38.080 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:08:43.848 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-20 09:08:43.849 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:8386
2025-05-20 09:08:43.850 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 09:08:43.851 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:08:43.854 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='642572fd-7d30-48e8-b739-74c65baaccf2', type=LOGIN, sender=null, timestamp=1747703323853}
2025-05-20 09:08:43.854 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-20 09:08:43.854 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@43fc2797
2025-05-20 09:08:43.854 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:08:43.854 [pool-1-thread-2] INFO  c.c.server.config.UserCredentials - 已添加/更新用户: 2
2025-05-20 09:08:43.855 [pool-1-thread-2] INFO  c.c.server.config.UserCredentials - 已保存 3 个用户凭据
2025-05-20 09:08:43.855 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已添加新用户: 2
2025-05-20 09:08:43.855 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已登录
2025-05-20 09:08:43.856 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已将用户 2 添加到公共聊天室
2025-05-20 09:08:43.856 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 09:08:43.857 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]2 已登录, 是否群消息=false
2025-05-20 09:08:43.860 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 09:08:43.858 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:08:43.859 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]2 已登录
2025-05-20 09:08:43.861 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 2 已登录, 立即刷新用户列表
2025-05-20 09:08:43.861 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:08:43.862 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-20 09:08:43.862 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 2 个用户对象
2025-05-20 09:08:43.862 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 2
2025-05-20 09:08:43.862 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-20 09:08:43.862 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:08:43.862 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:08:43.863 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:08:43.863 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 09:08:43.863 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 09:08:43.863 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:08:43.863 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-20 09:08:43.863 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-20 09:08:43.912 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:08:43.914 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:08:43.914 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:08:43.914 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='8b4859e5-3fa4-422e-a964-156d31ec9407', requestId='3bf7dffc-3b5c-4670-9ceb-3980441292e2', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747703323914}
2025-05-20 09:08:43.914 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:08:43.915 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:08:43.916 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:08:43.960 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:08:43.961 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 09:08:43.961 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:08:43.961 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:08:43.961 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:08:43.962 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 09:08:43.961 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='6ece1553-45e9-4b12-ab31-1eb212f6ae82', requestId='d88ca310-9e4a-436f-8479-2e96e36080e3', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747703323961}
2025-05-20 09:08:43.965 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:08:43.966 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:08:43.966 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:08:43.966 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='1f886da9-e885-451b-a8af-87997e9464e8', requestId='3df4deb0-9976-4907-9a0b-2ce53aaf1544', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747703323962}
2025-05-20 09:08:43.966 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:08:44.011 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:08:44.012 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:08:44.012 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:08:44.013 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:08:49.992 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 09:08:49.992 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 09:08:49.993 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 1
2025-05-20 09:08:49.993 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=1 已离开聊天室, 是否群消息=false
2025-05-20 09:08:49.993 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-20 09:08:49.994 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]用户离线: 1, 是否群消息=false
2025-05-20 09:08:49.994 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]用户离线: 1
2025-05-20 09:08:49.994 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 用户离线: 1, 立即刷新用户列表
2025-05-20 09:08:49.994 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 09:08:49.995 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:399)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:228)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 09:08:49.997 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:08:49.998 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:08:50.009 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:08:50.010 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:08:50.010 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:08:50.010 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='2feb917b-2b23-4d24-bf25-8e0e877275c3', requestId='55803dc4-4c2c-4ba3-b7cf-e9da0fc82fb8', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747703330009}
2025-05-20 09:08:50.010 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:08:50.032 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:08:50.032 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:08:52.533 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 09:08:52.533 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 2
2025-05-20 09:08:52.534 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 2 已从群组 公共聊天室 中移除
2025-05-20 09:08:52.534 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:399)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:228)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 09:08:52.535 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 09:08:52.535 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:08:52.535 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:18:09.713 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-20 09:18:12.322 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-20 09:18:12.323 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 已加载 3 个用户凭据
2025-05-20 09:18:12.323 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 已初始化用户凭据管理器
2025-05-20 09:18:12.330 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public_chat_room 的 33 条历史消息
2025-05-20 09:18:12.331 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 消息存储服务初始化完成，存储路径: D:\java-chatroom\message_store
2025-05-20 09:18:12.332 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 服务器已启动: 10.29.183.159:9999
2025-05-20 09:18:12.333 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 09:18:12.335 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 09:18:16.887 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:18:18.415 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:18:23.094 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 09:18:23.095 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:14483
2025-05-20 09:18:23.096 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 09:18:23.097 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:18:23.100 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='71ab7425-6c1d-46cb-bda5-36e18c915e54', type=LOGIN, sender=null, timestamp=1747703903099}
2025-05-20 09:18:23.103 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 09:18:23.104 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@23b5f1b
2025-05-20 09:18:23.104 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:18:23.104 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 09:18:23.105 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 09:18:23.106 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 09:18:23.108 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:18:23.110 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:18:23.110 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-20 09:18:23.110 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 2 个用户对象
2025-05-20 09:18:23.110 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 1
2025-05-20 09:18:23.110 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-20 09:18:23.111 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:18:23.111 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:18:23.112 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:18:23.112 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 09:18:23.112 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 09:18:23.113 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:18:23.113 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-20 09:18:23.113 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-20 09:18:23.187 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:18:23.188 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 09:18:23.189 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:18:23.189 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:18:23.189 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:18:23.189 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 09:18:23.189 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='d7d96c35-977b-4fbe-983a-aaaf392ab58c', requestId='f21beaff-dc14-443f-a509-c5bef27be6ea', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747703903188}
2025-05-20 09:18:23.193 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:18:23.193 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:18:23.193 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:18:23.193 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='8eb3002d-662f-4aab-986e-5e480d103f05', requestId='67570c46-1c0c-47d7-9bfb-34fa6bc961df', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747703903189}
2025-05-20 09:18:23.193 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:18:23.197 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 09:18:23.198 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: ChatRequest{requestId='f7c66185-3233-4acd-990d-8d078b540653', type=GET_HISTORY_MESSAGES, sender=1, timestamp=1747703903197}
2025-05-20 09:18:23.198 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 09:18:23.198 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到 0 条消息
2025-05-20 09:18:23.198 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回全部 0 条消息
2025-05-20 09:18:23.199 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已发送历史消息: 0 条
2025-05-20 09:18:23.199 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=获取历史消息成功
2025-05-20 09:18:23.199 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:18:23.199 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:18:23.239 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:18:23.239 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:18:23.239 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:18:23.239 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:18:27.150 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-20 09:18:27.152 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:14488
2025-05-20 09:18:27.153 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 09:18:27.154 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:18:27.156 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='5a4a9157-6f30-4741-a39a-42d9a05d0876', type=LOGIN, sender=null, timestamp=1747703907155}
2025-05-20 09:18:27.156 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-20 09:18:27.156 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@2e03baab
2025-05-20 09:18:27.156 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:18:27.157 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已登录
2025-05-20 09:18:27.158 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已将用户 2 添加到公共聊天室
2025-05-20 09:18:27.158 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 09:18:27.158 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]2 已登录, 是否群消息=false
2025-05-20 09:18:27.159 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:18:27.158 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]2 已登录
2025-05-20 09:18:27.159 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 09:18:27.159 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 2 已登录, 立即刷新用户列表
2025-05-20 09:18:27.159 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:18:27.161 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:18:27.161 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:18:27.161 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='e59c73a6-d995-4238-ac1e-bbd12840272e', requestId='e65587f3-c645-46de-ab7e-8a6d368663a8', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747703907160}
2025-05-20 09:18:27.161 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:18:27.162 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:18:27.162 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-20 09:18:27.162 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 2 个用户对象
2025-05-20 09:18:27.162 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 2
2025-05-20 09:18:27.162 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-20 09:18:27.163 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:18:27.163 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:18:27.163 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:18:27.163 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 09:18:27.163 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 09:18:27.164 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:18:27.164 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-20 09:18:27.164 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-20 09:18:27.214 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:18:27.214 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:18:27.248 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:18:27.249 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 09:18:27.249 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:18:27.249 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:18:27.249 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:18:27.250 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 09:18:27.249 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='d5fe992a-5af0-4a50-a80e-84a64e776e8a', requestId='af5c6c0b-1448-4d42-a760-f33dbb5d67f7', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747703907249}
2025-05-20 09:18:27.256 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:18:27.257 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:18:27.257 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:18:27.257 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='4fefa95d-ddea-4ce8-9d06-2eaf362ae45f', requestId='bd991603-3fa7-43e6-b2d9-967f6a188300', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747703907250}
2025-05-20 09:18:27.257 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:18:27.260 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 09:18:27.260 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: ChatRequest{requestId='6c9db568-d3c7-434b-b8b2-6573cf9d2685', type=GET_HISTORY_MESSAGES, sender=2, timestamp=1747703907260}
2025-05-20 09:18:27.262 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 09:18:27.262 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到 0 条消息
2025-05-20 09:18:27.262 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回全部 0 条消息
2025-05-20 09:18:27.262 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已发送历史消息: 0 条
2025-05-20 09:18:27.262 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=获取历史消息成功
2025-05-20 09:18:27.263 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:18:27.263 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:18:27.301 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:18:27.303 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:18:27.304 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:18:27.304 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:18:31.726 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=public, 内容=11111
2025-05-20 09:18:31.726 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 发送群组消息: groupId=public
2025-05-20 09:18:31.726 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 09:18:31.727 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 09:18:31.727 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-20 09:18:31.727 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-20 09:18:31.727 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-20 09:18:37.234 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=1, 接收者=public, 内容=2222222
2025-05-20 09:18:37.234 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=2222222, 是否群消息=true
2025-05-20 09:18:37.235 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 发送群组消息: groupId=public
2025-05-20 09:18:37.235 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-20 09:18:37.235 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-20 09:18:37.236 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-20 09:18:37.235 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=2222222, 是否群消息=true
2025-05-20 09:18:41.828 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 09:18:41.829 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 1
2025-05-20 09:18:41.829 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 09:18:41.829 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-20 09:18:41.829 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=1 已离开聊天室, 是否群消息=false
2025-05-20 09:18:41.830 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]用户离线: 1, 是否群消息=false
2025-05-20 09:18:41.830 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]用户离线: 1
2025-05-20 09:18:41.830 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 用户离线: 1, 立即刷新用户列表
2025-05-20 09:18:41.831 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 09:18:41.831 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:18:41.832 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:18:41.832 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:18:41.832 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='b8d09803-7832-42d2-a8a2-a053f9886f51', requestId='55dc1a3e-c325-4a07-a071-fa5e2b7d9ee2', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747703921832}
2025-05-20 09:18:41.832 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:18:41.833 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:402)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 09:18:41.837 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:18:41.837 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:18:41.868 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:18:41.869 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:18:54.765 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 09:18:54.765 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 2
2025-05-20 09:18:54.766 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 2 已从群组 公共聊天室 中移除
2025-05-20 09:18:54.766 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 09:18:54.766 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:402)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 09:18:54.767 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:18:54.767 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:19:13.363 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:19:14.754 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:19:16.481 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 09:19:16.483 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:14575
2025-05-20 09:19:16.484 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 09:19:16.485 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:19:16.488 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='85947731-86d1-4289-b2dc-0d9f2822fdc2', type=LOGIN, sender=null, timestamp=1747703956487}
2025-05-20 09:19:16.488 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 09:19:16.488 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@5810fc5a
2025-05-20 09:19:16.488 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:19:16.489 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 09:19:16.489 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 09:19:16.489 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 09:19:16.489 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:19:16.495 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:19:16.495 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-20 09:19:16.495 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 2 个用户对象
2025-05-20 09:19:16.495 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 1
2025-05-20 09:19:16.495 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-20 09:19:16.496 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:19:16.496 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:19:16.496 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:19:16.496 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 09:19:16.497 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 09:19:16.497 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:19:16.497 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-20 09:19:16.497 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-20 09:19:16.585 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:19:16.586 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 09:19:16.586 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:19:16.586 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:19:16.586 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:19:16.586 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 09:19:16.586 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='fd63bb5d-8aa9-46e3-8f23-16b51ce560f6', requestId='dbc34a07-d626-4b6b-a079-580f25938c3e', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747703956586}
2025-05-20 09:19:16.590 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:19:16.590 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:19:16.590 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:19:16.591 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='de48ea8e-514b-48c8-a600-e1c98d2a0dde', requestId='03354d90-2125-475b-bfdb-e84ee07586e3', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747703956586}
2025-05-20 09:19:16.591 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:19:16.594 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 09:19:16.596 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: ChatRequest{requestId='58083a06-a9be-466f-80ab-c6ba689a7894', type=GET_HISTORY_MESSAGES, sender=1, timestamp=1747703956595}
2025-05-20 09:19:16.596 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 09:19:16.596 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到 0 条消息
2025-05-20 09:19:16.596 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回全部 0 条消息
2025-05-20 09:19:16.596 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已发送历史消息: 0 条
2025-05-20 09:19:16.597 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=获取历史消息成功
2025-05-20 09:19:16.597 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:19:16.597 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:19:16.640 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:19:16.641 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:19:16.641 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:19:16.641 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:19:21.638 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-20 09:19:21.639 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:14581
2025-05-20 09:19:21.640 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 09:19:21.641 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:19:21.643 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='df922c0a-59af-4b65-ba89-aa54739a7ac7', type=LOGIN, sender=null, timestamp=1747703961642}
2025-05-20 09:19:21.643 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-20 09:19:21.643 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@74a2235f
2025-05-20 09:19:21.643 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:19:21.643 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已登录
2025-05-20 09:19:21.644 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 2 添加到公共聊天室
2025-05-20 09:19:21.644 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 09:19:21.645 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:19:21.645 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]2 已登录, 是否群消息=false
2025-05-20 09:19:21.646 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]2 已登录
2025-05-20 09:19:21.646 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 09:19:21.646 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 2 已登录, 立即刷新用户列表
2025-05-20 09:19:21.646 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:19:21.647 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:19:21.647 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:19:21.648 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='60038840-a1fb-4523-82ab-5e19c518af1b', requestId='d2aa63d6-9fd7-468b-bc40-9ae3484f6176', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747703961647}
2025-05-20 09:19:21.648 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:19:21.648 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:19:21.649 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-20 09:19:21.649 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 2 个用户对象
2025-05-20 09:19:21.649 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 2
2025-05-20 09:19:21.649 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-20 09:19:21.650 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:19:21.650 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:19:21.650 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:19:21.651 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 09:19:21.651 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 09:19:21.651 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:19:21.651 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-20 09:19:21.651 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-20 09:19:21.699 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:19:21.700 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:19:21.730 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:19:21.731 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 09:19:21.731 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:19:21.731 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:19:21.731 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:19:21.731 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 09:19:21.731 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='d7ddc03b-024d-4257-be01-432d1fe6d406', requestId='514c1069-573b-42a6-8971-662575526fba', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747703961730}
2025-05-20 09:19:21.734 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:19:21.734 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:19:21.734 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:19:21.734 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='52e754e6-01b2-47fe-92d0-9db1f9c4360f', requestId='43d55a14-bcc5-4525-a50c-03e1ad94099a', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747703961731}
2025-05-20 09:19:21.734 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:19:21.737 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 09:19:21.738 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: ChatRequest{requestId='0d5498da-2b6c-4131-9246-c643e62d9849', type=GET_HISTORY_MESSAGES, sender=2, timestamp=1747703961738}
2025-05-20 09:19:21.738 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 09:19:21.738 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到 0 条消息
2025-05-20 09:19:21.738 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回全部 0 条消息
2025-05-20 09:19:21.738 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已发送历史消息: 0 条
2025-05-20 09:19:21.739 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=获取历史消息成功
2025-05-20 09:19:21.739 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:19:21.739 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:19:21.787 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:19:21.793 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:19:21.794 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:19:21.795 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:19:23.839 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-20 09:19:23.846 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=1
2025-05-20 09:19:23.846 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 1 的新聊天窗口
2025-05-20 09:19:23.846 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: ChatRequest{requestId='0eeb6867-daa4-4c7f-9ba0-72838ed12018', type=GET_HISTORY_MESSAGES, sender=2, timestamp=1747703963846}
2025-05-20 09:19:23.847 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已发送历史消息: 0 条
2025-05-20 09:19:23.847 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=获取历史消息成功
2025-05-20 09:19:23.847 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:19:23.847 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:19:26.384 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=bb9c0f54-c30d-43b9-899d-62105b69e7d9, 内容=123
2025-05-20 09:19:26.384 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: bb9c0f54-c30d-43b9-899d-62105b69e7d9
2025-05-20 09:19:26.384 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=bb9c0f54-c30d-43b9-899d-62105b69e7d9, 内容=123, 是否群消息=false
2025-05-20 09:19:26.385 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-20 09:19:26.385 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=bb9c0f54-c30d-43b9-899d-62105b69e7d9, 内容=123, 是否群消息=false
2025-05-20 09:19:26.385 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-20 09:19:26.385 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-20 09:19:26.385 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 2 的聊天窗口
2025-05-20 09:19:26.395 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=2
2025-05-20 09:19:26.395 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 2 的新聊天窗口
2025-05-20 09:19:26.395 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: ChatRequest{requestId='e654f401-df1b-47dc-93cb-b510a61db5fe', type=GET_HISTORY_MESSAGES, sender=1, timestamp=1747703966395}
2025-05-20 09:19:26.396 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已发送历史消息: 0 条
2025-05-20 09:19:26.397 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=获取历史消息成功
2025-05-20 09:19:26.397 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:19:26.397 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:19:32.342 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=871dc8be-06e4-4fc5-b635-9fbe755f6b57, 内容=123, 是否群消息=false
2025-05-20 09:19:32.342 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=1, 接收者=871dc8be-06e4-4fc5-b635-9fbe755f6b57, 内容=123
2025-05-20 09:19:32.342 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 871dc8be-06e4-4fc5-b635-9fbe755f6b57
2025-05-20 09:19:32.343 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-20 09:19:32.343 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-20 09:19:32.343 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-20 09:19:32.343 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=871dc8be-06e4-4fc5-b635-9fbe755f6b57, 内容=123, 是否群消息=false
2025-05-20 09:19:51.099 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=871dc8be-06e4-4fc5-b635-9fbe755f6b57, 内容=1, 是否群消息=false
2025-05-20 09:19:51.099 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=1, 接收者=871dc8be-06e4-4fc5-b635-9fbe755f6b57, 内容=1
2025-05-20 09:19:51.099 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 871dc8be-06e4-4fc5-b635-9fbe755f6b57
2025-05-20 09:19:51.099 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-20 09:19:51.099 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-20 09:19:51.099 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-20 09:19:51.099 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=871dc8be-06e4-4fc5-b635-9fbe755f6b57, 内容=1, 是否群消息=false
2025-05-20 09:19:51.744 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:19:51.745 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:19:51.745 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:19:51.746 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='ff869bb4-7ba5-4bd7-b016-d5815b7d45cd', requestId='f25d7b08-5e5c-43a2-b995-207a133e4242', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747703991745}
2025-05-20 09:19:51.746 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:19:51.746 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:19:51.747 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:19:56.907 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=bb9c0f54-c30d-43b9-899d-62105b69e7d9, 内容=1, 是否群消息=false
2025-05-20 09:19:56.907 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=bb9c0f54-c30d-43b9-899d-62105b69e7d9, 内容=1
2025-05-20 09:19:56.908 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: bb9c0f54-c30d-43b9-899d-62105b69e7d9
2025-05-20 09:19:56.908 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-20 09:19:56.909 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-20 09:19:56.909 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-20 09:19:56.908 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=bb9c0f54-c30d-43b9-899d-62105b69e7d9, 内容=1, 是否群消息=false
2025-05-20 09:20:00.459 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 09:20:00.459 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 2
2025-05-20 09:20:00.459 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=2 已离开聊天室, 是否群消息=false
2025-05-20 09:20:00.460 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 2 已从群组 公共聊天室 中移除
2025-05-20 09:20:00.460 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 09:20:00.460 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]用户离线: 2, 是否群消息=false
2025-05-20 09:20:00.460 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]用户离线: 2
2025-05-20 09:20:00.460 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 用户离线: 2, 立即刷新用户列表
2025-05-20 09:20:00.460 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 09:20:00.460 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:20:00.460 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:402)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 09:20:00.461 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:20:00.461 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:20:00.461 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:20:00.461 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='caa695ac-6989-40cb-b8bb-f92eaeb99130', requestId='c51b97e1-6928-4515-af61-f91a075373c1', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704000461}
2025-05-20 09:20:00.461 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:20:00.461 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:20:00.489 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:20:00.489 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:20:05.091 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 09:20:05.091 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 1
2025-05-20 09:20:05.092 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-20 09:20:05.092 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 09:20:05.092 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:402)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 09:20:05.093 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:20:05.093 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:20:10.841 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:20:12.137 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:20:14.936 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=·, 服务器=10.29.183.159:9999
2025-05-20 09:20:14.938 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:14664
2025-05-20 09:20:14.938 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 09:20:14.939 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:20:14.941 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='65dc3a82-6e06-4e2f-b836-67aa983d3962', type=LOGIN, sender=null, timestamp=1747704014940}
2025-05-20 09:20:14.941 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: ·，使用密码认证
2025-05-20 09:20:14.942 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@53c8735d
2025-05-20 09:20:14.942 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:20:14.942 [pool-1-thread-2] INFO  c.c.server.config.UserCredentials - 已添加/更新用户: ·
2025-05-20 09:20:14.943 [pool-1-thread-2] INFO  c.c.server.config.UserCredentials - 已保存 4 个用户凭据
2025-05-20 09:20:14.944 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已添加新用户: ·
2025-05-20 09:20:14.944 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]· 已登录
2025-05-20 09:20:14.944 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已将用户 · 添加到公共聊天室
2025-05-20 09:20:14.945 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 09:20:14.946 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:20:14.950 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:20:14.950 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-20 09:20:14.950 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 2 个用户对象
2025-05-20 09:20:14.950 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: ·
2025-05-20 09:20:14.950 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-20 09:20:14.951 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:20:14.951 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:20:14.951 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:20:14.952 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 09:20:14.952 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 09:20:14.952 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:20:14.952 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-20 09:20:14.952 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-20 09:20:15.026 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:20:15.027 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 09:20:15.027 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:20:15.028 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:20:15.028 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:20:15.028 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 09:20:15.028 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='8e400836-1573-4fc2-9c8d-83fa672c2334', requestId='5e7bf6b3-2e50-4739-b179-2df66ff39509', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704015027}
2025-05-20 09:20:15.031 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:20:15.031 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:20:15.031 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:20:15.032 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='64b38206-7146-4e23-ba7d-3ef834aa5f4d', requestId='c1b9fa65-1f3c-448c-89f7-b3791cb1e0e6', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704015028}
2025-05-20 09:20:15.032 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:20:15.035 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 09:20:15.036 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: ChatRequest{requestId='eb268345-dfda-42d9-b29d-9f28e4e013e9', type=GET_HISTORY_MESSAGES, sender=·, timestamp=1747704015035}
2025-05-20 09:20:15.036 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 09:20:15.036 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到 0 条消息
2025-05-20 09:20:15.036 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回全部 0 条消息
2025-05-20 09:20:15.037 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已发送历史消息: 0 条
2025-05-20 09:20:15.037 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=获取历史消息成功
2025-05-20 09:20:15.038 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:20:15.038 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:20:15.087 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:20:15.088 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:20:15.090 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:20:15.090 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:20:21.797 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: ·
2025-05-20 09:20:21.797 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 · 已从群组 公共聊天室 中移除
2025-05-20 09:20:21.797 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 09:20:21.797 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 09:20:21.797 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:402)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 09:20:21.798 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:20:21.798 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:20:25.942 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2123123, 服务器=10.29.183.159:9999
2025-05-20 09:20:25.944 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:14677
2025-05-20 09:20:25.944 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 09:20:25.945 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:20:25.947 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='dd6f4756-52b3-491f-8918-e31ca0b83daa', type=LOGIN, sender=null, timestamp=1747704025946}
2025-05-20 09:20:25.947 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2123123，使用密码认证
2025-05-20 09:20:25.947 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@76e4a602
2025-05-20 09:20:25.947 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:20:25.947 [pool-1-thread-2] INFO  c.c.server.config.UserCredentials - 已添加/更新用户: 2123123
2025-05-20 09:20:25.948 [pool-1-thread-2] INFO  c.c.server.config.UserCredentials - 已保存 5 个用户凭据
2025-05-20 09:20:25.948 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已添加新用户: 2123123
2025-05-20 09:20:25.948 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2123123 已登录
2025-05-20 09:20:25.948 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已将用户 2123123 添加到公共聊天室
2025-05-20 09:20:25.949 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 09:20:25.949 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:20:25.952 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:20:25.953 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-20 09:20:25.953 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 登录响应包含 2 个用户对象
2025-05-20 09:20:25.953 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 2123123
2025-05-20 09:20:25.953 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-20 09:20:25.953 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:20:25.953 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:20:25.955 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:20:25.955 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 09:20:25.955 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 09:20:25.955 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:20:25.955 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-20 09:20:25.955 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-20 09:20:26.053 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:20:26.055 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 09:20:26.055 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:20:26.055 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:20:26.055 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:20:26.055 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 09:20:26.055 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='5b7bd2f6-8e62-4f37-9559-caf10ebc8c20', requestId='ed6375fb-ded4-4193-9b9f-ce0e532d0ac4', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704026054}
2025-05-20 09:20:26.059 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:20:26.059 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-20 09:20:26.059 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:20:26.059 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='0a5074cc-def5-4e9d-af71-af36bc96f811', requestId='e0a4d234-1fc5-41e6-ae9d-9ffdfa59652f', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704026055}
2025-05-20 09:20:26.059 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:20:26.063 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 09:20:26.064 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: ChatRequest{requestId='ebbe5de5-6075-4a2f-85ca-1c9e2f4b731a', type=GET_HISTORY_MESSAGES, sender=2123123, timestamp=1747704026064}
2025-05-20 09:20:26.065 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 09:20:26.065 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到 0 条消息
2025-05-20 09:20:26.065 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回全部 0 条消息
2025-05-20 09:20:26.065 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已发送历史消息: 0 条
2025-05-20 09:20:26.066 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=获取历史消息成功
2025-05-20 09:20:26.066 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-20 09:20:26.067 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-20 09:20:26.121 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:20:26.123 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:20:26.123 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:20:26.123 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:20:31.224 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 2123123
2025-05-20 09:20:31.224 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 2123123 已从群组 公共聊天室 中移除
2025-05-20 09:20:31.224 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 09:20:31.225 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 09:20:31.225 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:402)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 09:20:31.225 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:20:31.225 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:26:14.668 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-20 09:26:19.560 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-20 09:26:19.562 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 已加载 3 个用户凭据
2025-05-20 09:26:19.562 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 已初始化用户凭据管理器
2025-05-20 09:26:19.571 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public_chat_room 的 33 条历史消息
2025-05-20 09:26:19.571 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 消息存储服务初始化完成，存储路径: D:\java-chatroom\message_store
2025-05-20 09:26:19.572 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 服务器已启动: 10.29.183.159:9999
2025-05-20 09:26:19.574 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 09:26:19.577 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 09:26:25.256 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:26:26.674 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:26:28.986 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=3, 服务器=10.29.183.159:9999
2025-05-20 09:26:28.989 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:7064
2025-05-20 09:26:28.989 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 09:26:28.990 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:26:28.993 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='64306140-745f-4ae1-8972-280d652ba4c2', type=LOGIN, sender=null, timestamp=1747704388991}
2025-05-20 09:26:28.996 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 3，使用密码认证
2025-05-20 09:26:28.997 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@fd7eeea
2025-05-20 09:26:28.997 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:26:28.998 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=false, message=用户名或密码错误
2025-05-20 09:26:28.999 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:26:29.000 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=false, 消息=用户名或密码错误
2025-05-20 09:26:29.001 [AWT-EventQueue-0] WARN  com.chatroom.client.ui.LoginFrame - 登录失败: 用户名或密码错误
2025-05-20 09:26:34.262 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 09:26:34.264 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:26:34.265 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='c4b59439-a169-4c30-930f-38f8cea9dd6f', type=LOGIN, sender=null, timestamp=1747704394265}
2025-05-20 09:26:34.265 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 09:26:34.266 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@517cef8c
2025-05-20 09:26:34.266 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:26:34.266 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 09:26:34.267 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 09:26:34.267 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 09:26:34.268 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:26:34.271 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:26:34.271 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 09:26:34.271 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 09:26:37.540 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-20 09:26:37.542 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:7083
2025-05-20 09:26:37.542 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 09:26:37.544 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:26:37.547 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='1c6608e4-8d03-4b64-82e2-7053da877852', type=LOGIN, sender=null, timestamp=1747704397546}
2025-05-20 09:26:37.547 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-20 09:26:37.547 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@61c5fd9c
2025-05-20 09:26:37.547 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:26:37.547 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已登录
2025-05-20 09:26:37.548 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已将用户 2 添加到公共聊天室
2025-05-20 09:26:37.548 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 09:26:37.549 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:26:37.552 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:26:37.554 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 09:26:37.554 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 09:28:36.341 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-20 09:28:38.200 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-20 09:28:38.202 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 已加载 3 个用户凭据
2025-05-20 09:28:38.202 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 已初始化用户凭据管理器
2025-05-20 09:28:38.209 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public_chat_room 的 33 条历史消息
2025-05-20 09:28:38.210 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 消息存储服务初始化完成，存储路径: D:\java-chatroom\message_store
2025-05-20 09:28:38.211 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 服务器已启动: 10.29.183.159:9999
2025-05-20 09:28:38.212 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 09:28:38.214 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 09:28:42.668 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:28:46.169 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 09:28:46.171 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:7393
2025-05-20 09:28:46.172 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 09:28:46.173 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:28:46.176 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='ff08f9bb-b25d-436e-825f-4269d415d698', type=LOGIN, sender=null, timestamp=1747704526174}
2025-05-20 09:28:46.181 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 09:28:46.182 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@68cce0e8
2025-05-20 09:28:46.183 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:28:46.183 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 09:28:46.184 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 09:28:46.185 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 09:28:46.187 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:28:46.189 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:28:46.191 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 09:28:46.191 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 1
2025-05-20 09:28:46.191 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 09:28:46.268 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:28:46.270 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 09:28:46.271 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:28:46.271 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 09:28:46.272 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='a7c44d06-1ad0-4ed7-9249-28f7e40822e9', requestId='81055d5c-6840-47e9-a6c1-86e3d36f5900', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704526271}
2025-05-20 09:28:46.280 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='a7c44d06-1ad0-4ed7-9249-28f7e40822e9', requestId='81055d5c-6840-47e9-a6c1-86e3d36f5900', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704526271}
2025-05-20 09:28:46.285 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 09:28:46.287 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 09:28:46.287 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 09:28:46.288 [pool-1-thread-1] WARN  c.chatroom.client.ui.ChatMainFrame - 收到非历史消息响应: GENERIC_RESULT
2025-05-20 09:28:46.328 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:28:46.329 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:28:46.329 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:28:46.329 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:28:50.877 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 09:28:50.877 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 1
2025-05-20 09:28:50.878 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-20 09:28:50.878 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 09:28:50.880 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:402)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 09:28:50.882 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:28:50.882 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:28:56.579 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:28:58.041 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:28:59.826 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 09:28:59.828 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:7429
2025-05-20 09:28:59.829 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 09:28:59.829 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:28:59.831 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='8646b950-d332-437f-a975-ddcb7b1e1e9d', type=LOGIN, sender=null, timestamp=1747704539830}
2025-05-20 09:28:59.832 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 09:28:59.832 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@2f715dde
2025-05-20 09:28:59.832 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:28:59.833 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 09:28:59.833 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 09:28:59.834 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 09:28:59.834 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:28:59.838 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:28:59.838 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 09:28:59.839 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 1
2025-05-20 09:28:59.839 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 09:28:59.905 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:28:59.906 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 09:28:59.906 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:28:59.906 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 09:28:59.906 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='1f991789-2ab1-44d4-9287-7966e721a2cc', requestId='a7ba97f2-fad4-44cd-97ba-144e633e5d57', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704539906}
2025-05-20 09:28:59.910 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='1f991789-2ab1-44d4-9287-7966e721a2cc', requestId='a7ba97f2-fad4-44cd-97ba-144e633e5d57', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704539906}
2025-05-20 09:28:59.914 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 09:28:59.915 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 09:28:59.915 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 09:28:59.916 [pool-1-thread-1] WARN  c.chatroom.client.ui.ChatMainFrame - 收到非历史消息响应: GENERIC_RESULT
2025-05-20 09:28:59.954 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:28:59.955 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:28:59.955 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:28:59.955 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:29:03.968 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-20 09:29:03.970 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:7438
2025-05-20 09:29:03.970 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 09:29:03.972 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:29:03.975 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='ca83d54a-e64d-475c-a7a7-f0690f054d2e', type=LOGIN, sender=null, timestamp=1747704543973}
2025-05-20 09:29:03.975 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-20 09:29:03.975 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@7fbb857c
2025-05-20 09:29:03.975 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:29:03.976 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已登录
2025-05-20 09:29:03.976 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已将用户 2 添加到公共聊天室
2025-05-20 09:29:03.976 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 09:29:03.977 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:29:03.977 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]2 已登录, 是否群消息=false
2025-05-20 09:29:03.977 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]2 已登录
2025-05-20 09:29:03.977 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 09:29:03.977 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 2 已登录, 立即刷新用户列表
2025-05-20 09:29:03.978 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:29:03.979 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='0f67fb15-f843-4597-8cbf-477271861323', requestId='c65e05c5-3930-4e25-95e0-c7e5b6be0aee', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704543978}
2025-05-20 09:29:03.981 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:29:03.982 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 09:29:03.982 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 2
2025-05-20 09:29:03.982 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 09:29:04.034 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:29:04.035 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:29:04.073 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:29:04.079 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 09:29:04.081 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:29:04.082 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 09:29:04.078 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='0b8027c7-9e5d-4fb5-a3ca-390b6335dac6', requestId='0946a9a9-e5b0-492b-9bff-90c0e314e23f', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704544078}
2025-05-20 09:29:04.086 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='113b9db5-d1a5-492b-91c5-51e87b4f939b', requestId='483e0d06-611f-4fbf-83ce-53e6992d4288', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704544082}
2025-05-20 09:29:04.090 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 09:29:04.090 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 09:29:04.090 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 09:29:04.092 [pool-1-thread-1] WARN  c.chatroom.client.ui.ChatMainFrame - 收到非历史消息响应: GENERIC_RESULT
2025-05-20 09:29:04.132 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:29:04.133 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:29:04.133 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:29:04.133 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:29:37.940 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 09:29:37.942 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=1, 接收者=public, 内容=1111
2025-05-20 09:29:37.942 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 发送群组消息: groupId=public
2025-05-20 09:29:37.945 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 09:29:41.125 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 09:29:41.126 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=1, 接收者=public, 内容=22222
2025-05-20 09:29:41.126 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 发送群组消息: groupId=public
2025-05-20 09:29:41.127 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 09:29:44.842 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=public, 内容=11111
2025-05-20 09:29:44.842 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 09:29:44.842 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 发送群组消息: groupId=public
2025-05-20 09:29:44.844 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 09:29:46.842 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=222222, 是否群消息=true
2025-05-20 09:29:46.842 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=public, 内容=222222
2025-05-20 09:29:46.842 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 发送群组消息: groupId=public
2025-05-20 09:29:46.844 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=222222, 是否群消息=true
2025-05-20 09:29:49.935 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 09:29:49.936 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=2 已离开聊天室, 是否群消息=false
2025-05-20 09:29:49.936 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 2
2025-05-20 09:29:49.936 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 2 已从群组 公共聊天室 中移除
2025-05-20 09:29:49.936 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]用户离线: 2, 是否群消息=false
2025-05-20 09:29:49.936 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]用户离线: 2
2025-05-20 09:29:49.936 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 用户离线: 2, 立即刷新用户列表
2025-05-20 09:29:49.936 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 09:29:49.937 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:402)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 09:29:49.937 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:29:49.937 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:29:49.953 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 09:29:49.953 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:29:49.954 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='f1c57cf1-72fe-4ed8-a139-1efe75e61c29', requestId='ef6e518d-5f7d-4605-a081-4492261b0977', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704589954}
2025-05-20 09:29:49.960 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:29:49.960 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:29:53.348 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 09:29:53.348 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 1
2025-05-20 09:29:53.348 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-20 09:29:53.349 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 09:29:53.349 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:402)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 09:29:53.349 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:29:53.350 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:29:57.260 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:29:58.687 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:29:59.677 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 09:29:59.678 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:7524
2025-05-20 09:29:59.679 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 09:29:59.680 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:29:59.682 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='78fb7a4d-b5f1-4140-9ee9-d9263847b422', type=LOGIN, sender=null, timestamp=1747704599682}
2025-05-20 09:29:59.682 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 09:29:59.682 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@1c876f97
2025-05-20 09:29:59.682 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:29:59.685 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 09:29:59.685 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 09:29:59.686 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 09:29:59.686 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:29:59.691 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:29:59.692 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 09:29:59.692 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 1
2025-05-20 09:29:59.692 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 09:29:59.776 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:29:59.777 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 09:29:59.778 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:29:59.778 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 09:29:59.778 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='c678f91c-a7ba-462c-ba85-fa8892ff19dd', requestId='13633caf-cff7-4f39-8334-2529a26ba360', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704599777}
2025-05-20 09:29:59.781 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='1c5c6087-20fb-48de-84e4-70b629956737', requestId='14809105-de38-42d4-a984-feb7da687b6e', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704599778}
2025-05-20 09:29:59.785 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 09:29:59.787 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 09:29:59.787 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 09:29:59.788 [pool-1-thread-1] WARN  c.chatroom.client.ui.ChatMainFrame - 收到非历史消息响应: GENERIC_RESULT
2025-05-20 09:29:59.829 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:29:59.829 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:29:59.829 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:29:59.829 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:30:14.719 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-20 09:30:14.721 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:7552
2025-05-20 09:30:14.722 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 09:30:14.722 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:30:14.726 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='14535522-f468-4b4a-b863-fee60f36d19e', type=LOGIN, sender=null, timestamp=1747704614725}
2025-05-20 09:30:14.726 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-20 09:30:14.727 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@70d25a40
2025-05-20 09:30:14.727 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:30:14.727 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已登录
2025-05-20 09:30:14.727 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已将用户 2 添加到公共聊天室
2025-05-20 09:30:14.728 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 09:30:14.728 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:30:14.728 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]2 已登录, 是否群消息=false
2025-05-20 09:30:14.729 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]2 已登录
2025-05-20 09:30:14.729 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 09:30:14.729 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 2 已登录, 立即刷新用户列表
2025-05-20 09:30:14.729 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:30:14.732 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='473847d3-ac73-4dfd-a0cb-2e1f171a3a55', requestId='ea184d98-fe7f-4f43-a1fc-dc7810e8500c', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704614732}
2025-05-20 09:30:14.733 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:30:14.734 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 09:30:14.735 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 2
2025-05-20 09:30:14.735 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 09:30:14.779 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:30:14.779 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:30:14.824 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:30:14.825 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 09:30:14.825 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:30:14.826 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 09:30:14.826 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='e4cf4402-24ad-4360-9241-93dc0937d0c7', requestId='9145c7e0-26bd-427e-8391-cf0484418c68', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704614825}
2025-05-20 09:30:14.828 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='e4cf4402-24ad-4360-9241-93dc0937d0c7', requestId='9145c7e0-26bd-427e-8391-cf0484418c68', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704614825}
2025-05-20 09:30:14.832 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 09:30:14.833 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 09:30:14.833 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 09:30:14.834 [pool-1-thread-1] WARN  c.chatroom.client.ui.ChatMainFrame - 收到非历史消息响应: GENERIC_RESULT
2025-05-20 09:30:14.869 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:30:14.870 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:30:14.870 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:30:14.871 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:30:44.827 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:30:44.827 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='98308611-71e3-4654-9718-9bf302a47ee9', requestId='d2ec652f-d8e0-4814-9d33-39056162be78', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704644827}
2025-05-20 09:30:44.827 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:30:44.827 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:30:59.797 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:30:59.797 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='d74c5fa7-7a11-4409-923f-724fb05796ad', requestId='3a3aa46b-4b17-49cb-9042-632030f61fcd', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704659797}
2025-05-20 09:30:59.797 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:30:59.798 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:31:14.841 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:31:14.842 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='d749dc39-86f5-4267-8fef-16f63e63a66e', requestId='63cd5466-38a9-4aed-aa84-aa0f1e580bad', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704674842}
2025-05-20 09:31:14.842 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:31:14.842 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:31:29.798 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:31:29.799 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='9653dff2-f3f4-4b4c-a9d0-89401b1f2bda', requestId='1e0b653e-e965-4c9c-af91-b1034472df8b', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704689799}
2025-05-20 09:31:29.799 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:31:29.800 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:31:44.842 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:31:44.843 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='6ba31b9f-59d5-4027-be70-844df42d7763', requestId='9deb5a30-8971-4ec2-b0ae-2daee830937a', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704704843}
2025-05-20 09:31:44.843 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:31:44.843 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:31:59.805 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:31:59.806 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='fc228e85-389a-4863-9c04-b17ca874eba1', requestId='242bd344-36ab-47dc-a958-0b3e2cfdb142', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704719805}
2025-05-20 09:31:59.806 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:31:59.806 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:32:14.844 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:32:14.845 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='f7418316-b4d6-45ab-acda-3df8cfe85d6e', requestId='c278f7fc-7a28-475e-bc09-9177831a9849', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704734845}
2025-05-20 09:32:14.845 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:32:14.845 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:32:29.820 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:32:29.821 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='08078a90-8a35-4370-a247-c48c8e42fbbc', requestId='d055976b-de12-405c-b63c-809f7dd56d2b', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704749820}
2025-05-20 09:32:29.821 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:32:29.821 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:32:37.263 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 09:32:37.264 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=1 已离开聊天室, 是否群消息=false
2025-05-20 09:32:37.263 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 1
2025-05-20 09:32:37.264 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 09:32:37.264 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-20 09:32:37.264 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]用户离线: 1, 是否群消息=false
2025-05-20 09:32:37.264 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]用户离线: 1
2025-05-20 09:32:37.264 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 用户离线: 1, 立即刷新用户列表
2025-05-20 09:32:37.264 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 09:32:37.264 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:402)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 09:32:37.265 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:32:37.265 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:32:37.302 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:32:37.303 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='9ac80317-2bf2-42da-98b4-b6a7eb1be2e5', requestId='65068c2d-82fd-4588-82b6-73b566c8f11b', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704757303}
2025-05-20 09:32:37.322 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:32:37.322 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:32:42.779 [pool-1-thread-1] ERROR com.chatroom.client.MessageHandler - 读取数据时出错: Connection reset
2025-05-20 09:32:42.779 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 09:32:46.062 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-20 09:32:46.063 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 断开连接时出错: Socket closed
2025-05-20 09:32:54.266 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-20 09:32:57.268 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-20 09:32:57.270 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 已加载 3 个用户凭据
2025-05-20 09:32:57.270 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 已初始化用户凭据管理器
2025-05-20 09:32:57.277 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public_chat_room 的 33 条历史消息
2025-05-20 09:32:57.278 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 消息存储服务初始化完成，存储路径: D:\java-chatroom\message_store
2025-05-20 09:32:57.279 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 服务器已启动: 10.29.183.159:9999
2025-05-20 09:32:57.279 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 09:32:57.282 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 09:33:05.337 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:33:06.839 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:33:08.067 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 09:33:08.068 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:7895
2025-05-20 09:33:08.069 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 09:33:08.071 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:33:08.075 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='3b86ea93-ed78-451b-b21d-e99deca7e4d0', type=LOGIN, sender=null, timestamp=1747704788072}
2025-05-20 09:33:08.077 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 09:33:08.078 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@5e671b05
2025-05-20 09:33:08.078 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:33:08.079 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 09:33:08.080 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 09:33:08.081 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 09:33:08.085 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:33:08.086 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:33:08.087 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 09:33:08.087 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 1
2025-05-20 09:33:08.087 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 09:33:08.165 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:33:08.167 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 09:33:08.167 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:33:08.167 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 09:33:08.168 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='1887b8a6-0829-4019-b48c-9dbdfd655789', requestId='d28cf6a8-df47-47cb-86c3-7b830a39fe8d', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704788168}
2025-05-20 09:33:08.172 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='1887b8a6-0829-4019-b48c-9dbdfd655789', requestId='d28cf6a8-df47-47cb-86c3-7b830a39fe8d', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704788168}
2025-05-20 09:33:08.177 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 09:33:08.180 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 09:33:08.181 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 09:33:08.182 [pool-1-thread-1] WARN  c.chatroom.client.ui.ChatMainFrame - 收到非历史消息响应: GENERIC_RESULT
2025-05-20 09:33:08.225 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:33:08.228 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:33:08.229 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:33:08.229 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:33:14.932 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-20 09:33:14.934 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:7908
2025-05-20 09:33:14.934 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 09:33:14.935 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:33:14.937 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='615e445a-38c9-44ce-a1ae-be46b06f8a66', type=LOGIN, sender=null, timestamp=1747704794936}
2025-05-20 09:33:14.938 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-20 09:33:14.938 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@5484483c
2025-05-20 09:33:14.938 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:33:14.938 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已登录
2025-05-20 09:33:14.939 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已将用户 2 添加到公共聊天室
2025-05-20 09:33:14.939 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 09:33:14.940 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]2 已登录, 是否群消息=false
2025-05-20 09:33:14.941 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:33:14.941 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]2 已登录
2025-05-20 09:33:14.941 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 09:33:14.941 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 2 已登录, 立即刷新用户列表
2025-05-20 09:33:14.942 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:33:14.944 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:33:14.944 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='f842dbe5-0d04-4f34-a533-280368a1a213', requestId='141f2d57-a3e3-4bf5-8e70-f461f59c5ec8', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704794944}
2025-05-20 09:33:14.945 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 09:33:14.945 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 2
2025-05-20 09:33:14.945 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 09:33:14.998 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:33:14.998 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:33:15.016 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:33:15.017 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 09:33:15.017 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:33:15.017 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 09:33:15.017 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='15a2c27f-a91a-43d2-b237-4185b72dd38b', requestId='9d2c6a82-fe8e-4702-b819-cb203ccba9c3', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704795017}
2025-05-20 09:33:15.020 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='15a2c27f-a91a-43d2-b237-4185b72dd38b', requestId='9d2c6a82-fe8e-4702-b819-cb203ccba9c3', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704795017}
2025-05-20 09:33:15.025 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 09:33:15.026 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 09:33:15.026 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 09:33:15.026 [pool-1-thread-1] WARN  c.chatroom.client.ui.ChatMainFrame - 收到非历史消息响应: GENERIC_RESULT
2025-05-20 09:33:15.071 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:33:15.073 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:33:15.073 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:33:15.073 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:33:17.861 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=public, 内容=1111
2025-05-20 09:33:17.861 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 发送群组消息: groupId=public
2025-05-20 09:33:17.861 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 09:33:17.862 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始存储群组消息: groupId=public, messageId=eaa399e0-d000-4f36-914c-88247d75f01c, content=1111
2025-05-20 09:33:17.862 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 09:33:17.863 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 消息已添加到缓存，当前缓存消息数: 1
2025-05-20 09:33:17.866 [Thread-2] INFO  c.c.s.service.MessageStoreService - 开始异步保存消息到文件: D:\java-chatroom\message_store\groups\public.dat
2025-05-20 09:33:17.868 [Thread-2] INFO  c.c.s.service.MessageStoreService - 消息保存完成
2025-05-20 09:33:22.630 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=1, 接收者=public, 内容=22222
2025-05-20 09:33:22.630 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 09:33:22.630 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 发送群组消息: groupId=public
2025-05-20 09:33:22.630 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始存储群组消息: groupId=public, messageId=6011ff3a-aefc-4feb-a6d3-5b47a7182d11, content=22222
2025-05-20 09:33:22.630 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 消息已添加到缓存，当前缓存消息数: 2
2025-05-20 09:33:22.630 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 09:33:22.631 [Thread-3] INFO  c.c.s.service.MessageStoreService - 开始异步保存消息到文件: D:\java-chatroom\message_store\groups\public.dat
2025-05-20 09:33:22.632 [Thread-3] INFO  c.c.s.service.MessageStoreService - 消息保存完成
2025-05-20 09:33:25.205 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 2 的聊天窗口
2025-05-20 09:33:25.211 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=2
2025-05-20 09:33:25.211 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 2 的新聊天窗口
2025-05-20 09:33:25.211 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 09:33:25.213 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 09:33:25.213 [pool-1-thread-1] WARN  c.chatroom.client.ui.ChatMainFrame - 收到非历史消息响应: GENERIC_RESULT
2025-05-20 09:33:27.267 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=2fbfb16f-ee5c-44f8-bd92-df51cc4e1617, 内容=1111, 是否群消息=false
2025-05-20 09:33:27.267 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=1, 接收者=2fbfb16f-ee5c-44f8-bd92-df51cc4e1617, 内容=1111
2025-05-20 09:33:27.268 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617
2025-05-20 09:33:27.270 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=2fbfb16f-ee5c-44f8-bd92-df51cc4e1617, 内容=1111, 是否群消息=false
2025-05-20 09:33:27.270 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-20 09:33:27.277 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=1
2025-05-20 09:33:27.278 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 1 的新聊天窗口
2025-05-20 09:33:27.278 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 09:33:27.278 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 1 条
2025-05-20 09:33:27.279 [pool-1-thread-1] WARN  c.chatroom.client.ui.ChatMainFrame - 收到非历史消息响应: GENERIC_RESULT
2025-05-20 09:33:45.018 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:33:45.020 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='fdbe0875-d09e-4e62-875a-f9a106d00bf8', requestId='fbbd139d-2dd2-426b-9fdd-a2be81893dc0', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704825019}
2025-05-20 09:33:45.020 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:33:45.020 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:33:50.492 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 09:33:50.492 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 2
2025-05-20 09:33:50.492 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=2 已离开聊天室, 是否群消息=false
2025-05-20 09:33:50.493 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 2 已从群组 公共聊天室 中移除
2025-05-20 09:33:50.493 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 09:33:50.493 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]用户离线: 2, 是否群消息=false
2025-05-20 09:33:50.493 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]用户离线: 2
2025-05-20 09:33:50.493 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 用户离线: 2, 立即刷新用户列表
2025-05-20 09:33:50.493 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 09:33:50.495 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 09:33:50.497 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:33:50.497 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:33:50.512 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:33:50.513 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='c0f59912-b13c-4bd9-9acd-2c175cfdbf1e', requestId='397938e6-8ed0-4f59-845a-385832d0d782', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704830513}
2025-05-20 09:33:50.519 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:33:50.520 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:33:53.702 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 09:33:53.702 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 1
2025-05-20 09:33:53.702 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-20 09:33:53.702 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 09:33:53.702 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 09:33:53.703 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:33:53.703 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:33:57.381 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:33:58.789 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:34:01.472 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 09:34:01.474 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:7996
2025-05-20 09:34:01.474 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 09:34:01.475 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:34:01.478 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='6c59e279-2e2b-43c0-9828-7c8c732ad540', type=LOGIN, sender=null, timestamp=1747704841477}
2025-05-20 09:34:01.478 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 09:34:01.478 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@1dd4eee4
2025-05-20 09:34:01.478 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:34:01.479 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 09:34:01.479 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 09:34:01.479 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 09:34:01.480 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:34:01.486 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:34:01.486 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 09:34:01.486 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 1
2025-05-20 09:34:01.487 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 09:34:01.562 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:34:01.564 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 09:34:01.564 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:34:01.565 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 09:34:01.564 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='6f7c052c-378e-425a-abdc-9795d1ec46a1', requestId='c7c35959-a2a4-44a2-be41-e1c7882d6f16', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704841564}
2025-05-20 09:34:01.567 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='1dd55490-1b02-46a6-b986-1f2f1fa85819', requestId='02c3376a-db80-46d3-8974-0cd83fa16af1', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704841565}
2025-05-20 09:34:01.572 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 09:34:01.573 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 09:34:01.573 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 09:34:01.574 [pool-1-thread-1] WARN  c.chatroom.client.ui.ChatMainFrame - 收到非历史消息响应: GENERIC_RESULT
2025-05-20 09:34:01.615 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:34:01.616 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:34:01.616 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:34:01.616 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:34:18.990 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-20 09:34:18.992 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:8038
2025-05-20 09:34:18.993 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 09:34:18.994 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:34:18.996 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='f9f21807-2377-4890-97a4-1357ddbf1bac', type=LOGIN, sender=null, timestamp=1747704858995}
2025-05-20 09:34:18.997 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-20 09:34:18.997 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@69093edd
2025-05-20 09:34:18.997 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:34:18.997 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已登录
2025-05-20 09:34:18.998 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已将用户 2 添加到公共聊天室
2025-05-20 09:34:18.998 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 09:34:19.001 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:34:19.001 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]2 已登录, 是否群消息=false
2025-05-20 09:34:19.002 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]2 已登录
2025-05-20 09:34:19.002 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 2 已登录, 立即刷新用户列表
2025-05-20 09:34:19.004 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 09:34:19.004 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:34:19.004 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:34:19.004 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 09:34:19.004 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 2
2025-05-20 09:34:19.004 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 09:34:19.005 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='cdcd7025-9200-4995-96eb-c11f5cc30be1', requestId='2c6e6719-2d7d-4391-b4e5-bee45be94771', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704859005}
2025-05-20 09:34:19.060 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:34:19.060 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:34:19.098 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:34:19.099 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 09:34:19.099 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:34:19.099 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 09:34:19.099 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='51792a13-db50-43d2-814b-84df0d197632', requestId='069d4801-c84a-4a82-b67e-49ac6df2efe9', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704859099}
2025-05-20 09:34:19.103 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='51792a13-db50-43d2-814b-84df0d197632', requestId='069d4801-c84a-4a82-b67e-49ac6df2efe9', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704859099}
2025-05-20 09:34:19.106 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 09:34:19.107 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 09:34:19.107 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 09:34:19.107 [pool-1-thread-1] WARN  c.chatroom.client.ui.ChatMainFrame - 收到非历史消息响应: GENERIC_RESULT
2025-05-20 09:34:19.156 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:34:19.157 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:34:19.157 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:34:19.157 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:34:31.745 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 2 的聊天窗口
2025-05-20 09:34:31.755 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=2
2025-05-20 09:34:31.755 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 2 的新聊天窗口
2025-05-20 09:34:31.755 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 09:34:31.755 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 09:34:31.756 [pool-1-thread-1] WARN  c.chatroom.client.ui.ChatMainFrame - 收到非历史消息响应: GENERIC_RESULT
2025-05-20 09:34:49.114 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:34:49.116 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='c9d7b8a9-4aa3-4a70-b215-4585c91facd6', requestId='4b8c85d7-6835-43d5-85e7-fdb5df9be206', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704889116}
2025-05-20 09:34:49.116 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:34:49.116 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:35:01.588 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:35:01.589 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='adfc3cbc-49eb-469d-8db6-ae98c15136ce', requestId='25d783b3-4bf2-4c19-807b-af926df0986c', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704901589}
2025-05-20 09:35:01.589 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:35:01.590 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:35:19.119 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:35:19.119 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='c7634f1f-3b95-4af2-9388-da04a2d048bb', requestId='9e4106c8-688c-4626-914c-0fad9b6f7985', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704919119}
2025-05-20 09:35:19.119 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:35:19.119 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:35:31.596 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:35:31.596 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='c3ce7715-62a1-4822-9c2c-db9746736c55', requestId='39e7b369-2821-4010-b3cd-b23faafddbe3', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704931596}
2025-05-20 09:35:31.596 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:35:31.596 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:35:49.123 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:35:49.124 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='167122d8-f3ad-4ccc-ae79-af7a938620f8', requestId='bf7c69d5-98b6-46af-a450-c5be5f45853e', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704949124}
2025-05-20 09:35:49.124 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:35:49.124 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:36:01.599 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:36:01.600 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='b5316532-136b-4268-b035-179bc3c20dfb', requestId='81f85cf7-762c-4012-956d-b55b3f94665d', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704961599}
2025-05-20 09:36:01.600 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:36:01.600 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:36:19.125 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:36:19.125 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='ed49b696-2f38-4a20-91ac-9c422ae921ac', requestId='ef173855-e194-4b35-bdf3-f5f29116dd68', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704979125}
2025-05-20 09:36:19.126 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:36:19.126 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:36:31.612 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:36:31.613 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='851a2261-b0aa-4b6c-8a39-e81f80a6c25a', requestId='558dd130-5e11-44c4-bff5-2bbaa113d91c', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747704991613}
2025-05-20 09:36:31.613 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:36:31.613 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:36:49.138 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:36:49.138 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='43759615-02b0-44a2-a886-e917f61f2d4f', requestId='436af3c8-f126-4e31-9d54-9018b7dabbfc', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705009138}
2025-05-20 09:36:49.139 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:36:49.139 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:37:01.613 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:37:01.615 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='b5150ef1-3be2-456c-95d5-091cbad28f7d', requestId='87eab77c-01d9-415a-825b-955d60c5cca7', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705021614}
2025-05-20 09:37:01.615 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:37:01.615 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:37:19.148 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:37:19.149 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='b447d2ff-4000-4684-b50d-7eda076f5cde', requestId='698a9cee-847e-4fbf-ab39-a48370d25f2e', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705039149}
2025-05-20 09:37:19.149 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:37:19.149 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:37:31.619 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:37:31.620 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='adc468e2-af9c-4cc3-8585-d2a197043873', requestId='2ec63862-9ede-4c4f-b739-b3f7a65bb1ce', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705051620}
2025-05-20 09:37:31.620 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:37:31.620 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:37:49.162 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:37:49.162 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='eb742a04-ea1d-4944-b446-a407afbeefcf', requestId='6b78f113-a31e-4ef2-90ae-476b2a235f4d', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705069162}
2025-05-20 09:37:49.163 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:37:49.163 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:38:01.633 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:38:01.635 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='a079b1b4-95db-4dff-a438-dad10273bab7', requestId='46586097-a73c-46c4-8779-681f96d3bece', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705081635}
2025-05-20 09:38:01.636 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:38:01.636 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:38:19.176 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:38:19.176 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='826ee54c-ddff-4eae-88fb-20965a723b35', requestId='76551257-1a0f-4ba2-94a1-48ec03d2916a', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705099176}
2025-05-20 09:38:19.177 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:38:19.177 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:38:31.647 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:38:31.648 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='79315510-5d61-47aa-a0da-1d5326d65388', requestId='46392564-dae2-40f6-8e53-b5466b10760b', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705111647}
2025-05-20 09:38:31.648 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:38:31.648 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:38:49.184 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:38:49.185 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='291c03c2-325b-4fdd-a563-0b90ca61ba02', requestId='3c0db896-c3bc-4645-a718-1af8496c68e7', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705129184}
2025-05-20 09:38:49.185 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:38:49.185 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:39:01.650 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:39:01.651 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='9763d1b5-199b-4358-9f13-327679b550c1', requestId='b047df13-5781-431c-883d-7e848ed97738', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705141651}
2025-05-20 09:39:01.651 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:39:01.651 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:39:19.195 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:39:19.196 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='144b8917-9ca2-4bdf-94b1-916db1b8aedf', requestId='7ac6e608-33b2-4501-9e20-5c822098ca45', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705159195}
2025-05-20 09:39:19.196 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:39:19.196 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:39:31.652 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:39:31.653 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='4537fa02-ce45-4c30-a0fc-bcd5f8b9a2af', requestId='16589a43-1962-4724-9e09-6b4ebb80695b', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705171652}
2025-05-20 09:39:31.653 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:39:31.653 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:39:49.197 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:39:49.198 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='ca17e31c-1cd7-4e0a-a097-aefaac7aa251', requestId='0aa54e25-ba6f-4b19-8ffd-69ed9e0ff0f9', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705189198}
2025-05-20 09:39:49.198 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:39:49.198 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:40:01.667 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:40:01.668 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='64a5f7a6-cb50-43ff-830f-9b69d5291a45', requestId='baa13934-a44b-4ffa-bf3f-ad16931956fb', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705201668}
2025-05-20 09:40:01.668 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:40:01.668 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:40:19.200 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:40:19.200 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='240fe439-298e-482c-9ba5-8d7738943714', requestId='fc748d3c-e049-4d43-adf1-db84d926ef7b', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705219200}
2025-05-20 09:40:19.200 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:40:19.201 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:40:31.681 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:40:31.682 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='024197cb-3ce7-44b7-97b1-0ed966c7b75b', requestId='aa3b6a9d-acab-4a6d-886f-a6d9e4db2a26', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705231682}
2025-05-20 09:40:31.682 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:40:31.683 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:40:49.214 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:40:49.215 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='fce76fa2-8f61-47bd-a55a-ab5fe0bb185f', requestId='8ecf63e0-48d4-4d05-bd5c-b5fb18c51431', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705249215}
2025-05-20 09:40:49.216 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:40:49.216 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:41:01.682 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:41:01.683 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='709edc3d-945d-41a5-bfc9-5dbc763a4d02', requestId='1f0ea0be-6a26-4e91-b246-6b6bdd9a4af1', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705261683}
2025-05-20 09:41:01.683 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:41:01.683 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:41:19.218 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:41:19.218 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='52517f50-f488-466f-a9cd-c10cdeeb96ab', requestId='d6767bf5-b1e7-4c70-9f86-b026156564ff', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705279218}
2025-05-20 09:41:19.218 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:41:19.218 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:41:31.684 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:41:31.685 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='edb6ca2d-97cf-4b6e-be8d-c6798d5401df', requestId='59e98a7d-a0ca-42a2-8258-f0e08264912f', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705291685}
2025-05-20 09:41:31.685 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:41:31.685 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:41:49.223 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:41:49.224 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='b13979a2-5488-4a6c-a294-c135826a024d', requestId='d6dd2579-67be-47ff-9bfc-df1c780acf39', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705309224}
2025-05-20 09:41:49.225 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:41:49.225 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:42:01.687 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:42:01.688 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='70b566d9-830a-498b-bd94-0f172c7b12a9', requestId='f78dc7da-938c-49c3-9e52-b6b3e0bb975e', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705321688}
2025-05-20 09:42:01.688 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:42:01.689 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:42:19.226 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:42:19.226 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='3dd6d300-fc32-4676-8bd4-b432e9a6534e', requestId='c0baec91-4cef-4556-9640-5237e212d024', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705339226}
2025-05-20 09:42:19.226 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:42:19.226 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:42:49.241 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:42:49.242 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='942bd24f-9e9c-4384-a015-96368137520c', requestId='f02880f3-4653-4ab6-b246-d481caf5bd85', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705369242}
2025-05-20 09:42:49.242 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:42:49.242 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:43:01.696 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:43:01.697 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='cf50b320-46d6-4847-9679-346dc0d4b3c2', requestId='5902f21b-157d-4165-82fd-a1f351458ea1', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705381697}
2025-05-20 09:43:01.697 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:43:01.697 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:43:19.241 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:43:19.242 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='6423cbc2-4ea3-4a5f-9653-2d50f8141795', requestId='d8d26817-47b9-495f-9456-1a131dc0297c', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705399241}
2025-05-20 09:43:19.242 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:43:19.242 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:43:31.699 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:43:31.699 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='407f68db-3f3f-4e46-8484-a72a914ce00c', requestId='3f69256f-d3a6-420a-a4ed-10f627dd21df', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705411699}
2025-05-20 09:43:31.699 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:43:31.699 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:43:49.243 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:43:49.244 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='14a15d3b-155d-45c3-b3fb-0c31e2b2bf5e', requestId='050c5a8f-8fee-49dd-bf6c-e67fde73cdcd', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705429244}
2025-05-20 09:43:49.245 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:43:49.245 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:44:01.710 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:44:01.711 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='5a7c9ba6-8aa0-4566-a6bd-649123cf508f', requestId='15df9604-9459-4234-a9fb-f9b2b830c1c7', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705441711}
2025-05-20 09:44:01.711 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:44:01.711 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:44:19.247 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:44:19.248 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='930273a6-382d-457a-94fc-c2fab53c40d2', requestId='9b28eee9-8592-4f9a-a452-4b1fae80852e', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705459248}
2025-05-20 09:44:19.248 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:44:19.248 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:44:31.722 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:44:31.723 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='18fa6fe9-e6a3-4971-b410-dbbce010b607', requestId='e0bf1272-a8f4-43e2-bf04-bdaff3760044', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705471723}
2025-05-20 09:44:31.723 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:44:31.723 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:44:49.251 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:44:49.252 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='ad94c0a1-797b-4d82-8abf-9a9b73d164d4', requestId='c62e06e1-b6f5-4750-a301-8ab0d2ca922c', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705489251}
2025-05-20 09:44:49.252 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:44:49.252 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:45:01.729 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:45:01.730 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='eb8339b6-b5c0-425b-9f62-d54ca514de8f', requestId='60c9ed8e-6d85-4d94-be5a-32df4b1fc20d', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705501730}
2025-05-20 09:45:01.730 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:45:01.730 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:45:19.260 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:45:19.261 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='649d033a-87a5-4715-92fe-cd76135aa822', requestId='721f6d97-4d47-4175-966a-b0b33198334a', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705519260}
2025-05-20 09:45:19.261 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:45:19.261 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:45:31.733 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:45:31.734 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='52840303-fc19-4e46-aada-4b247e552c4d', requestId='78f7d99a-6986-4679-b083-3cb467023d71', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705531733}
2025-05-20 09:45:31.734 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:45:31.734 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:45:49.265 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:45:49.265 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='9718d82f-904a-42e1-91dd-be52e671ea99', requestId='88c26579-8b65-44ff-9bae-35e4857e3ee6', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705549265}
2025-05-20 09:45:49.265 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:45:49.267 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:46:01.746 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:46:01.747 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='b84d1f41-9a8d-47ee-9756-8a67f5be759a', requestId='19916aec-75e1-40aa-9e3e-077501025467', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705561746}
2025-05-20 09:46:01.747 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:46:01.747 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:46:19.273 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:46:19.273 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='5997c37e-c2ab-4dc6-86c7-53f0cf424c00', requestId='8cb7ac74-4d13-41db-8049-0d7822700ab4', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705579273}
2025-05-20 09:46:19.273 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:46:19.273 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:46:31.760 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:46:31.761 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='0064223a-f1dd-474e-872f-555cdcf153e5', requestId='2e4b7742-540e-44e4-9a5e-0d2734c3faea', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705591761}
2025-05-20 09:46:31.761 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:46:31.761 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:46:49.277 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:46:49.278 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='76524ba5-adc5-4f89-96a0-5f4aca6350bb', requestId='6c376245-116d-4098-9bee-1e6a402f0e72', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705609278}
2025-05-20 09:46:49.279 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:46:49.279 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:47:01.775 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:47:01.776 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='308d2f97-9103-4630-899e-6a0594fe8b08', requestId='84db4f20-36ba-40a6-bb58-4d632513a6cd', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705621776}
2025-05-20 09:47:01.776 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:47:01.777 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:47:19.280 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:47:19.281 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='5a6d35ad-302d-46f5-bd12-ffda8cdce26d', requestId='78af7635-76bd-4a7c-b4e4-3b646c44d5dc', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705639281}
2025-05-20 09:47:19.282 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:47:19.282 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:47:31.785 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:47:31.786 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='66268abe-db48-4fc2-9c6f-3492cebe206b', requestId='89f313e7-3efa-40e6-b83d-339012edda26', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705651786}
2025-05-20 09:47:31.786 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:47:31.786 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:47:49.293 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:47:49.296 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='30d876db-f312-4eda-94bb-257f3c3068af', requestId='dd534e49-f48e-4d9a-9166-c4c69a575817', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705669295}
2025-05-20 09:47:49.296 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:47:49.296 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:48:01.792 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:48:01.793 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='23c9d898-15c4-4c31-be87-3769100dce9d', requestId='9b84e25a-8f22-4d38-be0d-580b8ebc1448', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705681793}
2025-05-20 09:48:01.793 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:48:01.793 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:48:19.299 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:48:19.300 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='01d6db97-f7cb-44ce-b567-6997d347e807', requestId='1d899d23-74a3-41da-aae2-c8a9d6a9ffc2', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705699300}
2025-05-20 09:48:19.300 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:48:19.300 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:48:31.802 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:48:31.803 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='623abe31-d696-449c-8b77-c7981fd0ea5b', requestId='ceaa682f-02fd-4ecf-b5f6-8124f1aec041', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705711803}
2025-05-20 09:48:31.803 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:48:31.803 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:48:49.305 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:48:49.306 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='1f12b00b-0837-461e-8389-49499cf5c865', requestId='773cd983-3c33-496b-812a-9d523eca3ac2', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705729305}
2025-05-20 09:48:49.306 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:48:49.306 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:49:01.802 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:49:01.803 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='8aba0d38-eaf8-4be1-b23d-c45bc147bfc5', requestId='5abb2365-58cd-4911-988b-6e118a174a58', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705741803}
2025-05-20 09:49:01.803 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:49:01.803 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:49:19.307 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:49:19.308 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='b2565ec1-4aa5-4b11-8162-f3620880f5dc', requestId='9e01b1fa-eeef-4184-bbbc-c582b6833d57', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705759308}
2025-05-20 09:49:19.308 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:49:19.308 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:49:31.809 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:49:31.809 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='090ad373-2573-4913-86bf-27f74cc3884e', requestId='c5cfa2c6-054f-469a-a921-7b7eef78ed95', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705771809}
2025-05-20 09:49:31.810 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:49:31.810 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:49:49.316 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:49:49.317 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='0bf78881-a0b0-4f18-8c12-434afc826ed1', requestId='ba1c9c0b-e1de-46d2-8c92-13adaed24074', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705789316}
2025-05-20 09:49:49.317 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:49:49.317 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:49:58.546 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 09:49:58.546 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 1
2025-05-20 09:49:58.546 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=1 已离开聊天室, 是否群消息=false
2025-05-20 09:49:58.547 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 09:49:58.547 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-20 09:49:58.547 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]用户离线: 1, 是否群消息=false
2025-05-20 09:49:58.547 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]用户离线: 1
2025-05-20 09:49:58.547 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 用户离线: 1, 立即刷新用户列表
2025-05-20 09:49:58.547 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 09:49:58.547 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 09:49:58.548 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:49:58.548 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:49:58.583 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:49:58.583 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='82bf0fef-ae0a-499e-8d6b-6b2add384eba', requestId='075d8363-ed8f-45c7-8138-7f74cdede5df', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705798583}
2025-05-20 09:49:58.597 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:49:58.597 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:50:01.426 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 2
2025-05-20 09:50:01.426 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 2 已从群组 公共聊天室 中移除
2025-05-20 09:50:01.426 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 09:50:01.427 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 09:50:01.427 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 09:50:01.427 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:50:01.428 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 09:50:11.553 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-20 09:50:14.867 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-20 09:50:14.868 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 已加载 3 个用户凭据
2025-05-20 09:50:14.869 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 已初始化用户凭据管理器
2025-05-20 09:50:14.872 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public 的 2 条历史消息
2025-05-20 09:50:14.876 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public_chat_room 的 33 条历史消息
2025-05-20 09:50:14.878 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09 的 1 条历史消息
2025-05-20 09:50:14.878 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 消息存储服务初始化完成，存储路径: D:\java-chatroom\message_store
2025-05-20 09:50:14.879 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 服务器已启动: 10.29.183.159:9999
2025-05-20 09:50:14.880 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 09:50:14.882 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 09:50:19.369 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:50:20.683 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 09:50:22.732 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 09:50:22.734 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:9546
2025-05-20 09:50:22.735 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 09:50:22.736 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:50:22.739 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='cd7fff10-f110-4c05-b799-c26a3f540e37', type=LOGIN, sender=null, timestamp=1747705822737}
2025-05-20 09:50:22.741 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 09:50:22.742 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@32cebd63
2025-05-20 09:50:22.742 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:50:22.743 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 09:50:22.743 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 09:50:22.745 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 09:50:22.747 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:50:22.749 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:50:22.749 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 09:50:22.750 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 1
2025-05-20 09:50:22.750 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 09:50:22.806 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:50:22.807 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 09:50:22.807 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:50:22.807 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 09:50:22.808 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='5f522024-de7e-43ef-a20f-2dfccc9ac2c8', requestId='516500d7-2d15-45a5-9f01-207c587c997c', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705822808}
2025-05-20 09:50:22.812 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='5f522024-de7e-43ef-a20f-2dfccc9ac2c8', requestId='516500d7-2d15-45a5-9f01-207c587c997c', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705822808}
2025-05-20 09:50:22.813 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 09:50:22.813 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 09:50:22.815 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 09:50:22.816 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 0 条
2025-05-20 09:50:22.816 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 0 条
2025-05-20 09:50:22.848 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:50:22.849 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:50:22.849 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 09:50:22.849 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 09:50:26.288 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-20 09:50:26.289 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:9549
2025-05-20 09:50:26.290 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 09:50:26.291 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 09:50:26.293 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='61aa18c9-8a26-4ae9-9644-f31d1036a2cd', type=LOGIN, sender=null, timestamp=1747705826292}
2025-05-20 09:50:26.293 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-20 09:50:26.293 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@58ac4601
2025-05-20 09:50:26.293 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 09:50:26.293 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已登录
2025-05-20 09:50:26.293 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已将用户 2 添加到公共聊天室
2025-05-20 09:50:26.294 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 09:50:26.294 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 09:50:26.294 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]2 已登录, 是否群消息=false
2025-05-20 09:50:26.295 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]2 已登录
2025-05-20 09:50:26.295 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 09:50:26.295 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 2 已登录, 立即刷新用户列表
2025-05-20 09:50:26.298 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 09:50:26.298 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 09:50:26.299 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 2
2025-05-20 09:50:26.299 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 09:50:26.336 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:50:26.337 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='241b8346-e019-493f-80af-249aa7a11e0b', requestId='744c5e11-027c-42f3-aaab-67a6adabb5d3', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705826336}
2025-05-20 09:50:26.341 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:50:26.342 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:50:26.361 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:50:26.362 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 09:50:26.362 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:50:26.362 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 09:50:26.362 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='5ce833c3-ab78-4e01-b577-ec94a3cd0cff', requestId='6f077186-26cf-4c84-a2cb-45426e67fb33', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705826362}
2025-05-20 09:50:26.373 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='5ce833c3-ab78-4e01-b577-ec94a3cd0cff', requestId='6f077186-26cf-4c84-a2cb-45426e67fb33', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705826362}
2025-05-20 09:50:26.376 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 09:50:26.377 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 09:50:26.377 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 09:50:26.377 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 0 条
2025-05-20 09:50:26.379 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 0 条
2025-05-20 09:50:26.412 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:50:26.413 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:50:26.414 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:50:26.414 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:50:29.876 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=public, 内容=1111
2025-05-20 09:50:29.876 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 发送群组消息: groupId=public
2025-05-20 09:50:29.876 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 09:50:29.877 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 存储群组消息: groupId=public, sender=2, content=1111
2025-05-20 09:50:29.877 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 09:50:29.880 [Thread-2] INFO  c.c.s.service.MessageStoreService - 开始异步保存群组消息到文件: D:\java-chatroom\message_store\groups\public.dat
2025-05-20 09:50:29.881 [Thread-2] INFO  c.c.s.service.MessageStoreService - 群组消息保存完成
2025-05-20 09:50:39.683 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-20 09:50:39.689 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=1
2025-05-20 09:50:39.689 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 1 的新聊天窗口
2025-05-20 09:50:39.689 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 09:50:39.689 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 09:50:39.690 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 0 条
2025-05-20 09:50:39.690 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 0 条
2025-05-20 09:50:41.788 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d, 内容=1111
2025-05-20 09:50:41.788 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d, 内容=1111, 是否群消息=false
2025-05-20 09:50:41.788 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d
2025-05-20 09:50:41.788 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 存储私聊消息: sessionKey=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, sender=2, receiver=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d, content=1111
2025-05-20 09:50:41.789 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d, 内容=1111, 是否群消息=false
2025-05-20 09:50:41.789 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 2 的聊天窗口
2025-05-20 09:50:41.789 [Thread-3] INFO  c.c.s.service.MessageStoreService - 开始异步保存私聊消息到文件: D:\java-chatroom\message_store\private\0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a.dat
2025-05-20 09:50:41.791 [Thread-3] INFO  c.c.s.service.MessageStoreService - 私聊消息保存完成
2025-05-20 09:50:41.795 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=2
2025-05-20 09:50:41.795 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 2 的新聊天窗口
2025-05-20 09:50:41.795 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 09:50:41.796 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 1 条
2025-05-20 09:50:41.796 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 1 条
2025-05-20 09:50:41.796 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 1 条
2025-05-20 09:50:56.369 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:50:56.370 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='f148ab63-2811-4980-b16d-ed13565f17ca', requestId='d19011d4-9489-4a56-bc50-e2528fcfe5da', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705856370}
2025-05-20 09:50:56.370 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:50:56.371 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:51:22.832 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:51:22.832 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='3f117487-9c32-4ff7-b4ad-a8924dbbaf28', requestId='e566d976-dd08-48e7-8fed-dfd764e73c99', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705882832}
2025-05-20 09:51:22.832 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:51:22.833 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:51:26.381 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:51:26.386 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='81119825-0f7b-4bdd-a88b-e21bf550de46', requestId='a91101c8-8a1e-49a8-9d5e-04f530979ad8', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705886386}
2025-05-20 09:51:26.386 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:51:26.386 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:51:52.845 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:51:52.847 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='d70281de-3995-4d2b-9721-01b6fb7e0c1a', requestId='b77e3c62-92ef-4b02-b28c-09dd5b01f3a8', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705912846}
2025-05-20 09:51:52.847 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:51:52.847 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:51:56.392 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:51:56.393 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='566b67f5-f096-44d4-aa80-47c50786b7d0', requestId='f9245fd3-913d-44a3-b0f0-2a34853bc1cd', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705916393}
2025-05-20 09:51:56.393 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:51:56.394 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:52:08.280 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 09:52:08.280 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=public, 内容=1111
2025-05-20 09:52:08.281 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 发送群组消息: groupId=public
2025-05-20 09:52:08.281 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 存储群组消息: groupId=public, sender=2, content=1111
2025-05-20 09:52:08.281 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 09:52:08.282 [Thread-4] INFO  c.c.s.service.MessageStoreService - 开始异步保存群组消息到文件: D:\java-chatroom\message_store\groups\public.dat
2025-05-20 09:52:08.282 [Thread-4] INFO  c.c.s.service.MessageStoreService - 群组消息保存完成
2025-05-20 09:52:22.283 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d, 内容=111111
2025-05-20 09:52:22.283 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d, 内容=111111, 是否群消息=false
2025-05-20 09:52:22.283 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d
2025-05-20 09:52:22.284 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 存储私聊消息: sessionKey=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, sender=2, receiver=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d, content=111111
2025-05-20 09:52:22.285 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d, 内容=111111, 是否群消息=false
2025-05-20 09:52:22.285 [Thread-5] INFO  c.c.s.service.MessageStoreService - 开始异步保存私聊消息到文件: D:\java-chatroom\message_store\private\0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a.dat
2025-05-20 09:52:22.286 [Thread-5] INFO  c.c.s.service.MessageStoreService - 私聊消息保存完成
2025-05-20 09:52:22.846 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:52:22.846 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='28224ac0-64f4-4178-8143-71d51194d186', requestId='f5c54ceb-4452-4b60-8fff-33f092a02312', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705942846}
2025-05-20 09:52:22.847 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:52:22.847 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:52:26.396 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:52:26.397 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='178bfb5a-89bb-4fd9-b732-ea05875dec02', requestId='839087c3-c589-4a7b-801b-5da94221fb02', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705946396}
2025-05-20 09:52:26.397 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:52:26.397 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:52:33.285 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=1, 接收者=public, 内容=11111
2025-05-20 09:52:33.285 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 09:52:33.285 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 发送群组消息: groupId=public
2025-05-20 09:52:33.285 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 存储群组消息: groupId=public, sender=1, content=11111
2025-05-20 09:52:33.285 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 09:52:33.286 [Thread-6] INFO  c.c.s.service.MessageStoreService - 开始异步保存群组消息到文件: D:\java-chatroom\message_store\groups\public.dat
2025-05-20 09:52:33.287 [Thread-6] INFO  c.c.s.service.MessageStoreService - 群组消息保存完成
2025-05-20 09:52:37.906 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=1, 接收者=521c718d-0f03-46f8-9732-9a6c8b57fa9a, 内容=1111
2025-05-20 09:52:37.906 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=521c718d-0f03-46f8-9732-9a6c8b57fa9a, 内容=1111, 是否群消息=false
2025-05-20 09:52:37.906 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 521c718d-0f03-46f8-9732-9a6c8b57fa9a
2025-05-20 09:52:37.906 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 存储私聊消息: sessionKey=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, sender=1, receiver=521c718d-0f03-46f8-9732-9a6c8b57fa9a, content=1111
2025-05-20 09:52:37.906 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=521c718d-0f03-46f8-9732-9a6c8b57fa9a, 内容=1111, 是否群消息=false
2025-05-20 09:52:37.907 [Thread-7] INFO  c.c.s.service.MessageStoreService - 开始异步保存私聊消息到文件: D:\java-chatroom\message_store\private\0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a.dat
2025-05-20 09:52:37.908 [Thread-7] INFO  c.c.s.service.MessageStoreService - 私聊消息保存完成
2025-05-20 09:52:52.847 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:52:52.848 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='f73434db-561d-483f-a0e6-1b7b6f10e4ca', requestId='17435bce-7e07-4c19-997d-8666b354a1ec', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705972848}
2025-05-20 09:52:52.848 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:52:52.848 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:52:56.410 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:52:56.411 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='94f43de3-eaf3-4d46-864e-110bdd4ca584', requestId='24eb0461-21e6-43f8-b51a-250d40fa9ed7', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747705976410}
2025-05-20 09:52:56.411 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:52:56.411 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:53:22.855 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:53:22.856 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='0d2f40cb-d85e-47ad-9489-1900426a2cf5', requestId='b17f6076-2811-44cb-8b84-4a4021a1aba4', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706002855}
2025-05-20 09:53:22.856 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:53:22.856 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:53:26.413 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:53:26.414 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='c61a8b0a-42d3-4fe9-acd0-c0b4f5c69ef8', requestId='353a1ed9-327a-4088-9aef-c601b0d65555', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706006414}
2025-05-20 09:53:26.414 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:53:26.414 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:53:52.856 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:53:52.857 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='91bde758-957f-4466-89e7-c03b0db540b8', requestId='bdbd8b66-05d4-4a28-a431-ad0c6607ad03', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706032857}
2025-05-20 09:53:52.857 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:53:52.858 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:53:56.419 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:53:56.420 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='c7a3200d-b82e-4344-8eee-b81ab89aa1e6', requestId='7989b3d6-7253-481f-a806-2c6a03d60697', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706036420}
2025-05-20 09:53:56.420 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:53:56.420 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:54:22.861 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:54:22.862 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='b827db52-7a12-420e-9aa3-b251166a4238', requestId='cece0e33-a670-4489-9542-30c58b287819', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706062861}
2025-05-20 09:54:22.862 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:54:22.862 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:54:26.424 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:54:26.425 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='3842beac-f030-491f-899d-7dbab7ef2926', requestId='d786d20f-0e9f-494c-99a9-ac9637d2090f', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706066425}
2025-05-20 09:54:26.425 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:54:26.425 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:54:52.874 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:54:52.875 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='7698939f-1a40-4ebf-861a-33bb1eaed07a', requestId='edb5b5d8-c8b2-4ac4-a233-55a4a8117246', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706092875}
2025-05-20 09:54:52.875 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:54:52.875 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:54:56.425 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:54:56.426 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='bd70a1f0-99eb-4bc5-bbe8-0a198f73ae5e', requestId='2e268fcb-64ae-42ba-b0cd-5704da4ba6aa', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706096426}
2025-05-20 09:54:56.426 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:54:56.426 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:55:22.876 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:55:22.877 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='ca07bbf1-5a5f-45e3-8fbb-fe13cd2f8833', requestId='f5189972-f24e-4367-a270-c71bb2825705', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706122876}
2025-05-20 09:55:22.877 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:55:22.877 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:55:26.438 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:55:26.439 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='485fc661-568b-49e5-9fe4-7c617ccab0e3', requestId='b0f40e02-97c9-498c-8a7a-e5f7cdadf205', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706126439}
2025-05-20 09:55:26.439 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:55:26.440 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:55:52.887 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:55:52.887 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='d95ba1e0-450d-4b64-80e4-35897f6f2607', requestId='8c21259c-356a-4338-a816-1c7b6a209a27', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706152887}
2025-05-20 09:55:52.888 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:55:52.888 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:55:56.448 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:55:56.449 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='b080fb7b-540e-4fbd-b683-49ec39d51e77', requestId='36d2e797-a60f-4c7c-bea6-be6da0d2e6a7', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706156449}
2025-05-20 09:55:56.449 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:55:56.449 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:56:22.891 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:56:22.892 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='46bdcacb-31ef-4103-8084-96952d99f6dc', requestId='1af99302-f389-4e90-a544-b4128ddde205', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706182892}
2025-05-20 09:56:22.892 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:56:22.892 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:56:26.449 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:56:26.450 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='84545578-9715-422f-bdc0-e9aec221dc04', requestId='f62bce0b-0007-4ec9-a771-95592e7d1b63', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706186450}
2025-05-20 09:56:26.450 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:56:26.450 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:56:52.894 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:56:52.895 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='bab18990-979e-4206-8a33-08a299cc0e4c', requestId='d42f944b-a2e1-4afe-a422-4927e650eed3', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706212894}
2025-05-20 09:56:52.895 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:56:52.895 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:56:56.465 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:56:56.466 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='eb113076-3d41-4a03-b17e-945c949f9f59', requestId='f3830967-a500-4bb5-9031-24888b79c1b1', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706216466}
2025-05-20 09:56:56.466 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:56:56.466 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:57:22.895 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:57:22.896 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='8dbc7cd6-8335-4ec3-ad39-1b16f5dd954e', requestId='70bef2bc-57a7-4b61-b391-efaea0f6b685', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706242895}
2025-05-20 09:57:22.896 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:57:22.896 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:57:26.468 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:57:26.468 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='1e2be679-b1af-4741-8569-576b84814de1', requestId='37db199a-bedd-4e91-8c34-5fdbce31c3f1', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706246468}
2025-05-20 09:57:26.469 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:57:26.469 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:57:52.895 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:57:52.896 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='c3ca2523-60a3-462d-8488-154a6db718e4', requestId='8436a2a7-8c55-44aa-827e-6ad47e2be841', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706272896}
2025-05-20 09:57:52.896 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:57:52.897 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:57:56.479 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:57:56.479 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='a139452c-dd36-43ca-a80b-1e13351c885b', requestId='36ab4c8b-690f-4e0c-8341-4b43d6bb8dc5', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706276479}
2025-05-20 09:57:56.479 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:57:56.480 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:58:22.903 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:58:22.904 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='f3821514-3f6c-454d-b21e-d49b65263bbf', requestId='26c084eb-b2d3-4cce-8572-8faf120d7cb2', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706302904}
2025-05-20 09:58:22.905 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:58:22.905 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:58:26.490 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:58:26.491 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='fe0e56b2-d116-48b3-b7c3-e6d843d476a2', requestId='ab89cec7-94f0-45c1-b2ce-0d155273b2a5', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706306491}
2025-05-20 09:58:26.492 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:58:26.492 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:58:52.918 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:58:52.918 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='564cde40-f2a0-4701-a0cf-360ea289f317', requestId='d46e7c00-761f-4806-9c2b-5c4d56a4a059', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706332918}
2025-05-20 09:58:52.919 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:58:52.919 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:58:56.498 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:58:56.499 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='80f4a29c-b76b-40a1-b718-b6a9f5f50be9', requestId='3f47e615-728e-45b9-955d-a537a90eb4e5', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706336498}
2025-05-20 09:58:56.499 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:58:56.499 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:59:22.926 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:59:22.927 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='802867db-cd1c-4d0f-9551-96d2a0c1ec12', requestId='517867ce-7e95-4a57-8b3c-bff73a6f8bf4', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706362926}
2025-05-20 09:59:22.927 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:59:22.927 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:59:26.506 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:59:26.507 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='8a232364-f147-4208-990f-c7d06ba7bc02', requestId='b29b81e9-5777-432e-886f-b0af24d15a78', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706366507}
2025-05-20 09:59:26.507 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:59:26.507 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:59:52.932 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:59:52.933 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='94f494ec-68d5-4e14-8379-f87bdeeb5299', requestId='3749701f-cb1d-4a6b-8ccd-236f4ee63835', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706392933}
2025-05-20 09:59:52.933 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:59:52.933 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 09:59:56.516 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 09:59:56.517 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='394a103e-3e64-4d56-b090-b9563d98ac49', requestId='09d1e749-8e2c-405d-8b05-ad15a3232a6e', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706396517}
2025-05-20 09:59:56.517 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 09:59:56.517 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:00:22.948 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:00:22.948 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='35f1fba2-2ff9-4913-9ce3-cb3f102c018f', requestId='59ee83f4-3b24-47a4-bebf-62c5b0ec9cc9', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706422948}
2025-05-20 10:00:22.949 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:00:22.949 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:00:26.521 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:00:26.522 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='b1b530aa-173a-492d-ba6b-a6d9c6561269', requestId='e852a938-78ee-45dd-b499-acf5f8768be7', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706426521}
2025-05-20 10:00:26.522 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:00:26.522 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:00:52.953 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:00:52.953 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='29a0b534-edc6-4c9b-ad47-ed0e63961103', requestId='ebb1bdf5-34c1-4162-82ce-eb4b4bae6e06', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706452953}
2025-05-20 10:00:52.954 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:00:52.954 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:00:56.525 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:00:56.526 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='433fe6ac-4be1-4252-847c-fecc1f9147f6', requestId='b5c910e2-e507-42b4-91a0-28c85ee393ec', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706456526}
2025-05-20 10:00:56.526 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:00:56.526 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:01:22.963 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:01:22.963 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='7df47f27-9406-47ea-80c4-08bb56aaafa7', requestId='93fe7f49-db57-4cd4-893e-5a86f9fa6fd4', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706482963}
2025-05-20 10:01:22.965 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:01:22.965 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:01:26.535 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:01:26.536 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='d3bcbae5-ae55-4e74-807b-b5bf787770b9', requestId='5e97534d-526c-4df1-a6fc-05151d568b82', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706486536}
2025-05-20 10:01:26.536 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:01:26.536 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:01:46.132 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:01:46.132 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=1 已离开聊天室, 是否群消息=false
2025-05-20 10:01:46.132 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 1
2025-05-20 10:01:46.132 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-20 10:01:46.133 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]用户离线: 1, 是否群消息=false
2025-05-20 10:01:46.133 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]用户离线: 1
2025-05-20 10:01:46.133 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 用户离线: 1, 立即刷新用户列表
2025-05-20 10:01:46.133 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:01:46.135 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:01:46.137 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:01:46.141 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:01:46.141 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:01:46.180 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:01:46.181 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='d9ad010b-94e4-4c79-a9fe-b16b896a4255', requestId='eecbed11-c137-4e7b-94f4-2a3a8487c980', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706506180}
2025-05-20 10:01:46.181 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:01:46.181 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:01:49.052 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 2
2025-05-20 10:01:49.052 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 2 已从群组 公共聊天室 中移除
2025-05-20 10:01:49.052 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:01:49.053 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:01:49.053 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:01:49.053 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:01:49.053 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:01:59.527 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:02:00.912 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:02:02.823 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 10:02:02.826 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:10279
2025-05-20 10:02:02.826 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:02:02.827 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:02:02.829 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='79b9a860-e45f-49f8-b212-07687a2836ac', type=LOGIN, sender=null, timestamp=1747706522829}
2025-05-20 10:02:02.830 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 10:02:02.830 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@282302b0
2025-05-20 10:02:02.830 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:02:02.830 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 10:02:02.830 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 10:02:02.831 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:02:02.831 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:02:02.839 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:02:02.839 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:02:02.839 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 1
2025-05-20 10:02:02.839 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:02:02.969 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:02:02.973 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:02:02.973 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:02:02.973 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:02:02.973 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='eff20974-c05a-4a7b-b354-19964d113882', requestId='169f94f4-13ac-476d-8e2e-cd00b512ec85', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706522973}
2025-05-20 10:02:02.977 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='2d5894e1-30c7-4452-bf74-f0cb184edd21', requestId='08f7a1bc-4956-4bf9-910a-94f0a1a82d79', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706522973}
2025-05-20 10:02:02.982 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:02:02.984 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 10:02:02.984 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 10:02:02.985 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 0 条
2025-05-20 10:02:02.986 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 0 条
2025-05-20 10:02:03.029 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:02:03.031 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:02:03.032 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:02:03.032 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:02:08.354 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-20 10:02:08.356 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:10286
2025-05-20 10:02:08.356 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:02:08.357 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:02:08.359 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='8ef2e3c4-15eb-475c-88a9-8387ab7d84bb', type=LOGIN, sender=null, timestamp=1747706528358}
2025-05-20 10:02:08.359 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-20 10:02:08.359 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@24df794
2025-05-20 10:02:08.359 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:02:08.359 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已登录
2025-05-20 10:02:08.360 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 2 添加到公共聊天室
2025-05-20 10:02:08.360 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:02:08.360 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]2 已登录, 是否群消息=false
2025-05-20 10:02:08.361 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:02:08.361 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]2 已登录
2025-05-20 10:02:08.361 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:02:08.362 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 2 已登录, 立即刷新用户列表
2025-05-20 10:02:08.364 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:02:08.366 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:02:08.366 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 2
2025-05-20 10:02:08.366 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:02:08.400 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:02:08.400 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='c22e8c9f-7c30-442c-bb39-f5f11a7d5b3d', requestId='d1e4f38c-9d76-4886-835d-aad8c7c73255', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706528400}
2025-05-20 10:02:08.402 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:02:08.402 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:02:08.433 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:02:08.435 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:02:08.435 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:02:08.435 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:02:08.435 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='aa89dca2-e771-4d5d-9398-cc210b5c8a66', requestId='a16d34dc-75f2-4056-841f-c54ef3bfdc39', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706528435}
2025-05-20 10:02:08.439 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='2e53b392-91e8-439f-82c7-901fa338158b', requestId='6b5e5033-08ba-4272-a004-16d2c8657a5f', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706528435}
2025-05-20 10:02:08.443 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:02:08.444 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:02:08.444 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 10:02:08.445 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 0 条
2025-05-20 10:02:08.445 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 0 条
2025-05-20 10:02:08.480 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:02:08.481 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:02:08.481 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:02:08.481 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:02:09.847 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-20 10:02:09.853 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=1
2025-05-20 10:02:09.853 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 1 的新聊天窗口
2025-05-20 10:02:09.853 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:02:09.853 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 10:02:09.853 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 0 条
2025-05-20 10:02:09.853 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 0 条
2025-05-20 10:02:38.450 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:02:38.451 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='48e2d8b8-5754-4b1c-b9e0-756c9e01ddf8', requestId='71d8296c-8834-4ed1-9ee7-37a058c0bd77', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706558451}
2025-05-20 10:02:38.451 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:02:38.452 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:03:02.997 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:03:02.998 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='aae7bf00-2b26-4650-bd40-8dde2e77eed5', requestId='204a2fcf-1262-4a51-a52e-44e74df7b6a2', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706582998}
2025-05-20 10:03:02.998 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:03:02.998 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:03:08.460 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:03:08.461 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='d26abc79-ac60-4367-9ade-354ebfbf12cf', requestId='be2ca8b5-836a-420c-a5c9-995e6025b0f9', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706588461}
2025-05-20 10:03:08.462 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:03:08.462 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:03:33.011 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:03:33.012 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='68032c1a-8a18-459c-843d-1c6acab52326', requestId='539e585a-6463-4ab4-b390-c175f0baa913', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706613012}
2025-05-20 10:03:33.012 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:03:33.012 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:03:38.461 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:03:38.462 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='4cad6d9a-87ce-4953-8260-054d178907be', requestId='937be674-b020-4535-98d7-fb4eb83e143f', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706618462}
2025-05-20 10:03:38.462 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:03:38.462 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:03:46.743 [pool-1-thread-1] ERROR com.chatroom.client.MessageHandler - 读取数据时出错: Connection reset
2025-05-20 10:03:46.743 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:03:46.744 [pool-1-thread-1] ERROR com.chatroom.client.MessageHandler - 读取数据时出错: Connection reset
2025-05-20 10:03:46.744 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:03:48.897 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-20 10:03:48.898 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 断开连接时出错: Socket closed
2025-05-20 10:03:51.813 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-20 10:03:51.814 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 断开连接时出错: Socket closed
2025-05-20 10:03:58.230 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-20 10:04:00.441 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-20 10:04:00.444 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 已加载 3 个用户凭据
2025-05-20 10:04:00.444 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 已初始化用户凭据管理器
2025-05-20 10:04:00.444 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始加载历史消息...
2025-05-20 10:04:00.445 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 群组消息目录存在: D:\java-chatroom\message_store\groups
2025-05-20 10:04:00.445 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现群组消息文件: public.dat
2025-05-20 10:04:00.445 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\groups\public.dat
2025-05-20 10:04:00.449 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 5 条
2025-05-20 10:04:00.450 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public 的 5 条历史消息
2025-05-20 10:04:00.450 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现群组消息文件: public_chat_room.dat
2025-05-20 10:04:00.450 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\groups\public_chat_room.dat
2025-05-20 10:04:00.456 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 33 条
2025-05-20 10:04:00.457 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public_chat_room 的 33 条历史消息
2025-05-20 10:04:00.457 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 私聊消息目录存在: D:\java-chatroom\message_store\private
2025-05-20 10:04:00.457 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a.dat
2025-05-20 10:04:00.457 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a.dat
2025-05-20 10:04:00.460 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 3 条
2025-05-20 10:04:00.460 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a 的 3 条历史消息
2025-05-20 10:04:00.460 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09.dat
2025-05-20 10:04:00.460 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09.dat
2025-05-20 10:04:00.461 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 1 条
2025-05-20 10:04:00.462 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09 的 1 条历史消息
2025-05-20 10:04:00.462 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 历史消息加载完成，群组消息数: 2, 私聊消息数: 2
2025-05-20 10:04:00.462 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 消息存储服务初始化完成，存储路径: D:\java-chatroom\message_store
2025-05-20 10:04:00.463 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 服务器已启动: 10.29.183.159:9999
2025-05-20 10:04:00.463 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 10:04:00.465 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 10:04:10.348 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:04:14.076 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 10:04:14.077 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:10506
2025-05-20 10:04:14.078 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:04:14.079 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:04:14.082 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='93cfcff8-d48b-4c02-8f78-eb80cf7ad2d3', type=LOGIN, sender=null, timestamp=1747706654080}
2025-05-20 10:04:14.085 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 10:04:14.086 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@47e1beca
2025-05-20 10:04:14.086 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:04:14.087 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 10:04:14.088 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 10:04:14.089 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:04:14.091 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:04:14.092 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:04:14.093 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:04:14.093 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 1
2025-05-20 10:04:14.093 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:04:14.156 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:04:14.157 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:04:14.157 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:04:14.158 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:04:14.160 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='4e25afaf-7e6a-4e7e-8254-d93ff40f7bf8', requestId='590d2b98-311e-42b6-95c6-5c0a7c7ffe65', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706654159}
2025-05-20 10:04:14.165 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:04:14.165 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='4e25afaf-7e6a-4e7e-8254-d93ff40f7bf8', requestId='590d2b98-311e-42b6-95c6-5c0a7c7ffe65', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706654159}
2025-05-20 10:04:14.167 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 10:04:14.167 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 10:04:14.172 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 0 条
2025-05-20 10:04:14.175 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 0 条
2025-05-20 10:04:14.213 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:04:14.215 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:04:14.215 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:04:14.215 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:04:44.159 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:04:44.161 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='42828576-325c-48ed-9325-5219bc66c2a6', requestId='b13d9400-0455-4bf7-8d4f-befd561bf598', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706684160}
2025-05-20 10:04:44.161 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:04:44.161 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:05:14.164 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:05:14.165 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='8cbf7d0f-3f0c-48e5-baf4-4afc0983b9dc', requestId='289bf2d6-c1d9-4923-a64e-c67ecf4bdecf', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706714165}
2025-05-20 10:05:14.165 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:05:14.165 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:05:44.165 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:05:44.166 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='9ec3a41c-1711-43c2-8191-03d6ef9b9b67', requestId='e6fe27bb-967b-4443-9981-30f5ad00e2fc', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706744165}
2025-05-20 10:05:44.166 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:05:44.166 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:05:46.177 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:05:46.177 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 1
2025-05-20 10:05:46.177 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-20 10:05:46.177 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:05:46.179 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:05:46.181 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:05:46.181 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:05:55.931 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-20 10:05:57.542 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-20 10:05:57.544 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 已加载 3 个用户凭据
2025-05-20 10:05:57.544 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 已初始化用户凭据管理器
2025-05-20 10:05:57.545 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始加载历史消息...
2025-05-20 10:05:57.545 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 群组消息目录存在: D:\java-chatroom\message_store\groups
2025-05-20 10:05:57.547 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现群组消息文件: public.dat
2025-05-20 10:05:57.547 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\groups\public.dat
2025-05-20 10:05:57.550 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 5 条
2025-05-20 10:05:57.551 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public 的 5 条历史消息
2025-05-20 10:05:57.551 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现群组消息文件: public_chat_room.dat
2025-05-20 10:05:57.551 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\groups\public_chat_room.dat
2025-05-20 10:05:57.554 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 33 条
2025-05-20 10:05:57.554 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public_chat_room 的 33 条历史消息
2025-05-20 10:05:57.554 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 私聊消息目录存在: D:\java-chatroom\message_store\private
2025-05-20 10:05:57.554 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a.dat
2025-05-20 10:05:57.554 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a.dat
2025-05-20 10:05:57.555 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 3 条
2025-05-20 10:05:57.555 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a 的 3 条历史消息
2025-05-20 10:05:57.555 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09.dat
2025-05-20 10:05:57.555 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09.dat
2025-05-20 10:05:57.556 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 1 条
2025-05-20 10:05:57.556 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09 的 1 条历史消息
2025-05-20 10:05:57.556 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 历史消息加载完成，群组消息数: 2, 私聊消息数: 2
2025-05-20 10:05:57.556 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 消息存储服务初始化完成，存储路径: D:\java-chatroom\message_store
2025-05-20 10:05:57.557 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 服务器已启动: 10.29.183.159:9999
2025-05-20 10:05:57.557 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 10:05:57.559 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 10:06:01.985 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:06:03.215 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:06:04.534 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 10:06:04.536 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:10692
2025-05-20 10:06:04.537 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:06:04.538 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:06:04.541 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='2fa2483e-cdcc-45e2-911e-4696c01a38ad', type=LOGIN, sender=null, timestamp=1747706764539}
2025-05-20 10:06:04.544 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 10:06:04.545 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@8b814fe
2025-05-20 10:06:04.546 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:06:04.547 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 10:06:04.548 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 10:06:04.548 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:06:04.550 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:06:04.552 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:06:04.553 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:06:04.553 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 1
2025-05-20 10:06:04.553 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:06:04.615 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:06:04.615 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:06:04.615 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:06:04.615 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:06:04.616 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='7d60e596-fb6d-42e0-a994-60a7179ab2f9', requestId='8a50f077-4624-431e-b54c-a35fc74d4579', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706764616}
2025-05-20 10:06:04.619 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='7d60e596-fb6d-42e0-a994-60a7179ab2f9', requestId='8a50f077-4624-431e-b54c-a35fc74d4579', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706764616}
2025-05-20 10:06:04.621 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:06:04.622 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 10:06:04.623 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取私聊消息: userId1=1fc8f07f-acd6-4f64-8ae9-e5ebee50ee4c, userId2=public, sessionKey=1fc8f07f-acd6-4f64-8ae9-e5ebee50ee4c_public, limit=50
2025-05-20 10:06:04.623 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 当前缓存中的私聊消息: [0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09]
2025-05-20 10:06:04.623 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到会话 1fc8f07f-acd6-4f64-8ae9-e5ebee50ee4c_public 的 0 条消息
2025-05-20 10:06:04.623 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回会话 1fc8f07f-acd6-4f64-8ae9-e5ebee50ee4c_public 的全部 0 条消息
2025-05-20 10:06:04.623 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 10:06:04.625 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 0 条
2025-05-20 10:06:04.626 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 0 条
2025-05-20 10:06:04.664 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:06:04.665 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:06:04.665 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:06:04.665 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:06:13.347 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-20 10:06:13.349 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:10700
2025-05-20 10:06:13.350 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:06:13.351 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:06:13.353 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='ba6567a3-1aca-416b-aae1-7278a850cc90', type=LOGIN, sender=null, timestamp=1747706773352}
2025-05-20 10:06:13.353 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-20 10:06:13.354 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@2a870fa8
2025-05-20 10:06:13.354 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:06:13.354 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已登录
2025-05-20 10:06:13.355 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已将用户 2 添加到公共聊天室
2025-05-20 10:06:13.355 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:06:13.355 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]2 已登录, 是否群消息=false
2025-05-20 10:06:13.355 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:06:13.356 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]2 已登录
2025-05-20 10:06:13.356 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:06:13.356 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 2 已登录, 立即刷新用户列表
2025-05-20 10:06:13.357 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:06:13.358 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='6f7f0117-a213-413e-8862-43338846ff93', requestId='de61a7d4-8698-4463-9dee-afe6fde81d6b', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706773358}
2025-05-20 10:06:13.359 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:06:13.360 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:06:13.360 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 2
2025-05-20 10:06:13.360 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:06:13.390 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:06:13.391 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:06:13.424 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:06:13.425 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:06:13.425 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:06:13.425 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:06:13.425 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='3d9ff956-6c7f-414f-8e12-b062f32efe25', requestId='c9d2d621-5c9a-4581-9697-229fb44ca6ea', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706773425}
2025-05-20 10:06:13.431 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='4349d9c2-163e-42d8-aaf8-07ea902aa013', requestId='8e0f17c0-48a4-4eae-a1e1-4c99903b5087', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706773426}
2025-05-20 10:06:13.435 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:06:13.436 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:06:13.436 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取私聊消息: userId1=bf9746b4-9988-4c88-894a-d9b15f35c14a, userId2=public, sessionKey=bf9746b4-9988-4c88-894a-d9b15f35c14a_public, limit=50
2025-05-20 10:06:13.436 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 当前缓存中的私聊消息: [0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09]
2025-05-20 10:06:13.436 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到会话 bf9746b4-9988-4c88-894a-d9b15f35c14a_public 的 0 条消息
2025-05-20 10:06:13.436 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回会话 bf9746b4-9988-4c88-894a-d9b15f35c14a_public 的全部 0 条消息
2025-05-20 10:06:13.436 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 10:06:13.437 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 0 条
2025-05-20 10:06:13.438 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 0 条
2025-05-20 10:06:13.473 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:06:13.473 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:06:13.473 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:06:13.473 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:06:14.297 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-20 10:06:14.303 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=1
2025-05-20 10:06:14.303 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 1 的新聊天窗口
2025-05-20 10:06:14.305 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:06:14.305 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取私聊消息: userId1=bf9746b4-9988-4c88-894a-d9b15f35c14a, userId2=1fc8f07f-acd6-4f64-8ae9-e5ebee50ee4c, sessionKey=1fc8f07f-acd6-4f64-8ae9-e5ebee50ee4c_bf9746b4-9988-4c88-894a-d9b15f35c14a, limit=50
2025-05-20 10:06:14.305 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 当前缓存中的私聊消息: [0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09]
2025-05-20 10:06:14.305 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到会话 1fc8f07f-acd6-4f64-8ae9-e5ebee50ee4c_bf9746b4-9988-4c88-894a-d9b15f35c14a 的 0 条消息
2025-05-20 10:06:14.305 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回会话 1fc8f07f-acd6-4f64-8ae9-e5ebee50ee4c_bf9746b4-9988-4c88-894a-d9b15f35c14a 的全部 0 条消息
2025-05-20 10:06:14.305 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 10:06:14.306 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 0 条
2025-05-20 10:06:14.306 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 0 条
2025-05-20 10:06:43.436 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:06:43.437 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='b5548680-e6ae-4221-a897-962f2ed357ac', requestId='86e0a3e9-acbd-407b-907a-c2b958ad39d5', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706803437}
2025-05-20 10:06:43.437 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:06:43.438 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:07:04.637 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:07:04.638 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='8386dbe5-23a0-42c7-9508-3e26c4b33c02', requestId='01cccf2c-81d3-4daf-a6b1-c1a10a6e34db', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706824638}
2025-05-20 10:07:04.639 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:07:04.639 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:07:13.440 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:07:13.442 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='2541335f-be51-4428-bfd7-faa568cd41bd', requestId='70c8bc7b-ce11-42b0-941c-e82886d41c2e', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706833442}
2025-05-20 10:07:13.443 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:07:13.444 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:07:34.653 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:07:34.654 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='f31d73f2-d57c-481b-bfbe-cced3ec65e69', requestId='b2c52982-13a7-4aeb-94e8-5204058af014', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706854654}
2025-05-20 10:07:34.654 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:07:34.654 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:07:43.452 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:07:43.453 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='4dcf0cf4-c46e-46d2-8c20-652c289c740f', requestId='ccf5a76e-1499-41f8-aa5a-a5f7ab3960e8', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706863452}
2025-05-20 10:07:43.453 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:07:43.453 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:08:04.653 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:08:04.655 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='def2ff54-2fa0-456a-b929-c581afb38570', requestId='16a502d8-f102-463f-b804-5f9936042703', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706884655}
2025-05-20 10:08:04.656 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:08:04.657 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:08:13.464 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:08:13.465 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='2acf0cb4-940b-4bd1-b961-4c2a7ef35297', requestId='df96e3c1-8598-482b-bd7a-9846a4a0eb66', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706893465}
2025-05-20 10:08:13.465 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:08:13.465 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:08:25.294 [pool-1-thread-1] ERROR com.chatroom.client.MessageHandler - 读取数据时出错: Connection reset
2025-05-20 10:08:25.294 [pool-1-thread-1] ERROR com.chatroom.client.MessageHandler - 读取数据时出错: Connection reset
2025-05-20 10:08:25.294 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:08:25.294 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:08:27.987 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-20 10:08:27.987 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 断开连接时出错: Socket closed
2025-05-20 10:08:30.413 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-20 10:08:30.414 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 断开连接时出错: Socket closed
2025-05-20 10:08:43.165 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-20 10:08:44.138 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-20 10:08:44.139 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 已加载 3 个用户凭据
2025-05-20 10:08:44.139 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 已初始化用户凭据管理器
2025-05-20 10:08:44.140 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始加载历史消息...
2025-05-20 10:08:44.140 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 群组消息目录存在: D:\java-chatroom\message_store\groups
2025-05-20 10:08:44.141 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现群组消息文件: public.dat
2025-05-20 10:08:44.141 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\groups\public.dat
2025-05-20 10:08:44.145 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 5 条
2025-05-20 10:08:44.145 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public 的 5 条历史消息
2025-05-20 10:08:44.145 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现群组消息文件: public_chat_room.dat
2025-05-20 10:08:44.145 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\groups\public_chat_room.dat
2025-05-20 10:08:44.148 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 33 条
2025-05-20 10:08:44.148 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public_chat_room 的 33 条历史消息
2025-05-20 10:08:44.148 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 私聊消息目录存在: D:\java-chatroom\message_store\private
2025-05-20 10:08:44.149 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a.dat
2025-05-20 10:08:44.149 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a.dat
2025-05-20 10:08:44.150 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 3 条
2025-05-20 10:08:44.150 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a 的 3 条历史消息
2025-05-20 10:08:44.150 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09.dat
2025-05-20 10:08:44.150 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09.dat
2025-05-20 10:08:44.151 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 1 条
2025-05-20 10:08:44.151 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09 的 1 条历史消息
2025-05-20 10:08:44.151 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 历史消息加载完成，群组消息数: 2, 私聊消息数: 2
2025-05-20 10:08:44.151 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 消息存储服务初始化完成，存储路径: D:\java-chatroom\message_store
2025-05-20 10:08:44.152 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 服务器已启动: 10.29.183.159:9999
2025-05-20 10:08:44.153 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 10:08:44.158 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 10:08:48.090 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:08:51.983 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:08:53.181 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:08:55.165 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 10:08:55.167 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:13716
2025-05-20 10:08:55.169 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:08:55.169 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:08:55.172 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='dd848290-f15b-44da-8569-54d816a16383', type=LOGIN, sender=null, timestamp=1747706935171}
2025-05-20 10:08:55.175 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 10:08:55.176 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@8b814fe
2025-05-20 10:08:55.177 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:08:55.178 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 10:08:55.180 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 10:08:55.181 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:08:55.183 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:08:55.185 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:08:55.186 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:08:55.186 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 1
2025-05-20 10:08:55.186 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:08:55.243 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:08:55.244 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:08:55.244 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:08:55.244 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:08:55.245 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='f866aac9-c231-485e-8bbe-75f84fa98d6c', requestId='3b9928f4-c6c5-4c3d-b4a1-8077dc6382f4', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706935245}
2025-05-20 10:08:55.249 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='f866aac9-c231-485e-8bbe-75f84fa98d6c', requestId='3b9928f4-c6c5-4c3d-b4a1-8077dc6382f4', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706935245}
2025-05-20 10:08:55.251 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:08:55.252 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 10:08:55.252 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:08:55.252 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:08:55.252 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:08:55.253 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:08:55.253 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:08:55.253 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:08:55.254 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:08:55.255 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:08:55.256 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:08:55.256 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:08:55.256 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:08:55.256 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:08:55.256 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:08:55.294 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:08:55.295 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:08:55.295 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:08:55.295 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:09:02.717 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-20 10:09:02.719 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:13730
2025-05-20 10:09:02.720 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:09:02.721 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:09:02.723 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='33f5434a-7fdc-4b87-bf31-2e5b7214f4fc', type=LOGIN, sender=null, timestamp=1747706942722}
2025-05-20 10:09:02.723 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-20 10:09:02.724 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@702c3258
2025-05-20 10:09:02.724 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:09:02.724 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已登录
2025-05-20 10:09:02.725 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已将用户 2 添加到公共聊天室
2025-05-20 10:09:02.725 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:09:02.725 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]2 已登录, 是否群消息=false
2025-05-20 10:09:02.726 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]2 已登录
2025-05-20 10:09:02.726 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:09:02.726 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 2 已登录, 立即刷新用户列表
2025-05-20 10:09:02.726 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:09:02.727 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:09:02.728 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='6915f40f-6ce7-4be5-98db-081a37953759', requestId='d0c20b84-7c6b-4de0-b9e6-d1bbfde9bbdf', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706942727}
2025-05-20 10:09:02.730 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:09:02.730 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:09:02.731 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 2
2025-05-20 10:09:02.731 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:09:02.755 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:09:02.755 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:09:02.799 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:09:02.800 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:09:02.800 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:09:02.801 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:09:02.801 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='9c4243cf-1e42-4e7b-a227-2eaada74cb00', requestId='beb7a61e-ef87-41b9-a17d-135b4994ca3a', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706942800}
2025-05-20 10:09:02.804 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='9c4243cf-1e42-4e7b-a227-2eaada74cb00', requestId='beb7a61e-ef87-41b9-a17d-135b4994ca3a', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706942800}
2025-05-20 10:09:02.806 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:09:02.807 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:09:02.808 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:09:02.808 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:09:02.808 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:09:02.808 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:09:02.808 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:09:02.808 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:09:02.809 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:09:02.810 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:09:02.811 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:09:02.811 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:09:02.811 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:09:02.811 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:09:02.811 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:09:02.846 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:09:02.847 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:09:02.847 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:09:02.847 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:09:05.054 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-20 10:09:05.061 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=1
2025-05-20 10:09:05.061 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 1 的新聊天窗口
2025-05-20 10:09:05.062 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:09:05.062 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取私聊历史消息: targetId=69b86457-6017-4f0c-bb67-a9a1f39af319
2025-05-20 10:09:05.062 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取私聊消息: userId1=1304ab0a-3af7-47ad-aadb-3eca30a27620, userId2=69b86457-6017-4f0c-bb67-a9a1f39af319, sessionKey=1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319, limit=50
2025-05-20 10:09:05.062 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 当前缓存中的私聊消息: [0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09]
2025-05-20 10:09:05.062 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到会话 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319 的 0 条消息
2025-05-20 10:09:05.062 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回会话 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319 的全部 0 条消息
2025-05-20 10:09:05.062 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 10:09:05.063 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 0 条
2025-05-20 10:09:05.063 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 0 条
2025-05-20 10:09:06.547 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 2 的聊天窗口
2025-05-20 10:09:06.553 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=2
2025-05-20 10:09:06.553 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 2 的新聊天窗口
2025-05-20 10:09:06.553 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 10:09:06.553 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取私聊历史消息: targetId=1304ab0a-3af7-47ad-aadb-3eca30a27620
2025-05-20 10:09:06.553 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取私聊消息: userId1=69b86457-6017-4f0c-bb67-a9a1f39af319, userId2=1304ab0a-3af7-47ad-aadb-3eca30a27620, sessionKey=1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319, limit=50
2025-05-20 10:09:06.554 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 当前缓存中的私聊消息: [0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09]
2025-05-20 10:09:06.554 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到会话 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319 的 0 条消息
2025-05-20 10:09:06.554 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回会话 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319 的全部 0 条消息
2025-05-20 10:09:06.554 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 10:09:06.554 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 0 条
2025-05-20 10:09:06.554 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 0 条
2025-05-20 10:09:11.613 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=69b86457-6017-4f0c-bb67-a9a1f39af319, 内容=111
2025-05-20 10:09:11.613 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=69b86457-6017-4f0c-bb67-a9a1f39af319, 内容=111, 是否群消息=false
2025-05-20 10:09:11.613 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 69b86457-6017-4f0c-bb67-a9a1f39af319
2025-05-20 10:09:11.614 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 存储私聊消息: sessionKey=1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319, sender=2, receiver=69b86457-6017-4f0c-bb67-a9a1f39af319, content=111
2025-05-20 10:09:11.614 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=69b86457-6017-4f0c-bb67-a9a1f39af319, 内容=111, 是否群消息=false
2025-05-20 10:09:11.617 [Thread-2] INFO  c.c.s.service.MessageStoreService - 开始异步保存私聊消息到文件: D:\java-chatroom\message_store\private\1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319.dat
2025-05-20 10:09:11.620 [Thread-2] INFO  c.c.s.service.MessageStoreService - 私聊消息保存完成
2025-05-20 10:09:13.577 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=1, 接收者=1304ab0a-3af7-47ad-aadb-3eca30a27620, 内容=2222
2025-05-20 10:09:13.577 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=1304ab0a-3af7-47ad-aadb-3eca30a27620, 内容=2222, 是否群消息=false
2025-05-20 10:09:13.577 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 1304ab0a-3af7-47ad-aadb-3eca30a27620
2025-05-20 10:09:13.578 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 存储私聊消息: sessionKey=1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319, sender=1, receiver=1304ab0a-3af7-47ad-aadb-3eca30a27620, content=2222
2025-05-20 10:09:13.578 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=1304ab0a-3af7-47ad-aadb-3eca30a27620, 内容=2222, 是否群消息=false
2025-05-20 10:09:13.579 [Thread-3] INFO  c.c.s.service.MessageStoreService - 开始异步保存私聊消息到文件: D:\java-chatroom\message_store\private\1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319.dat
2025-05-20 10:09:13.579 [Thread-3] INFO  c.c.s.service.MessageStoreService - 私聊消息保存完成
2025-05-20 10:09:32.806 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:09:32.807 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='f2b1b0ad-c81d-46d3-92d1-cc1c0b083678', requestId='d8d8774d-049c-44c8-a38d-c039b1ee5678', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706972807}
2025-05-20 10:09:32.807 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:09:32.808 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:09:55.252 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:09:55.254 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='a9de1241-8637-43e4-815e-b7d05244b39d', requestId='8c53e9a8-88a8-4098-a2e1-b1ba959161d1', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747706995253}
2025-05-20 10:09:55.254 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:09:55.254 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:10:02.820 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:10:02.822 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='a87ee1bf-41d2-416e-8986-ff241abb210e', requestId='3349836d-33c1-4fcc-8a23-15f6609d0238', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707002821}
2025-05-20 10:10:02.822 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:10:02.822 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:10:25.261 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:10:25.262 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='7ce9f4b8-705e-427e-9aea-ec2dd1c27489', requestId='656dc6b1-6bf1-44ef-8d66-2d61e0bcd998', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707025261}
2025-05-20 10:10:25.262 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:10:25.262 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:10:32.834 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:10:32.836 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='27f7d06c-0ae9-4111-8486-efd9954c11c5', requestId='bd895fad-ac26-448e-bfda-b3abf5de9725', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707032836}
2025-05-20 10:10:32.836 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:10:32.836 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:10:55.271 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:10:55.272 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='bfb0794e-ec3d-4e49-b87b-a1e641497b88', requestId='ab134482-2526-410c-98ba-22e6d86bc08d', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707055271}
2025-05-20 10:10:55.272 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:10:55.272 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:11:02.836 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:11:02.837 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='64882657-524b-492a-bc74-c138dd2e8f04', requestId='6aedbea9-649b-4697-960f-07d82b733f12', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707062837}
2025-05-20 10:11:02.838 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:11:02.838 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:11:06.466 [pool-1-thread-1] ERROR com.chatroom.client.MessageHandler - 读取数据时出错: Connection reset
2025-05-20 10:11:06.466 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:11:06.467 [pool-1-thread-1] ERROR com.chatroom.client.MessageHandler - 读取数据时出错: Connection reset
2025-05-20 10:11:06.467 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:11:08.263 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-20 10:11:08.263 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 断开连接时出错: Socket closed
2025-05-20 10:11:10.893 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-20 10:11:10.893 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 断开连接时出错: Socket closed
2025-05-20 10:11:19.961 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-20 10:11:21.681 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-20 10:11:21.682 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 已加载 3 个用户凭据
2025-05-20 10:11:21.683 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 已初始化用户凭据管理器
2025-05-20 10:11:21.683 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始加载历史消息...
2025-05-20 10:11:21.683 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 群组消息目录存在: D:\java-chatroom\message_store\groups
2025-05-20 10:11:21.684 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现群组消息文件: public.dat
2025-05-20 10:11:21.684 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\groups\public.dat
2025-05-20 10:11:21.688 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 5 条
2025-05-20 10:11:21.688 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public 的 5 条历史消息
2025-05-20 10:11:21.688 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现群组消息文件: public_chat_room.dat
2025-05-20 10:11:21.688 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\groups\public_chat_room.dat
2025-05-20 10:11:21.692 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 33 条
2025-05-20 10:11:21.692 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public_chat_room 的 33 条历史消息
2025-05-20 10:11:21.692 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 私聊消息目录存在: D:\java-chatroom\message_store\private
2025-05-20 10:11:21.692 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a.dat
2025-05-20 10:11:21.692 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a.dat
2025-05-20 10:11:21.693 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 3 条
2025-05-20 10:11:21.693 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a 的 3 条历史消息
2025-05-20 10:11:21.693 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319.dat
2025-05-20 10:11:21.693 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319.dat
2025-05-20 10:11:21.694 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 2 条
2025-05-20 10:11:21.694 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319 的 2 条历史消息
2025-05-20 10:11:21.694 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09.dat
2025-05-20 10:11:21.694 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09.dat
2025-05-20 10:11:21.695 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 1 条
2025-05-20 10:11:21.695 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09 的 1 条历史消息
2025-05-20 10:11:21.695 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 历史消息加载完成，群组消息数: 2, 私聊消息数: 3
2025-05-20 10:11:21.695 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 消息存储服务初始化完成，存储路径: D:\java-chatroom\message_store
2025-05-20 10:11:21.697 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 服务器已启动: 10.29.183.159:9999
2025-05-20 10:11:21.698 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 10:11:21.702 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 10:11:50.453 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:11:54.375 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:11:55.624 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:11:58.030 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 10:11:58.031 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:14031
2025-05-20 10:11:58.033 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:11:58.034 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:11:58.038 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='9858a74c-7037-4f90-844b-939655572a00', type=LOGIN, sender=null, timestamp=1747707118035}
2025-05-20 10:11:58.040 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 10:11:58.041 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@8037cd5
2025-05-20 10:11:58.041 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:11:58.041 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 10:11:58.042 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 10:11:58.043 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:11:58.045 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:11:58.047 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:11:58.048 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:11:58.048 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 1
2025-05-20 10:11:58.048 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:11:58.103 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:11:58.103 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:11:58.103 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:11:58.105 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:11:58.105 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='fffcfefd-b161-425f-8c55-b815b348530c', requestId='578f5c84-ad1a-47ec-b6f4-ebbf4051b2eb', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707118105}
2025-05-20 10:11:58.109 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='fffcfefd-b161-425f-8c55-b815b348530c', requestId='578f5c84-ad1a-47ec-b6f4-ebbf4051b2eb', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707118105}
2025-05-20 10:11:58.112 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:11:58.114 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 10:11:58.114 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:11:58.114 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:11:58.114 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:11:58.114 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:11:58.114 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:11:58.114 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:11:58.116 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:11:58.117 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:11:58.118 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:11:58.119 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:11:58.119 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:11:58.119 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:11:58.119 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:11:58.153 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:11:58.154 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:11:58.154 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:11:58.154 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:12:04.219 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-20 10:12:04.222 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:14042
2025-05-20 10:12:04.222 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:12:04.223 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:12:04.225 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='b90a604f-18f8-43d4-95f5-de1dbb2ae0ed', type=LOGIN, sender=null, timestamp=1747707124224}
2025-05-20 10:12:04.225 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-20 10:12:04.226 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@52e9df80
2025-05-20 10:12:04.226 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:12:04.226 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已登录
2025-05-20 10:12:04.227 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已将用户 2 添加到公共聊天室
2025-05-20 10:12:04.227 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:12:04.227 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]2 已登录, 是否群消息=false
2025-05-20 10:12:04.227 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]2 已登录
2025-05-20 10:12:04.227 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 2 已登录, 立即刷新用户列表
2025-05-20 10:12:04.227 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:12:04.227 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:12:04.228 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:12:04.229 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='424b22d0-8f23-4aac-908d-c20171d7e133', requestId='ff6aa847-bc81-488f-92d9-e31234384246', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707124229}
2025-05-20 10:12:04.231 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:12:04.232 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:12:04.232 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 2
2025-05-20 10:12:04.232 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:12:04.260 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:12:04.260 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:12:04.297 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:12:04.299 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:12:04.299 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:12:04.299 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:12:04.299 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='9c366cf9-557a-4daa-be1d-7dc69e9c4940', requestId='43ba3cd7-4031-4296-ab9e-50c789e4aa3d', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707124299}
2025-05-20 10:12:04.305 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='5e4869ca-07ae-4599-9d32-f16aa92ca9aa', requestId='65486da2-c1a8-4c84-bb63-f33af1c0ed40', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707124300}
2025-05-20 10:12:04.307 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:12:04.308 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:12:04.308 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:12:04.308 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:12:04.308 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:12:04.308 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:12:04.308 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:12:04.308 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:12:04.310 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:12:04.310 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:12:04.311 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:12:04.311 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:12:04.311 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:12:04.311 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:12:04.311 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:12:04.355 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:12:04.356 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:12:04.356 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:12:04.356 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:12:06.030 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-20 10:12:06.037 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=1
2025-05-20 10:12:06.037 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 1 的新聊天窗口
2025-05-20 10:12:06.037 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:12:06.038 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取私聊历史消息: targetId=c1865caa-6d9a-44c1-8e4b-bd08bcd8029b
2025-05-20 10:12:06.038 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取私聊消息: userId1=3ba4d281-eb67-4770-b203-7ba5e50f92dc, userId2=c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, sessionKey=3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, limit=50
2025-05-20 10:12:06.038 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 当前缓存中的私聊消息: [0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319]
2025-05-20 10:12:06.038 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到会话 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b 的 0 条消息
2025-05-20 10:12:06.038 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回会话 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b 的全部 0 条消息
2025-05-20 10:12:06.038 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 10:12:06.038 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 0 条
2025-05-20 10:12:06.038 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 0 条
2025-05-20 10:12:34.310 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:12:34.311 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='9eb538f2-5758-4cee-83bb-306d7d47334d', requestId='f1c43f1e-3be2-44d2-bf85-0f1d6a03013a', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707154311}
2025-05-20 10:12:34.311 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:12:34.312 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:12:58.127 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:12:58.128 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='4b338a52-7815-43f3-89c6-a7bc9f4c3fab', requestId='9b952626-4ac4-4e5e-92a0-6d791231d61f', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707178128}
2025-05-20 10:12:58.129 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:12:58.129 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:13:04.311 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:13:04.312 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='031d0369-09e1-45f3-ab32-042ecc55dc2f', requestId='8cf922a8-67da-4a40-9334-11b81b62c19a', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707184311}
2025-05-20 10:13:04.312 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:13:04.312 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:13:17.704 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, 内容=11111, 是否群消息=false
2025-05-20 10:13:17.704 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, 内容=11111
2025-05-20 10:13:17.704 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: c1865caa-6d9a-44c1-8e4b-bd08bcd8029b
2025-05-20 10:13:17.704 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 存储私聊消息: sessionKey=3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, sender=2, receiver=c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, content=11111
2025-05-20 10:13:17.704 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, 内容=11111, 是否群消息=false
2025-05-20 10:13:17.704 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 2 的聊天窗口
2025-05-20 10:13:17.707 [Thread-2] INFO  c.c.s.service.MessageStoreService - 开始异步保存私聊消息到文件: D:\java-chatroom\message_store\private\3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b.dat
2025-05-20 10:13:17.710 [Thread-2] INFO  c.c.s.service.MessageStoreService - 私聊消息保存完成
2025-05-20 10:13:17.711 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=2
2025-05-20 10:13:17.711 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 2 的新聊天窗口
2025-05-20 10:13:17.711 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 10:13:17.712 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取私聊历史消息: targetId=3ba4d281-eb67-4770-b203-7ba5e50f92dc
2025-05-20 10:13:17.712 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取私聊消息: userId1=c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, userId2=3ba4d281-eb67-4770-b203-7ba5e50f92dc, sessionKey=3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, limit=50
2025-05-20 10:13:17.712 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 当前缓存中的私聊消息: [3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319]
2025-05-20 10:13:17.712 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到会话 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b 的 1 条消息
2025-05-20 10:13:17.712 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回会话 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b 的全部 1 条消息
2025-05-20 10:13:17.712 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 1 条
2025-05-20 10:13:17.713 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 1 条
2025-05-20 10:13:17.713 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 1 条
2025-05-20 10:13:28.133 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:13:28.134 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='a41dfd7e-c59e-416b-a212-34b65edacd01', requestId='78ad3967-6577-4cef-b438-f7592c64c8a9', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707208134}
2025-05-20 10:13:28.134 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:13:28.134 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:13:32.177 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=3ba4d281-eb67-4770-b203-7ba5e50f92dc, 内容=22222, 是否群消息=false
2025-05-20 10:13:32.177 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=1, 接收者=3ba4d281-eb67-4770-b203-7ba5e50f92dc, 内容=22222
2025-05-20 10:13:32.177 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 3ba4d281-eb67-4770-b203-7ba5e50f92dc
2025-05-20 10:13:32.178 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 存储私聊消息: sessionKey=3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, sender=1, receiver=3ba4d281-eb67-4770-b203-7ba5e50f92dc, content=22222
2025-05-20 10:13:32.178 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=3ba4d281-eb67-4770-b203-7ba5e50f92dc, 内容=22222, 是否群消息=false
2025-05-20 10:13:32.178 [Thread-3] INFO  c.c.s.service.MessageStoreService - 开始异步保存私聊消息到文件: D:\java-chatroom\message_store\private\3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b.dat
2025-05-20 10:13:32.179 [Thread-3] INFO  c.c.s.service.MessageStoreService - 私聊消息保存完成
2025-05-20 10:13:34.321 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:13:34.322 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='bec880df-4ef9-4b3b-9b15-98e32ef7c78f', requestId='d6e19fb9-5165-496c-a779-650a7b23052c', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707214322}
2025-05-20 10:13:34.322 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:13:34.322 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:13:37.856 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, 内容=111111
2025-05-20 10:13:37.856 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: c1865caa-6d9a-44c1-8e4b-bd08bcd8029b
2025-05-20 10:13:37.856 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, 内容=111111, 是否群消息=false
2025-05-20 10:13:37.857 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 存储私聊消息: sessionKey=3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, sender=2, receiver=c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, content=111111
2025-05-20 10:13:37.857 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, 内容=111111, 是否群消息=false
2025-05-20 10:13:37.857 [Thread-4] INFO  c.c.s.service.MessageStoreService - 开始异步保存私聊消息到文件: D:\java-chatroom\message_store\private\3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b.dat
2025-05-20 10:13:37.858 [Thread-4] INFO  c.c.s.service.MessageStoreService - 私聊消息保存完成
2025-05-20 10:13:42.270 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=1, 接收者=3ba4d281-eb67-4770-b203-7ba5e50f92dc, 内容=2222222
2025-05-20 10:13:42.270 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=3ba4d281-eb67-4770-b203-7ba5e50f92dc, 内容=2222222, 是否群消息=false
2025-05-20 10:13:42.270 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 3ba4d281-eb67-4770-b203-7ba5e50f92dc
2025-05-20 10:13:42.270 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 存储私聊消息: sessionKey=3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, sender=1, receiver=3ba4d281-eb67-4770-b203-7ba5e50f92dc, content=2222222
2025-05-20 10:13:42.270 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=3ba4d281-eb67-4770-b203-7ba5e50f92dc, 内容=2222222, 是否群消息=false
2025-05-20 10:13:42.271 [Thread-5] INFO  c.c.s.service.MessageStoreService - 开始异步保存私聊消息到文件: D:\java-chatroom\message_store\private\3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b.dat
2025-05-20 10:13:42.272 [Thread-5] INFO  c.c.s.service.MessageStoreService - 私聊消息保存完成
2025-05-20 10:13:45.293 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:13:45.294 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 1
2025-05-20 10:13:45.294 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:13:45.293 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=1 已离开聊天室, 是否群消息=false
2025-05-20 10:13:45.294 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-20 10:13:45.294 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]用户离线: 1, 是否群消息=false
2025-05-20 10:13:45.294 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]用户离线: 1
2025-05-20 10:13:45.294 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 用户离线: 1, 立即刷新用户列表
2025-05-20 10:13:45.294 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:13:45.299 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:13:45.303 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:13:45.303 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:13:45.314 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:13:45.314 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='17e41ad3-776b-4ae0-9ccc-6878f81100dd', requestId='3494ee5c-73da-4066-8432-19eafd1038a2', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707225314}
2025-05-20 10:13:45.332 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:13:45.332 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:13:46.947 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 2
2025-05-20 10:13:46.947 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:13:46.947 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 2 已从群组 公共聊天室 中移除
2025-05-20 10:13:46.948 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:13:46.948 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:13:46.948 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:13:46.948 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:13:57.236 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-20 10:13:58.218 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-20 10:13:58.220 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 已加载 3 个用户凭据
2025-05-20 10:13:58.220 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 已初始化用户凭据管理器
2025-05-20 10:13:58.221 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始加载历史消息...
2025-05-20 10:13:58.221 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 群组消息目录存在: D:\java-chatroom\message_store\groups
2025-05-20 10:13:58.222 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现群组消息文件: public.dat
2025-05-20 10:13:58.222 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\groups\public.dat
2025-05-20 10:13:58.225 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 5 条
2025-05-20 10:13:58.225 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public 的 5 条历史消息
2025-05-20 10:13:58.225 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现群组消息文件: public_chat_room.dat
2025-05-20 10:13:58.225 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\groups\public_chat_room.dat
2025-05-20 10:13:58.229 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 33 条
2025-05-20 10:13:58.229 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public_chat_room 的 33 条历史消息
2025-05-20 10:13:58.229 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 私聊消息目录存在: D:\java-chatroom\message_store\private
2025-05-20 10:13:58.229 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a.dat
2025-05-20 10:13:58.229 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a.dat
2025-05-20 10:13:58.231 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 3 条
2025-05-20 10:13:58.231 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a 的 3 条历史消息
2025-05-20 10:13:58.231 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319.dat
2025-05-20 10:13:58.231 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319.dat
2025-05-20 10:13:58.232 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 2 条
2025-05-20 10:13:58.232 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319 的 2 条历史消息
2025-05-20 10:13:58.232 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09.dat
2025-05-20 10:13:58.232 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09.dat
2025-05-20 10:13:58.233 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 1 条
2025-05-20 10:13:58.233 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09 的 1 条历史消息
2025-05-20 10:13:58.233 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b.dat
2025-05-20 10:13:58.233 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b.dat
2025-05-20 10:13:58.234 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 4 条
2025-05-20 10:13:58.234 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b 的 4 条历史消息
2025-05-20 10:13:58.234 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 历史消息加载完成，群组消息数: 2, 私聊消息数: 4
2025-05-20 10:13:58.234 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 消息存储服务初始化完成，存储路径: D:\java-chatroom\message_store
2025-05-20 10:13:58.235 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 服务器已启动: 10.29.183.159:9999
2025-05-20 10:13:58.236 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 10:13:58.239 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 10:14:02.347 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:14:03.978 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:14:04.365 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 10:14:04.366 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:14209
2025-05-20 10:14:04.368 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:14:04.369 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:14:04.372 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='a0c867fe-c626-4118-9100-e355e8f529b9', type=LOGIN, sender=null, timestamp=1747707244370}
2025-05-20 10:14:04.374 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 10:14:04.375 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@8b814fe
2025-05-20 10:14:04.376 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:14:04.377 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 10:14:04.378 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 10:14:04.378 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:14:04.380 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:14:04.382 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:14:04.383 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:14:04.383 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 1
2025-05-20 10:14:04.383 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:14:04.443 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:14:04.445 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:14:04.445 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:14:04.445 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:14:04.445 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='418a37ab-2367-4e1c-be3e-e9a652f98036', requestId='b02be12d-bcce-418b-bf14-ef9518aea3d4', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707244445}
2025-05-20 10:14:04.449 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='418a37ab-2367-4e1c-be3e-e9a652f98036', requestId='b02be12d-bcce-418b-bf14-ef9518aea3d4', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707244445}
2025-05-20 10:14:04.451 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:14:04.452 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 10:14:04.452 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:14:04.452 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:14:04.452 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:14:04.452 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:14:04.452 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:14:04.452 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:14:04.453 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:14:04.456 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:14:04.456 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:14:04.456 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:14:04.456 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:14:04.456 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:14:04.456 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:14:04.499 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:14:04.500 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:14:04.500 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:14:04.500 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:14:10.139 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-20 10:14:10.141 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:14226
2025-05-20 10:14:10.141 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:14:10.142 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:14:10.144 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='c1a713ed-3885-4a40-b409-f8ab08155623', type=LOGIN, sender=null, timestamp=1747707250143}
2025-05-20 10:14:10.144 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-20 10:14:10.144 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@2014c57f
2025-05-20 10:14:10.144 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:14:10.144 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已登录
2025-05-20 10:14:10.145 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已将用户 2 添加到公共聊天室
2025-05-20 10:14:10.145 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:14:10.145 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]2 已登录, 是否群消息=false
2025-05-20 10:14:10.145 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:14:10.145 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]2 已登录
2025-05-20 10:14:10.145 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:14:10.145 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 2 已登录, 立即刷新用户列表
2025-05-20 10:14:10.147 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:14:10.148 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='facc9e22-b73a-43b4-b705-1a3fb2ad2c70', requestId='ed9b920d-6503-451f-97ea-3c6837e32030', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707250148}
2025-05-20 10:14:10.150 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:14:10.151 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:14:10.151 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 2
2025-05-20 10:14:10.151 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:14:10.177 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:14:10.177 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:14:10.209 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:14:10.210 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:14:10.210 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:14:10.211 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:14:10.211 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='1fc7e2e3-edc3-4127-afb6-bbf1f1b7f2a2', requestId='a7d6a7fa-7a49-42e3-bb2b-d9d47780e293', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707250210}
2025-05-20 10:14:10.215 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='1fc7e2e3-edc3-4127-afb6-bbf1f1b7f2a2', requestId='a7d6a7fa-7a49-42e3-bb2b-d9d47780e293', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707250210}
2025-05-20 10:14:10.218 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:14:10.219 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:14:10.219 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:14:10.219 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:14:10.219 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:14:10.219 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:14:10.219 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:14:10.219 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:14:10.221 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:14:10.222 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:14:10.222 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:14:10.222 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:14:10.222 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:14:10.223 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:14:10.223 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:14:10.257 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:14:10.259 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:14:10.259 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:14:10.259 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:14:11.573 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-20 10:14:11.579 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=1
2025-05-20 10:14:11.580 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 1 的新聊天窗口
2025-05-20 10:14:11.580 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:14:11.580 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取私聊历史消息: targetId=da4434cc-b50a-4f77-8b9b-4770929bd9f2
2025-05-20 10:14:11.581 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取私聊消息: userId1=a3bf980f-bfde-4ee4-a4e3-fb7ccc44273e, userId2=da4434cc-b50a-4f77-8b9b-4770929bd9f2, sessionKey=a3bf980f-bfde-4ee4-a4e3-fb7ccc44273e_da4434cc-b50a-4f77-8b9b-4770929bd9f2, limit=50
2025-05-20 10:14:11.581 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 当前缓存中的私聊消息: [3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319]
2025-05-20 10:14:11.581 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到会话 a3bf980f-bfde-4ee4-a4e3-fb7ccc44273e_da4434cc-b50a-4f77-8b9b-4770929bd9f2 的 0 条消息
2025-05-20 10:14:11.581 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回会话 a3bf980f-bfde-4ee4-a4e3-fb7ccc44273e_da4434cc-b50a-4f77-8b9b-4770929bd9f2 的全部 0 条消息
2025-05-20 10:14:11.581 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 10:14:11.581 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 0 条
2025-05-20 10:14:11.581 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 0 条
2025-05-20 10:14:40.211 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:14:40.212 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='9780fc80-e82a-4191-977a-e496666b4498', requestId='ee13010c-3083-492f-8279-fe21a7973d98', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707280212}
2025-05-20 10:14:40.212 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:14:40.214 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:15:04.466 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:15:04.467 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='991135c4-f667-4195-9be9-83c8af85de2a', requestId='e9923b54-8244-4e2a-9398-b924a9716e5e', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707304467}
2025-05-20 10:15:04.467 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:15:04.467 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:15:10.225 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:15:10.226 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='f3a84c57-2790-4874-8e8e-9e1b2d7f2469', requestId='4b71a033-b83e-478a-a323-2d14ec61e281', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707310226}
2025-05-20 10:15:10.227 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:15:10.227 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:15:34.468 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:15:34.468 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='c7dc7a36-3478-4c24-854e-9854178b9c5b', requestId='7eba371d-3236-455b-bc7a-03e83dc46750', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707334468}
2025-05-20 10:15:34.469 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:15:34.469 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:15:40.235 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:15:40.236 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='41c0af18-7545-498c-8acc-375e2b6bf577', requestId='5063c9c4-33e5-4b91-8e11-545aab14bedf', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707340236}
2025-05-20 10:15:40.237 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:15:40.237 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:16:04.476 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:16:04.476 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='42eb6c31-adb0-4b5f-bae1-7517b9fef250', requestId='78229996-dca1-48b8-b93d-e5be08fe912f', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707364476}
2025-05-20 10:16:04.476 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:16:04.476 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:16:10.247 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:16:10.248 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='205da59a-c7f9-4f0f-9232-359e6d467453', requestId='d0f6f664-d61b-4303-b7f9-488cf809320c', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707370248}
2025-05-20 10:16:10.248 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:16:10.248 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:16:25.357 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:16:25.358 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 1
2025-05-20 10:16:25.358 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=1 已离开聊天室, 是否群消息=false
2025-05-20 10:16:25.358 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:16:25.358 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-20 10:16:25.358 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]用户离线: 1, 是否群消息=false
2025-05-20 10:16:25.358 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]用户离线: 1
2025-05-20 10:16:25.359 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 用户离线: 1, 立即刷新用户列表
2025-05-20 10:16:25.359 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:16:25.360 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:16:25.362 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:16:25.362 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:16:25.387 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:16:25.388 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='2022cfb2-c5d5-42f6-b523-c4423942286b', requestId='297bd7d7-de50-4afd-9577-794b99b59ac1', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707385388}
2025-05-20 10:16:25.390 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:16:25.391 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:16:28.176 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 2
2025-05-20 10:16:28.176 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:16:28.176 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 2 已从群组 公共聊天室 中移除
2025-05-20 10:16:28.177 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:16:28.177 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:16:28.177 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:16:28.177 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:16:37.457 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-20 10:16:39.339 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-20 10:16:39.341 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 已加载 3 个用户凭据
2025-05-20 10:16:39.341 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 已初始化用户凭据管理器
2025-05-20 10:16:39.342 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始加载历史消息...
2025-05-20 10:16:39.342 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 群组消息目录存在: D:\java-chatroom\message_store\groups
2025-05-20 10:16:39.342 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现群组消息文件: public.dat
2025-05-20 10:16:39.342 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\groups\public.dat
2025-05-20 10:16:39.346 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 5 条
2025-05-20 10:16:39.347 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public 的 5 条历史消息
2025-05-20 10:16:39.347 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现群组消息文件: public_chat_room.dat
2025-05-20 10:16:39.347 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\groups\public_chat_room.dat
2025-05-20 10:16:39.351 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 33 条
2025-05-20 10:16:39.351 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public_chat_room 的 33 条历史消息
2025-05-20 10:16:39.351 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 私聊消息目录存在: D:\java-chatroom\message_store\private
2025-05-20 10:16:39.351 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a.dat
2025-05-20 10:16:39.351 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a.dat
2025-05-20 10:16:39.352 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 3 条
2025-05-20 10:16:39.353 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, new=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, userId1=521c718d-0f03-46f8-9732-9a6c8b57fa9a, userId2=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d
2025-05-20 10:16:39.353 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a 的 3 条历史消息
2025-05-20 10:16:39.353 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319.dat
2025-05-20 10:16:39.353 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319.dat
2025-05-20 10:16:39.354 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 2 条
2025-05-20 10:16:39.354 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319, new=1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319, userId1=1304ab0a-3af7-47ad-aadb-3eca30a27620, userId2=69b86457-6017-4f0c-bb67-a9a1f39af319
2025-05-20 10:16:39.354 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319 的 2 条历史消息
2025-05-20 10:16:39.354 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09.dat
2025-05-20 10:16:39.354 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09.dat
2025-05-20 10:16:39.355 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 1 条
2025-05-20 10:16:39.355 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, new=2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, userId1=b4cef39b-1188-4a45-af59-43e4c9c1da09, userId2=2fbfb16f-ee5c-44f8-bd92-df51cc4e1617
2025-05-20 10:16:39.355 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09 的 1 条历史消息
2025-05-20 10:16:39.355 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b.dat
2025-05-20 10:16:39.355 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b.dat
2025-05-20 10:16:39.357 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 4 条
2025-05-20 10:16:39.357 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, new=3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, userId1=3ba4d281-eb67-4770-b203-7ba5e50f92dc, userId2=c1865caa-6d9a-44c1-8e4b-bd08bcd8029b
2025-05-20 10:16:39.357 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b 的 4 条历史消息
2025-05-20 10:16:39.357 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 历史消息加载完成，群组消息数: 2, 私聊消息数: 4
2025-05-20 10:16:39.357 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 消息存储服务初始化完成，存储路径: D:\java-chatroom\message_store
2025-05-20 10:16:39.359 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 服务器已启动: 10.29.183.159:9999
2025-05-20 10:16:39.359 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 10:16:39.362 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 10:16:43.764 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:16:45.017 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:16:45.414 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 10:16:45.416 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:14462
2025-05-20 10:16:45.418 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:16:45.418 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:16:45.421 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='5544ae71-86ce-4870-af23-894d8d97d224', type=LOGIN, sender=null, timestamp=1747707405420}
2025-05-20 10:16:45.425 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 10:16:45.427 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@36eead85
2025-05-20 10:16:45.427 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:16:45.428 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 10:16:45.429 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 10:16:45.429 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:16:45.431 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:16:45.433 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:16:45.433 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:16:45.433 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 1
2025-05-20 10:16:45.433 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:16:45.492 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:16:45.493 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:16:45.494 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:16:45.494 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:16:45.494 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='774b04c5-3443-4d01-a619-b4dc3193fabd', requestId='56b191a7-4a0a-42b8-95f3-ca21724871fe', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707405494}
2025-05-20 10:16:45.498 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='774b04c5-3443-4d01-a619-b4dc3193fabd', requestId='56b191a7-4a0a-42b8-95f3-ca21724871fe', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707405494}
2025-05-20 10:16:45.500 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:16:45.501 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 10:16:45.501 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:16:45.501 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:16:45.501 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:16:45.501 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:16:45.501 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:16:45.501 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:16:45.503 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:16:45.504 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:16:45.504 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:16:45.505 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:16:45.505 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:16:45.505 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:16:45.505 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:16:45.540 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:16:45.541 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:16:45.542 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:16:45.542 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:16:50.036 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-20 10:16:50.038 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:14470
2025-05-20 10:16:50.039 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:16:50.040 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:16:50.042 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='007fab07-ddba-4715-861b-e1abc67224d7', type=LOGIN, sender=null, timestamp=1747707410041}
2025-05-20 10:16:50.042 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-20 10:16:50.042 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@42b0f35f
2025-05-20 10:16:50.042 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:16:50.042 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已登录
2025-05-20 10:16:50.043 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已将用户 2 添加到公共聊天室
2025-05-20 10:16:50.043 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:16:50.043 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]2 已登录, 是否群消息=false
2025-05-20 10:16:50.044 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]2 已登录
2025-05-20 10:16:50.044 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:16:50.044 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:16:50.044 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 2 已登录, 立即刷新用户列表
2025-05-20 10:16:50.045 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:16:50.045 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='18194149-800e-4f0f-a95e-e6da9e02ac8c', requestId='6e150de9-7b47-47ae-8c08-b4858b2340e0', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707410045}
2025-05-20 10:16:50.047 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:16:50.047 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:16:50.048 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 2
2025-05-20 10:16:50.048 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:16:50.076 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:16:50.076 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:16:50.107 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:16:50.108 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:16:50.108 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:16:50.109 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:16:50.108 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='6e36dfc6-62e5-4d44-9398-3b735b279895', requestId='d38157aa-5d8b-443f-9592-b437f9b1d7fa', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707410108}
2025-05-20 10:16:50.111 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='1439faea-7e7e-4396-9b76-c9b863552701', requestId='2b4c0771-57e6-4a3b-86d6-18e0f5d623e4', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707410109}
2025-05-20 10:16:50.114 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:16:50.115 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:16:50.115 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:16:50.115 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:16:50.115 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:16:50.115 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:16:50.115 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:16:50.115 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:16:50.118 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:16:50.119 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:16:50.119 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:16:50.119 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:16:50.120 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:16:50.120 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:16:50.120 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:16:50.156 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:16:50.157 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:16:50.158 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:16:50.158 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:16:51.178 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-20 10:16:51.184 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=1
2025-05-20 10:16:51.184 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 1 的新聊天窗口
2025-05-20 10:16:51.185 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:16:51.185 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取私聊历史消息: targetId=6e700396-edde-4b85-9b9b-8d30c3b8ed52
2025-05-20 10:16:51.185 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取私聊消息: userId1=8f0c93e8-e594-41bc-b7b3-27cad6165393, userId2=6e700396-edde-4b85-9b9b-8d30c3b8ed52, sessionKey=6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, limit=50
2025-05-20 10:16:51.185 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 当前缓存中的私聊消息: [3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319]
2025-05-20 10:16:51.185 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到会话 6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393 的 0 条消息
2025-05-20 10:16:51.185 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回会话 6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393 的全部 0 条消息
2025-05-20 10:16:51.185 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 10:16:51.185 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 0 条
2025-05-20 10:16:51.186 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 0 条
2025-05-20 10:17:11.428 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=6e700396-edde-4b85-9b9b-8d30c3b8ed52, 内容=1111, 是否群消息=false
2025-05-20 10:17:11.428 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=6e700396-edde-4b85-9b9b-8d30c3b8ed52, 内容=1111
2025-05-20 10:17:11.428 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 6e700396-edde-4b85-9b9b-8d30c3b8ed52
2025-05-20 10:17:11.429 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 存储私聊消息: sessionKey=6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, sender=2, receiver=6e700396-edde-4b85-9b9b-8d30c3b8ed52, content=1111
2025-05-20 10:17:11.429 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=6e700396-edde-4b85-9b9b-8d30c3b8ed52, 内容=1111, 是否群消息=false
2025-05-20 10:17:11.429 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 2 的聊天窗口
2025-05-20 10:17:11.432 [Thread-2] INFO  c.c.s.service.MessageStoreService - 开始异步保存私聊消息到文件: D:\java-chatroom\message_store\private\6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393.dat
2025-05-20 10:17:11.435 [Thread-2] INFO  c.c.s.service.MessageStoreService - 私聊消息保存完成
2025-05-20 10:17:11.438 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=2
2025-05-20 10:17:11.438 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 2 的新聊天窗口
2025-05-20 10:17:11.439 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 10:17:11.439 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取私聊历史消息: targetId=8f0c93e8-e594-41bc-b7b3-27cad6165393
2025-05-20 10:17:11.439 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取私聊消息: userId1=6e700396-edde-4b85-9b9b-8d30c3b8ed52, userId2=8f0c93e8-e594-41bc-b7b3-27cad6165393, sessionKey=6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, limit=50
2025-05-20 10:17:11.439 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 当前缓存中的私聊消息: [6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319]
2025-05-20 10:17:11.439 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到会话 6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393 的 1 条消息
2025-05-20 10:17:11.439 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回会话 6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393 的全部 1 条消息
2025-05-20 10:17:11.439 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 1 条
2025-05-20 10:17:11.439 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 1 条
2025-05-20 10:17:11.439 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 1 条
2025-05-20 10:17:19.440 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=6e700396-edde-4b85-9b9b-8d30c3b8ed52, 内容=11111
2025-05-20 10:17:19.440 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=6e700396-edde-4b85-9b9b-8d30c3b8ed52, 内容=11111, 是否群消息=false
2025-05-20 10:17:19.440 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 6e700396-edde-4b85-9b9b-8d30c3b8ed52
2025-05-20 10:17:19.440 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 存储私聊消息: sessionKey=6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, sender=2, receiver=6e700396-edde-4b85-9b9b-8d30c3b8ed52, content=11111
2025-05-20 10:17:19.440 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=6e700396-edde-4b85-9b9b-8d30c3b8ed52, 内容=11111, 是否群消息=false
2025-05-20 10:17:19.441 [Thread-3] INFO  c.c.s.service.MessageStoreService - 开始异步保存私聊消息到文件: D:\java-chatroom\message_store\private\6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393.dat
2025-05-20 10:17:19.443 [Thread-3] INFO  c.c.s.service.MessageStoreService - 私聊消息保存完成
2025-05-20 10:17:20.110 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:17:20.111 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='9d34c617-38df-4f2c-9d71-2d6bd75ee642', requestId='3c035716-b660-45d2-be85-16ae4846dcb7', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707440110}
2025-05-20 10:17:20.111 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:17:20.112 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:17:24.400 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=6e700396-edde-4b85-9b9b-8d30c3b8ed52, 内容=22222, 是否群消息=false
2025-05-20 10:17:24.400 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=6e700396-edde-4b85-9b9b-8d30c3b8ed52, 内容=22222
2025-05-20 10:17:24.400 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 6e700396-edde-4b85-9b9b-8d30c3b8ed52
2025-05-20 10:17:24.400 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 存储私聊消息: sessionKey=6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, sender=2, receiver=6e700396-edde-4b85-9b9b-8d30c3b8ed52, content=22222
2025-05-20 10:17:24.400 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=6e700396-edde-4b85-9b9b-8d30c3b8ed52, 内容=22222, 是否群消息=false
2025-05-20 10:17:24.401 [Thread-4] INFO  c.c.s.service.MessageStoreService - 开始异步保存私聊消息到文件: D:\java-chatroom\message_store\private\6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393.dat
2025-05-20 10:17:24.401 [Thread-4] INFO  c.c.s.service.MessageStoreService - 私聊消息保存完成
2025-05-20 10:17:39.250 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:17:39.250 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 1
2025-05-20 10:17:39.250 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=1 已离开聊天室, 是否群消息=false
2025-05-20 10:17:39.250 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:17:39.250 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-20 10:17:39.250 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]用户离线: 1, 是否群消息=false
2025-05-20 10:17:39.251 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]用户离线: 1
2025-05-20 10:17:39.251 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 用户离线: 1, 立即刷新用户列表
2025-05-20 10:17:39.251 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:17:39.251 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:17:39.256 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='13b8d075-a0bf-44ce-8d72-adc606b96cb8', requestId='5bdf12af-9369-4f16-afed-f5316192f8b0', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707459253}
2025-05-20 10:17:39.253 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:17:39.258 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:17:39.258 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:17:39.308 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:17:39.308 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:17:41.724 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:17:41.724 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 2
2025-05-20 10:17:41.724 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 2 已从群组 公共聊天室 中移除
2025-05-20 10:17:41.724 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:17:41.725 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:17:41.725 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:17:41.725 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:17:44.631 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:17:45.875 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:17:46.862 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 10:17:46.863 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:14559
2025-05-20 10:17:46.864 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:17:46.864 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:17:46.867 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='19da3c82-9f1e-4020-b34d-25d7ae6fe6c2', type=LOGIN, sender=null, timestamp=1747707466866}
2025-05-20 10:17:46.867 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 10:17:46.867 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@51efdf59
2025-05-20 10:17:46.867 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:17:46.868 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 10:17:46.868 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 10:17:46.868 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:17:46.869 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:17:46.872 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:17:46.873 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:17:46.873 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 1
2025-05-20 10:17:46.873 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:17:46.937 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:17:46.938 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:17:46.938 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:17:46.939 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:17:46.938 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='6d8cbc92-b688-4497-ab5a-97e10894354e', requestId='f92acbec-7255-460d-8c36-2c3dd52813bd', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707466938}
2025-05-20 10:17:46.942 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='5f41baba-3cbd-41ef-9341-5dd4ac8e5580', requestId='1c56c90d-7a80-4097-88ce-8fd47a9c9538', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707466939}
2025-05-20 10:17:46.944 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:17:46.944 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 10:17:46.945 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:17:46.945 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:17:46.945 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:17:46.945 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:17:46.945 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:17:46.945 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:17:46.947 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:17:46.948 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:17:46.949 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:17:46.949 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:17:46.949 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:17:46.949 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:17:46.949 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:17:46.989 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:17:46.990 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:17:46.990 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:17:46.990 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:17:51.420 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-20 10:17:51.423 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:14563
2025-05-20 10:17:51.423 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:17:51.424 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:17:51.425 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='460940ab-b9b2-4252-830d-0cf0ef753775', type=LOGIN, sender=null, timestamp=1747707471425}
2025-05-20 10:17:51.426 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-20 10:17:51.426 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@436bfc1c
2025-05-20 10:17:51.426 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:17:51.426 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已登录
2025-05-20 10:17:51.427 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 2 添加到公共聊天室
2025-05-20 10:17:51.427 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:17:51.427 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]2 已登录, 是否群消息=false
2025-05-20 10:17:51.427 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]2 已登录
2025-05-20 10:17:51.427 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:17:51.427 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 2 已登录, 立即刷新用户列表
2025-05-20 10:17:51.427 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:17:51.428 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:17:51.429 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='60beb268-32c2-4eae-8386-bcd538a0b23d', requestId='ec2fb12c-b83b-43d0-9006-eb7c16dc5ba9', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707471429}
2025-05-20 10:17:51.431 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:17:51.432 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:17:51.432 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 2
2025-05-20 10:17:51.432 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:17:51.460 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:17:51.460 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:17:51.490 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:17:51.491 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:17:51.491 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:17:51.492 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:17:51.491 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='1ee87e05-5409-423f-a0c1-9296bf0dadef', requestId='a84aed4d-a695-4c63-99aa-16fdb707ade0', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707471491}
2025-05-20 10:17:51.495 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='0e21ac39-b5c6-41f1-b1ca-d614aaa5de78', requestId='75dde3a5-3cbf-4ac7-9791-15ad898df068', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707471492}
2025-05-20 10:17:51.498 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:17:51.499 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:17:51.499 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:17:51.499 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:17:51.499 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:17:51.499 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:17:51.499 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:17:51.499 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:17:51.500 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:17:51.501 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:17:51.502 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:17:51.502 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:17:51.502 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:17:51.502 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:17:51.502 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:17:51.554 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:17:51.555 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:17:51.555 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:17:51.555 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:17:52.242 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-20 10:17:52.250 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=1
2025-05-20 10:17:52.250 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 1 的新聊天窗口
2025-05-20 10:17:52.250 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:17:52.250 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取私聊历史消息: targetId=51d476f5-39b1-4a97-a9a4-e65a8d21266c
2025-05-20 10:17:52.250 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取私聊消息: userId1=a218ced6-5867-4c20-a1b1-8cfb997850b2, userId2=51d476f5-39b1-4a97-a9a4-e65a8d21266c, sessionKey=51d476f5-39b1-4a97-a9a4-e65a8d21266c_a218ced6-5867-4c20-a1b1-8cfb997850b2, limit=50
2025-05-20 10:17:52.250 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 当前缓存中的私聊消息: [6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319]
2025-05-20 10:17:52.250 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到会话 51d476f5-39b1-4a97-a9a4-e65a8d21266c_a218ced6-5867-4c20-a1b1-8cfb997850b2 的 0 条消息
2025-05-20 10:17:52.250 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回会话 51d476f5-39b1-4a97-a9a4-e65a8d21266c_a218ced6-5867-4c20-a1b1-8cfb997850b2 的全部 0 条消息
2025-05-20 10:17:52.250 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 10:17:52.250 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 0 条
2025-05-20 10:17:52.250 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 0 条
2025-05-20 10:18:21.498 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:18:21.499 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='2ed25cdd-7430-440d-90a7-45fe313f282e', requestId='8b779d63-0fa3-4ef8-b603-0ee30030eac5', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707501499}
2025-05-20 10:18:21.499 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:18:21.500 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:18:46.957 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:18:46.958 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='4e493892-07f5-4a95-be8d-7bb5c4e879e2', requestId='e8af3432-fc87-46c1-83f4-821294ac7583', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707526958}
2025-05-20 10:18:46.958 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:18:46.958 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:18:51.499 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:18:51.500 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='cafc91e0-0eaa-455e-b752-93b80cb45932', requestId='d7a8e85c-c44f-4ba2-981b-1cfd45463dee', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707531500}
2025-05-20 10:18:51.500 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:18:51.500 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:19:16.971 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:19:16.972 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='be5df802-f329-4b09-a1a4-b9d2d1726c16', requestId='ba34e04e-bfc6-4cbf-b927-60e091627433', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707556972}
2025-05-20 10:19:16.972 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:19:16.973 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:19:21.510 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:19:21.511 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='3d316c22-bafb-4a1e-90d3-ee28a61796bc', requestId='ef122cca-7a89-4f76-86a7-eb496ae8713c', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707561511}
2025-05-20 10:19:21.512 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:19:21.512 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:19:39.957 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:19:39.957 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 1
2025-05-20 10:19:39.958 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:19:39.958 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=1 已离开聊天室, 是否群消息=false
2025-05-20 10:19:39.958 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-20 10:19:39.958 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]用户离线: 1, 是否群消息=false
2025-05-20 10:19:39.958 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]用户离线: 1
2025-05-20 10:19:39.958 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 用户离线: 1, 立即刷新用户列表
2025-05-20 10:19:39.958 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:19:39.958 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:19:39.959 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:19:39.959 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:19:39.959 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:19:39.960 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='07e0461b-a2ac-421f-be30-f094d0e829e3', requestId='f4dcb720-b38d-4138-841a-4e823aba7905', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707579959}
2025-05-20 10:19:39.992 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:19:39.992 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:19:42.840 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 2
2025-05-20 10:19:42.840 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:19:42.840 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 2 已从群组 公共聊天室 中移除
2025-05-20 10:19:42.840 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:19:42.840 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:19:42.841 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:19:42.841 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:19:56.277 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-20 10:19:57.373 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-20 10:19:57.375 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 已加载 3 个用户凭据
2025-05-20 10:19:57.375 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 已初始化用户凭据管理器
2025-05-20 10:19:57.375 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始加载历史消息...
2025-05-20 10:19:57.375 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 群组消息目录存在: D:\java-chatroom\message_store\groups
2025-05-20 10:19:57.377 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现群组消息文件: public.dat
2025-05-20 10:19:57.377 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\groups\public.dat
2025-05-20 10:19:57.381 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 5 条
2025-05-20 10:19:57.381 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public 的 5 条历史消息
2025-05-20 10:19:57.381 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现群组消息文件: public_chat_room.dat
2025-05-20 10:19:57.381 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\groups\public_chat_room.dat
2025-05-20 10:19:57.385 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 33 条
2025-05-20 10:19:57.385 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public_chat_room 的 33 条历史消息
2025-05-20 10:19:57.385 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 私聊消息目录存在: D:\java-chatroom\message_store\private
2025-05-20 10:19:57.386 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a.dat
2025-05-20 10:19:57.386 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a.dat
2025-05-20 10:19:57.387 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 3 条
2025-05-20 10:19:57.387 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, new=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, userId1=521c718d-0f03-46f8-9732-9a6c8b57fa9a, userId2=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d
2025-05-20 10:19:57.387 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a 的 3 条历史消息
2025-05-20 10:19:57.387 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319.dat
2025-05-20 10:19:57.387 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319.dat
2025-05-20 10:19:57.388 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 2 条
2025-05-20 10:19:57.388 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319, new=1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319, userId1=1304ab0a-3af7-47ad-aadb-3eca30a27620, userId2=69b86457-6017-4f0c-bb67-a9a1f39af319
2025-05-20 10:19:57.388 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319 的 2 条历史消息
2025-05-20 10:19:57.389 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09.dat
2025-05-20 10:19:57.389 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09.dat
2025-05-20 10:19:57.389 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 1 条
2025-05-20 10:19:57.389 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, new=2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, userId1=b4cef39b-1188-4a45-af59-43e4c9c1da09, userId2=2fbfb16f-ee5c-44f8-bd92-df51cc4e1617
2025-05-20 10:19:57.389 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09 的 1 条历史消息
2025-05-20 10:19:57.390 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b.dat
2025-05-20 10:19:57.390 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b.dat
2025-05-20 10:19:57.391 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 4 条
2025-05-20 10:19:57.391 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, new=3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, userId1=3ba4d281-eb67-4770-b203-7ba5e50f92dc, userId2=c1865caa-6d9a-44c1-8e4b-bd08bcd8029b
2025-05-20 10:19:57.391 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b 的 4 条历史消息
2025-05-20 10:19:57.391 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393.dat
2025-05-20 10:19:57.391 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393.dat
2025-05-20 10:19:57.392 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 3 条
2025-05-20 10:19:57.392 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, new=6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, userId1=8f0c93e8-e594-41bc-b7b3-27cad6165393, userId2=6e700396-edde-4b85-9b9b-8d30c3b8ed52
2025-05-20 10:19:57.392 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393 的 3 条历史消息
2025-05-20 10:19:57.392 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 历史消息加载完成，群组消息数: 2, 私聊消息数: 5
2025-05-20 10:19:57.393 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 消息存储服务初始化完成，存储路径: D:\java-chatroom\message_store
2025-05-20 10:19:57.395 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 服务器已启动: 10.29.183.159:9999
2025-05-20 10:19:57.395 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 10:19:57.398 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 10:20:00.925 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:20:02.180 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:20:03.882 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 10:20:03.884 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:14817
2025-05-20 10:20:03.885 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:20:03.886 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:20:03.889 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='310f1d23-8659-472e-8f39-965578cd88fe', type=LOGIN, sender=null, timestamp=1747707603887}
2025-05-20 10:20:03.892 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 10:20:03.893 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@69245f20
2025-05-20 10:20:03.893 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:20:03.894 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 10:20:03.895 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 10:20:03.895 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:20:03.897 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:20:03.899 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:20:03.900 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:20:03.900 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 1
2025-05-20 10:20:03.900 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:20:03.959 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:20:03.962 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:20:03.962 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:20:03.962 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:20:03.962 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='32295409-a69b-4c5a-b524-bd4c420ad947', requestId='6e2f9971-7147-488f-bf7e-c6c8cddbcd8d', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707603962}
2025-05-20 10:20:03.968 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='32295409-a69b-4c5a-b524-bd4c420ad947', requestId='6e2f9971-7147-488f-bf7e-c6c8cddbcd8d', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707603962}
2025-05-20 10:20:03.970 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:20:03.971 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 10:20:03.971 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:20:03.971 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:20:03.971 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:20:03.971 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:20:03.971 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:20:03.971 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:20:03.973 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:20:03.974 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:20:03.974 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:20:03.974 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:20:03.976 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:20:03.976 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:20:03.976 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:20:04.004 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:20:04.006 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:20:04.006 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:20:04.006 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:20:07.224 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-20 10:20:07.226 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:14823
2025-05-20 10:20:07.227 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:20:07.228 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:20:07.229 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='e18588f4-44da-49eb-bec4-2ee428971bba', type=LOGIN, sender=null, timestamp=1747707607229}
2025-05-20 10:20:07.230 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-20 10:20:07.230 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@459551cd
2025-05-20 10:20:07.230 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:20:07.230 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已登录
2025-05-20 10:20:07.231 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已将用户 2 添加到公共聊天室
2025-05-20 10:20:07.231 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:20:07.231 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]2 已登录, 是否群消息=false
2025-05-20 10:20:07.231 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:20:07.232 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:20:07.232 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]2 已登录
2025-05-20 10:20:07.232 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 2 已登录, 立即刷新用户列表
2025-05-20 10:20:07.233 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:20:07.234 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='9e031a15-548d-4afa-9d78-d4c6109d7bc0', requestId='f496440b-3df6-438c-ada2-c24faac2d575', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707607233}
2025-05-20 10:20:07.235 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:20:07.235 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:20:07.236 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 2
2025-05-20 10:20:07.236 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:20:07.264 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:20:07.265 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:20:07.295 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:20:07.296 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:20:07.296 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:20:07.297 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:20:07.297 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='fb6eef8e-850e-43ee-9d88-5e7964d997a7', requestId='17559144-e028-45dd-9ba8-89b058cbcd50', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707607296}
2025-05-20 10:20:07.300 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='fb6eef8e-850e-43ee-9d88-5e7964d997a7', requestId='17559144-e028-45dd-9ba8-89b058cbcd50', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707607296}
2025-05-20 10:20:07.302 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:20:07.303 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:20:07.303 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:20:07.303 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:20:07.303 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:20:07.303 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:20:07.303 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:20:07.303 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:20:07.304 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:20:07.305 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:20:07.307 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:20:07.307 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:20:07.307 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:20:07.307 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:20:07.307 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:20:07.337 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:20:07.343 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:20:07.343 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:20:07.344 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:20:08.892 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-20 10:20:08.897 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=1
2025-05-20 10:20:08.898 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 1 的新聊天窗口
2025-05-20 10:20:08.898 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:20:08.898 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取私聊历史消息: targetId=c9fd85dd-eb31-458f-ab7c-e8c188e281a0
2025-05-20 10:20:08.898 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取私聊消息: userId1=83bfa283-d9d8-40f5-b6f9-341b391150af, userId2=c9fd85dd-eb31-458f-ab7c-e8c188e281a0, sessionKey=83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, limit=50
2025-05-20 10:20:08.898 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 当前缓存中的私聊消息: [6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319]
2025-05-20 10:20:08.898 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到会话 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0 的 0 条消息
2025-05-20 10:20:08.898 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回会话 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0 的全部 0 条消息
2025-05-20 10:20:08.898 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 10:20:08.899 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 0 条
2025-05-20 10:20:08.899 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 0 条
2025-05-20 10:20:12.893 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=c9fd85dd-eb31-458f-ab7c-e8c188e281a0, 内容=1111
2025-05-20 10:20:12.893 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=c9fd85dd-eb31-458f-ab7c-e8c188e281a0, 内容=1111, 是否群消息=false
2025-05-20 10:20:12.893 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: c9fd85dd-eb31-458f-ab7c-e8c188e281a0
2025-05-20 10:20:12.893 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 存储私聊消息: sessionKey=83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, sender=2, receiver=c9fd85dd-eb31-458f-ab7c-e8c188e281a0, content=1111
2025-05-20 10:20:12.893 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=c9fd85dd-eb31-458f-ab7c-e8c188e281a0, 内容=1111, 是否群消息=false
2025-05-20 10:20:12.894 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 2 的聊天窗口
2025-05-20 10:20:12.897 [Thread-2] INFO  c.c.s.service.MessageStoreService - 开始异步保存私聊消息到文件: D:\java-chatroom\message_store\private\83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0.dat
2025-05-20 10:20:12.899 [Thread-2] INFO  c.c.s.service.MessageStoreService - 私聊消息保存完成
2025-05-20 10:20:12.902 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=2
2025-05-20 10:20:12.902 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 2 的新聊天窗口
2025-05-20 10:20:12.902 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 10:20:12.902 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取私聊历史消息: targetId=83bfa283-d9d8-40f5-b6f9-341b391150af
2025-05-20 10:20:12.902 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取私聊消息: userId1=c9fd85dd-eb31-458f-ab7c-e8c188e281a0, userId2=83bfa283-d9d8-40f5-b6f9-341b391150af, sessionKey=83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, limit=50
2025-05-20 10:20:12.902 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 当前缓存中的私聊消息: [6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319]
2025-05-20 10:20:12.902 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到会话 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0 的 1 条消息
2025-05-20 10:20:12.902 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回会话 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0 的全部 1 条消息
2025-05-20 10:20:12.902 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 1 条
2025-05-20 10:20:12.903 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 1 条
2025-05-20 10:20:12.903 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 1 条
2025-05-20 10:20:16.766 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=c9fd85dd-eb31-458f-ab7c-e8c188e281a0, 内容=2222
2025-05-20 10:20:16.766 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=c9fd85dd-eb31-458f-ab7c-e8c188e281a0, 内容=2222, 是否群消息=false
2025-05-20 10:20:16.766 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: c9fd85dd-eb31-458f-ab7c-e8c188e281a0
2025-05-20 10:20:16.766 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 存储私聊消息: sessionKey=83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, sender=2, receiver=c9fd85dd-eb31-458f-ab7c-e8c188e281a0, content=2222
2025-05-20 10:20:16.766 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=c9fd85dd-eb31-458f-ab7c-e8c188e281a0, 内容=2222, 是否群消息=false
2025-05-20 10:20:16.767 [Thread-3] INFO  c.c.s.service.MessageStoreService - 开始异步保存私聊消息到文件: D:\java-chatroom\message_store\private\83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0.dat
2025-05-20 10:20:16.767 [Thread-3] INFO  c.c.s.service.MessageStoreService - 私聊消息保存完成
2025-05-20 10:20:18.352 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=1, 接收者=83bfa283-d9d8-40f5-b6f9-341b391150af, 内容=2222
2025-05-20 10:20:18.352 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=83bfa283-d9d8-40f5-b6f9-341b391150af, 内容=2222, 是否群消息=false
2025-05-20 10:20:18.352 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 83bfa283-d9d8-40f5-b6f9-341b391150af
2025-05-20 10:20:18.353 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 存储私聊消息: sessionKey=83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, sender=1, receiver=83bfa283-d9d8-40f5-b6f9-341b391150af, content=2222
2025-05-20 10:20:18.353 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=83bfa283-d9d8-40f5-b6f9-341b391150af, 内容=2222, 是否群消息=false
2025-05-20 10:20:18.353 [Thread-4] INFO  c.c.s.service.MessageStoreService - 开始异步保存私聊消息到文件: D:\java-chatroom\message_store\private\83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0.dat
2025-05-20 10:20:18.354 [Thread-4] INFO  c.c.s.service.MessageStoreService - 私聊消息保存完成
2025-05-20 10:20:20.917 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=c9fd85dd-eb31-458f-ab7c-e8c188e281a0, 内容=1111
2025-05-20 10:20:20.917 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=c9fd85dd-eb31-458f-ab7c-e8c188e281a0, 内容=1111, 是否群消息=false
2025-05-20 10:20:20.917 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: c9fd85dd-eb31-458f-ab7c-e8c188e281a0
2025-05-20 10:20:20.917 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 存储私聊消息: sessionKey=83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, sender=2, receiver=c9fd85dd-eb31-458f-ab7c-e8c188e281a0, content=1111
2025-05-20 10:20:20.917 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=c9fd85dd-eb31-458f-ab7c-e8c188e281a0, 内容=1111, 是否群消息=false
2025-05-20 10:20:20.918 [Thread-5] INFO  c.c.s.service.MessageStoreService - 开始异步保存私聊消息到文件: D:\java-chatroom\message_store\private\83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0.dat
2025-05-20 10:20:20.919 [Thread-5] INFO  c.c.s.service.MessageStoreService - 私聊消息保存完成
2025-05-20 10:20:22.586 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=83bfa283-d9d8-40f5-b6f9-341b391150af, 内容=2222, 是否群消息=false
2025-05-20 10:20:22.586 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=1, 接收者=83bfa283-d9d8-40f5-b6f9-341b391150af, 内容=2222
2025-05-20 10:20:22.586 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 83bfa283-d9d8-40f5-b6f9-341b391150af
2025-05-20 10:20:22.587 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 存储私聊消息: sessionKey=83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, sender=1, receiver=83bfa283-d9d8-40f5-b6f9-341b391150af, content=2222
2025-05-20 10:20:22.587 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=83bfa283-d9d8-40f5-b6f9-341b391150af, 内容=2222, 是否群消息=false
2025-05-20 10:20:22.588 [Thread-6] INFO  c.c.s.service.MessageStoreService - 开始异步保存私聊消息到文件: D:\java-chatroom\message_store\private\83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0.dat
2025-05-20 10:20:22.589 [Thread-6] INFO  c.c.s.service.MessageStoreService - 私聊消息保存完成
2025-05-20 10:20:27.838 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:20:27.839 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:20:27.840 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 2
2025-05-20 10:20:27.840 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=2 已离开聊天室, 是否群消息=false
2025-05-20 10:20:27.840 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 2 已从群组 公共聊天室 中移除
2025-05-20 10:20:27.840 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]用户离线: 2, 是否群消息=false
2025-05-20 10:20:27.840 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]用户离线: 2
2025-05-20 10:20:27.840 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 用户离线: 2, 立即刷新用户列表
2025-05-20 10:20:27.841 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:20:27.841 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:20:27.841 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='1ed91fa6-37e1-4ef0-a37b-257936292a44', requestId='a774617c-ca68-4e0c-b365-d9f5e4190291', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707627841}
2025-05-20 10:20:27.842 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:20:27.846 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:20:27.846 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:20:27.856 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:20:27.856 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:20:30.022 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:20:30.022 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 1
2025-05-20 10:20:30.022 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-20 10:20:30.022 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:20:30.023 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:20:30.023 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:20:30.023 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:20:33.117 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:20:34.390 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:20:36.541 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 10:20:36.543 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:14858
2025-05-20 10:20:36.543 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:20:36.544 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:20:36.547 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='f4c161e9-69b1-45d3-9156-4ddf69d7c0ee', type=LOGIN, sender=null, timestamp=1747707636546}
2025-05-20 10:20:36.547 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 10:20:36.547 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@5a7c2240
2025-05-20 10:20:36.547 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:20:36.547 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 10:20:36.548 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 10:20:36.548 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:20:36.548 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:20:36.552 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:20:36.553 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:20:36.553 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 1
2025-05-20 10:20:36.553 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:20:36.610 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:20:36.611 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:20:36.611 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:20:36.611 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:20:36.611 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='f9b4bede-ad71-478a-855f-74df659a0f11', requestId='30a70a29-4508-47f5-9572-ca08c61fd858', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707636611}
2025-05-20 10:20:36.615 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='9f08d66f-993e-41ee-a7bf-97e674cbb00b', requestId='2f157455-317f-4d02-95f5-7ec08e7ed9c4', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707636612}
2025-05-20 10:20:36.618 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:20:36.619 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 10:20:36.619 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:20:36.619 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:20:36.619 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:20:36.619 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:20:36.619 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:20:36.619 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:20:36.621 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:20:36.622 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:20:36.622 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:20:36.622 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:20:36.623 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:20:36.623 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:20:36.623 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:20:36.657 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:20:36.658 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:20:36.659 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:20:36.659 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:20:40.206 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-20 10:20:40.207 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:14862
2025-05-20 10:20:40.208 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:20:40.209 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:20:40.212 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='83de0433-b40b-4886-ae83-fcec971879bd', type=LOGIN, sender=null, timestamp=1747707640210}
2025-05-20 10:20:40.212 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-20 10:20:40.212 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@1e096faa
2025-05-20 10:20:40.212 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:20:40.212 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已登录
2025-05-20 10:20:40.213 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已将用户 2 添加到公共聊天室
2025-05-20 10:20:40.213 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:20:40.213 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]2 已登录, 是否群消息=false
2025-05-20 10:20:40.213 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]2 已登录
2025-05-20 10:20:40.213 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:20:40.213 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 2 已登录, 立即刷新用户列表
2025-05-20 10:20:40.214 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:20:40.214 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:20:40.215 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='ccffd915-afa0-4716-8771-737a55be7e73', requestId='a0d4d963-bd5b-4e95-9b26-30f21e1c1055', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707640214}
2025-05-20 10:20:40.218 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:20:40.219 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:20:40.219 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 2
2025-05-20 10:20:40.219 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:20:40.248 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:20:40.248 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:20:40.298 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:20:40.300 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:20:40.300 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:20:40.300 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:20:40.300 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='fbee269d-b60d-4e31-b6af-cec0049ae05b', requestId='c1706124-b180-4300-abd2-ca6bf7d13686', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707640299}
2025-05-20 10:20:40.304 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='3a482ae7-92c1-4a73-b5f4-96d3f27e1158', requestId='19d8b0b3-3ad9-4232-b9bd-752eeedd5e14', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707640300}
2025-05-20 10:20:40.307 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:20:40.308 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:20:40.309 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:20:40.309 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:20:40.309 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:20:40.309 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:20:40.309 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:20:40.309 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:20:40.310 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:20:40.312 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:20:40.312 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:20:40.313 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:20:40.313 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:20:40.313 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:20:40.313 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:20:40.362 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:20:40.363 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:20:40.363 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:20:40.363 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:20:41.772 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-20 10:20:41.778 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=1
2025-05-20 10:20:41.778 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 1 的新聊天窗口
2025-05-20 10:20:41.778 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:20:41.779 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取私聊历史消息: targetId=43763f8b-173a-4a56-8555-de953c074e69
2025-05-20 10:20:41.779 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取私聊消息: userId1=cfad1d88-6b0f-4f08-97f4-ef5f0352825f, userId2=43763f8b-173a-4a56-8555-de953c074e69, sessionKey=43763f8b-173a-4a56-8555-de953c074e69_cfad1d88-6b0f-4f08-97f4-ef5f0352825f, limit=50
2025-05-20 10:20:41.779 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 当前缓存中的私聊消息: [6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319]
2025-05-20 10:20:41.779 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到会话 43763f8b-173a-4a56-8555-de953c074e69_cfad1d88-6b0f-4f08-97f4-ef5f0352825f 的 0 条消息
2025-05-20 10:20:41.779 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回会话 43763f8b-173a-4a56-8555-de953c074e69_cfad1d88-6b0f-4f08-97f4-ef5f0352825f 的全部 0 条消息
2025-05-20 10:20:41.779 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 10:20:41.779 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 0 条
2025-05-20 10:20:41.779 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 0 条
2025-05-20 10:20:42.885 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 2 的聊天窗口
2025-05-20 10:20:42.891 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=2
2025-05-20 10:20:42.892 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 2 的新聊天窗口
2025-05-20 10:20:42.892 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 10:20:42.892 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取私聊历史消息: targetId=cfad1d88-6b0f-4f08-97f4-ef5f0352825f
2025-05-20 10:20:42.892 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取私聊消息: userId1=43763f8b-173a-4a56-8555-de953c074e69, userId2=cfad1d88-6b0f-4f08-97f4-ef5f0352825f, sessionKey=43763f8b-173a-4a56-8555-de953c074e69_cfad1d88-6b0f-4f08-97f4-ef5f0352825f, limit=50
2025-05-20 10:20:42.892 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 当前缓存中的私聊消息: [6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319]
2025-05-20 10:20:42.892 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到会话 43763f8b-173a-4a56-8555-de953c074e69_cfad1d88-6b0f-4f08-97f4-ef5f0352825f 的 0 条消息
2025-05-20 10:20:42.892 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回会话 43763f8b-173a-4a56-8555-de953c074e69_cfad1d88-6b0f-4f08-97f4-ef5f0352825f 的全部 0 条消息
2025-05-20 10:20:42.892 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 10:20:42.893 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 0 条
2025-05-20 10:20:42.893 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 0 条
2025-05-20 10:21:10.306 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:21:10.306 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='59d22671-a100-4f46-8e0c-3328e57b23af', requestId='402cff1c-05f5-4979-aca4-e2a32e251255', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707670306}
2025-05-20 10:21:10.306 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:21:10.308 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:21:36.626 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:21:36.627 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='4bd15a8b-d51d-47b5-a231-99f15ff2f37e', requestId='bed35b2c-60a1-4f42-b1ab-f56837574f26', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707696627}
2025-05-20 10:21:36.627 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:21:36.628 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:21:40.310 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:21:40.311 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='50a62c68-1de3-4e12-8ff0-11da80e66848', requestId='686b8a95-7f0f-4dac-9a76-87569ca6aae2', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707700311}
2025-05-20 10:21:40.311 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:21:40.311 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:22:06.640 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:22:06.641 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='2acd9ce8-8915-4844-af60-8da07ccd6219', requestId='7053c18c-9235-4ec1-891a-71bc33b19923', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707726641}
2025-05-20 10:22:06.641 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:22:06.641 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:22:10.316 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:22:10.317 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='185d58e5-b16a-48fd-80cf-a392860ea145', requestId='bc33fd5b-3ef1-4682-9285-c23b2cbd5199', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707730317}
2025-05-20 10:22:10.318 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:22:10.318 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:22:22.940 [pool-1-thread-1] ERROR com.chatroom.client.MessageHandler - 读取数据时出错: Connection reset
2025-05-20 10:22:22.940 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:22:22.941 [pool-1-thread-1] ERROR com.chatroom.client.MessageHandler - 读取数据时出错: Connection reset
2025-05-20 10:22:22.942 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:22:24.745 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-20 10:22:24.745 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 断开连接时出错: Socket closed
2025-05-20 10:22:26.965 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-20 10:22:26.966 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 断开连接时出错: Socket closed
2025-05-20 10:22:35.155 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-20 10:22:36.653 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-20 10:22:36.654 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 已加载 3 个用户凭据
2025-05-20 10:22:36.654 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 已初始化用户凭据管理器
2025-05-20 10:22:36.655 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始加载历史消息...
2025-05-20 10:22:36.655 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 群组消息目录存在: D:\java-chatroom\message_store\groups
2025-05-20 10:22:36.656 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现群组消息文件: public.dat
2025-05-20 10:22:36.656 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\groups\public.dat
2025-05-20 10:22:36.660 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 5 条
2025-05-20 10:22:36.660 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public 的 5 条历史消息
2025-05-20 10:22:36.660 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现群组消息文件: public_chat_room.dat
2025-05-20 10:22:36.660 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\groups\public_chat_room.dat
2025-05-20 10:22:36.663 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 33 条
2025-05-20 10:22:36.663 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public_chat_room 的 33 条历史消息
2025-05-20 10:22:36.663 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 私聊消息目录存在: D:\java-chatroom\message_store\private
2025-05-20 10:22:36.664 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a.dat
2025-05-20 10:22:36.664 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a.dat
2025-05-20 10:22:36.666 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 3 条
2025-05-20 10:22:36.666 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, new=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, userId1=521c718d-0f03-46f8-9732-9a6c8b57fa9a, userId2=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d
2025-05-20 10:22:36.666 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a 的 3 条历史消息
2025-05-20 10:22:36.666 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319.dat
2025-05-20 10:22:36.666 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319.dat
2025-05-20 10:22:36.667 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 2 条
2025-05-20 10:22:36.668 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319, new=1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319, userId1=1304ab0a-3af7-47ad-aadb-3eca30a27620, userId2=69b86457-6017-4f0c-bb67-a9a1f39af319
2025-05-20 10:22:36.668 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319 的 2 条历史消息
2025-05-20 10:22:36.668 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09.dat
2025-05-20 10:22:36.668 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09.dat
2025-05-20 10:22:36.668 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 1 条
2025-05-20 10:22:36.669 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, new=2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, userId1=b4cef39b-1188-4a45-af59-43e4c9c1da09, userId2=2fbfb16f-ee5c-44f8-bd92-df51cc4e1617
2025-05-20 10:22:36.669 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09 的 1 条历史消息
2025-05-20 10:22:36.669 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b.dat
2025-05-20 10:22:36.669 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b.dat
2025-05-20 10:22:36.670 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 4 条
2025-05-20 10:22:36.670 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, new=3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, userId1=3ba4d281-eb67-4770-b203-7ba5e50f92dc, userId2=c1865caa-6d9a-44c1-8e4b-bd08bcd8029b
2025-05-20 10:22:36.670 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b 的 4 条历史消息
2025-05-20 10:22:36.670 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393.dat
2025-05-20 10:22:36.670 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393.dat
2025-05-20 10:22:36.671 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 3 条
2025-05-20 10:22:36.671 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, new=6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, userId1=8f0c93e8-e594-41bc-b7b3-27cad6165393, userId2=6e700396-edde-4b85-9b9b-8d30c3b8ed52
2025-05-20 10:22:36.671 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393 的 3 条历史消息
2025-05-20 10:22:36.671 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0.dat
2025-05-20 10:22:36.671 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0.dat
2025-05-20 10:22:36.672 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 5 条
2025-05-20 10:22:36.673 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, new=83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, userId1=83bfa283-d9d8-40f5-b6f9-341b391150af, userId2=c9fd85dd-eb31-458f-ab7c-e8c188e281a0
2025-05-20 10:22:36.673 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0 的 5 条历史消息
2025-05-20 10:22:36.673 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 历史消息加载完成，群组消息数: 2, 私聊消息数: 6
2025-05-20 10:22:36.673 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 消息存储服务初始化完成，存储路径: D:\java-chatroom\message_store
2025-05-20 10:22:36.674 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 服务器已启动: 10.29.183.159:9999
2025-05-20 10:22:36.674 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 10:22:36.677 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 10:22:40.631 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:22:42.025 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:22:44.974 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 10:22:44.977 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:8656
2025-05-20 10:22:44.978 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:22:44.978 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:22:44.981 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='7e6b0311-f116-46a0-bb66-4cb1317fcd21', type=LOGIN, sender=null, timestamp=1747707764979}
2025-05-20 10:22:44.983 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 10:22:44.984 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@41c5a289
2025-05-20 10:22:44.984 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:22:44.985 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 10:22:44.987 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 10:22:44.988 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:22:44.989 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:22:44.991 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:22:44.992 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:22:44.992 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 1
2025-05-20 10:22:44.992 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:22:45.054 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:22:45.055 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:22:45.055 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:22:45.055 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:22:45.057 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='745a9ba6-fdf6-4026-8a33-8294d5094112', requestId='30f0487d-a634-4c06-b36c-4e400e10a0d5', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707765057}
2025-05-20 10:22:45.061 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='745a9ba6-fdf6-4026-8a33-8294d5094112', requestId='30f0487d-a634-4c06-b36c-4e400e10a0d5', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707765057}
2025-05-20 10:22:45.062 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:22:45.063 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 10:22:45.063 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:22:45.063 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:22:45.063 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:22:45.063 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:22:45.063 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:22:45.064 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:22:45.066 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:22:45.073 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:22:45.075 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:22:45.076 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:22:45.076 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:22:45.076 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:22:45.076 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:22:45.111 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:22:45.112 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:22:45.112 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:22:45.113 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:22:49.446 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-20 10:22:49.448 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:8663
2025-05-20 10:22:49.449 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:22:49.450 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:22:49.451 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='e1d59b3f-da38-4ff1-87a8-92a670863bca', type=LOGIN, sender=null, timestamp=1747707769451}
2025-05-20 10:22:49.452 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-20 10:22:49.452 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@1a6552ab
2025-05-20 10:22:49.452 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:22:49.452 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已登录
2025-05-20 10:22:49.453 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]2 已登录, 是否群消息=false
2025-05-20 10:22:49.453 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]2 已登录
2025-05-20 10:22:49.453 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已将用户 2 添加到公共聊天室
2025-05-20 10:22:49.453 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:22:49.453 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 2 已登录, 立即刷新用户列表
2025-05-20 10:22:49.454 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:22:49.454 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:22:49.455 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:22:49.458 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='3ff2b10e-8556-44f6-823b-e91cd097b951', requestId='d51b0680-3537-4aa9-a5d7-ebe2e0fe6822', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707769456}
2025-05-20 10:22:49.459 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:22:49.459 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:22:49.459 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 2
2025-05-20 10:22:49.459 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:22:49.489 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:22:49.489 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:22:49.520 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:22:49.521 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:22:49.521 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:22:49.521 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:22:49.521 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='13fe9729-0b35-4bdb-8431-8f52d7fda9c0', requestId='095eae1a-c0ed-47ad-bd05-f4f4fb4d22dc', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707769521}
2025-05-20 10:22:49.531 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='13fe9729-0b35-4bdb-8431-8f52d7fda9c0', requestId='095eae1a-c0ed-47ad-bd05-f4f4fb4d22dc', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707769521}
2025-05-20 10:22:49.534 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:22:49.534 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:22:49.534 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:22:49.534 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:22:49.535 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:22:49.535 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:22:49.535 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:22:49.535 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:22:49.536 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:22:49.537 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:22:49.538 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:22:49.538 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:22:49.538 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:22:49.538 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:22:49.538 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:22:49.574 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:22:49.576 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:22:49.576 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:22:49.576 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:22:50.371 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-20 10:22:50.378 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=1
2025-05-20 10:22:50.379 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 1 的新聊天窗口
2025-05-20 10:22:50.379 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:22:50.379 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取私聊历史消息: targetId=9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684
2025-05-20 10:22:50.379 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取私聊消息: userId1=80706aa6-6683-4fbf-bee5-20bdc153e675, userId2=9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, sessionKey1=80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, sessionKey2=80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, limit=50
2025-05-20 10:22:50.379 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 当前缓存中的私聊消息: [6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319]
2025-05-20 10:22:50.379 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到会话 80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684 的 0 条消息
2025-05-20 10:22:50.379 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回会话的全部 0 条消息
2025-05-20 10:22:50.379 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 10:22:50.380 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 0 条
2025-05-20 10:22:50.380 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 0 条
2025-05-20 10:22:56.267 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, 内容=11111, 是否群消息=false
2025-05-20 10:22:56.267 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, 内容=11111
2025-05-20 10:22:56.267 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684
2025-05-20 10:22:56.267 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 存储私聊消息: sessionKey=80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, sender=2, receiver=9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, content=11111
2025-05-20 10:22:56.268 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, 内容=11111, 是否群消息=false
2025-05-20 10:22:56.268 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 2 的聊天窗口
2025-05-20 10:22:56.272 [Thread-2] INFO  c.c.s.service.MessageStoreService - 开始异步保存私聊消息到文件: D:\java-chatroom\message_store\private\80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684.dat
2025-05-20 10:22:56.274 [Thread-2] INFO  c.c.s.service.MessageStoreService - 私聊消息保存完成
2025-05-20 10:22:56.276 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=2
2025-05-20 10:22:56.276 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 2 的新聊天窗口
2025-05-20 10:22:56.276 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 10:22:56.276 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取私聊历史消息: targetId=80706aa6-6683-4fbf-bee5-20bdc153e675
2025-05-20 10:22:56.276 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取私聊消息: userId1=9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, userId2=80706aa6-6683-4fbf-bee5-20bdc153e675, sessionKey1=80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, sessionKey2=80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, limit=50
2025-05-20 10:22:56.276 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 当前缓存中的私聊消息: [6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, 80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319]
2025-05-20 10:22:56.276 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到会话 80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684 的 1 条消息
2025-05-20 10:22:56.276 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回会话的全部 1 条消息
2025-05-20 10:22:56.276 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 1 条
2025-05-20 10:22:56.276 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 1 条
2025-05-20 10:22:56.277 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 1 条
2025-05-20 10:22:59.678 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=80706aa6-6683-4fbf-bee5-20bdc153e675, 内容=2222222, 是否群消息=false
2025-05-20 10:22:59.678 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=1, 接收者=80706aa6-6683-4fbf-bee5-20bdc153e675, 内容=2222222
2025-05-20 10:22:59.678 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 80706aa6-6683-4fbf-bee5-20bdc153e675
2025-05-20 10:22:59.679 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 存储私聊消息: sessionKey=80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, sender=1, receiver=80706aa6-6683-4fbf-bee5-20bdc153e675, content=2222222
2025-05-20 10:22:59.679 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=80706aa6-6683-4fbf-bee5-20bdc153e675, 内容=2222222, 是否群消息=false
2025-05-20 10:22:59.679 [Thread-3] INFO  c.c.s.service.MessageStoreService - 开始异步保存私聊消息到文件: D:\java-chatroom\message_store\private\80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684.dat
2025-05-20 10:22:59.681 [Thread-3] INFO  c.c.s.service.MessageStoreService - 私聊消息保存完成
2025-05-20 10:23:19.526 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:23:19.527 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='c4f949d9-383a-4561-9892-9a54311ff400', requestId='2c4f1ec3-7e8d-4bd6-a358-5a9660f9619d', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707799526}
2025-05-20 10:23:19.527 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:23:19.528 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:23:45.066 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:23:45.067 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='4baa9ace-7868-4cec-b257-c6adc1d8e0ed', requestId='51f0122f-5913-4b71-b635-effb8fd3cd90', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707825066}
2025-05-20 10:23:45.067 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:23:45.067 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:23:49.537 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:23:49.538 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='193b9376-51a9-4869-a651-b86cf959734e', requestId='34bbead8-305a-49da-bfca-593b846653ab', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707829538}
2025-05-20 10:23:49.538 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:23:49.538 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:24:01.910 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:24:01.910 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 1
2025-05-20 10:24:01.911 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:24:01.910 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=1 已离开聊天室, 是否群消息=false
2025-05-20 10:24:01.911 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-20 10:24:01.911 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]用户离线: 1, 是否群消息=false
2025-05-20 10:24:01.911 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]用户离线: 1
2025-05-20 10:24:01.911 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 用户离线: 1, 立即刷新用户列表
2025-05-20 10:24:01.911 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:24:01.913 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:24:01.915 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:24:01.915 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:24:01.917 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:24:01.918 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='e2d33b50-e61e-4dc8-b9ab-33bc934c915f', requestId='2ad4b068-7a2e-4b10-84f8-e05e2159a7dc', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707841918}
2025-05-20 10:24:01.956 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:24:01.956 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:24:04.339 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:24:04.339 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 2
2025-05-20 10:24:04.340 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 2 已从群组 公共聊天室 中移除
2025-05-20 10:24:04.340 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:24:04.340 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:24:04.340 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:24:04.340 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:24:24.877 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:24:26.120 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:24:27.334 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 10:24:27.336 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:8839
2025-05-20 10:24:27.337 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:24:27.338 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:24:27.340 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='eb721a4f-3777-47f7-a73d-ae8906b7a3fd', type=LOGIN, sender=null, timestamp=1747707867339}
2025-05-20 10:24:27.340 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 10:24:27.340 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@32f42079
2025-05-20 10:24:27.340 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:24:27.340 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 10:24:27.341 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 10:24:27.341 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:24:27.341 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:24:27.346 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:24:27.347 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:24:27.347 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 1
2025-05-20 10:24:27.347 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:24:27.409 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:24:27.411 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:24:27.411 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:24:27.411 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:24:27.411 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='ed809a00-291b-4517-8627-fdc1e5351515', requestId='5f4a76bb-92c1-4f0f-9fbc-d26aa3aae347', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707867411}
2025-05-20 10:24:27.414 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='ed809a00-291b-4517-8627-fdc1e5351515', requestId='5f4a76bb-92c1-4f0f-9fbc-d26aa3aae347', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707867411}
2025-05-20 10:24:27.418 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:24:27.419 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 10:24:27.419 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:24:27.419 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:24:27.419 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:24:27.419 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:24:27.419 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:24:27.419 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:24:27.421 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:24:27.423 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:24:27.423 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:24:27.423 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:24:27.423 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:24:27.424 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:24:27.424 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:24:27.470 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:24:27.471 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:24:27.471 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:24:27.472 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:24:32.510 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-20 10:24:32.513 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:8846
2025-05-20 10:24:32.513 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:24:32.514 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:24:32.516 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='d56797eb-f53a-4b7a-8ef3-d0d38f3da4ad', type=LOGIN, sender=null, timestamp=1747707872515}
2025-05-20 10:24:32.516 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-20 10:24:32.516 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@504b6fab
2025-05-20 10:24:32.517 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:24:32.517 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已登录
2025-05-20 10:24:32.517 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 2 添加到公共聊天室
2025-05-20 10:24:32.518 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:24:32.517 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]2 已登录, 是否群消息=false
2025-05-20 10:24:32.518 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]2 已登录
2025-05-20 10:24:32.518 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:24:32.518 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 2 已登录, 立即刷新用户列表
2025-05-20 10:24:32.518 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:24:32.519 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:24:32.522 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:24:32.523 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:24:32.523 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 2
2025-05-20 10:24:32.523 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:24:32.531 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='915205fa-8a3f-4004-9746-ca2260166c49', requestId='b140e7d0-0963-4f17-895a-55f0483f2b71', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707872526}
2025-05-20 10:24:32.567 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:24:32.568 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:24:32.624 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:24:32.625 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:24:32.625 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:24:32.626 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:24:32.625 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='d07ff343-73c3-4b0e-b75f-d082ab5681f7', requestId='a57e1955-2142-4394-a34b-b417947320dc', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707872625}
2025-05-20 10:24:32.629 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='1092efe3-7a23-448e-ae59-193d5dd98ff2', requestId='b995fff3-8f06-4947-9bd9-c047a6f42a3d', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707872626}
2025-05-20 10:24:32.633 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:24:32.634 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:24:32.634 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:24:32.634 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:24:32.634 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:24:32.634 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:24:32.634 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:24:32.634 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:24:32.635 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:24:32.641 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:24:32.643 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:24:32.645 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:24:32.645 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:24:32.645 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:24:32.645 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:24:32.685 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:24:32.686 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:24:32.686 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:24:32.686 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:24:33.655 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-20 10:24:33.661 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=1
2025-05-20 10:24:33.661 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 1 的新聊天窗口
2025-05-20 10:24:33.661 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:24:33.662 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取私聊历史消息: targetId=53ee8ab3-fbb9-44f9-85ce-a24d9e318379
2025-05-20 10:24:33.662 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取私聊消息: userId1=0f28577b-6297-487b-88cc-14be6e876329, userId2=53ee8ab3-fbb9-44f9-85ce-a24d9e318379, sessionKey1=0f28577b-6297-487b-88cc-14be6e876329_53ee8ab3-fbb9-44f9-85ce-a24d9e318379, sessionKey2=0f28577b-6297-487b-88cc-14be6e876329_53ee8ab3-fbb9-44f9-85ce-a24d9e318379, limit=50
2025-05-20 10:24:33.662 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 当前缓存中的私聊消息: [6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, 80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319]
2025-05-20 10:24:33.662 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到会话 0f28577b-6297-487b-88cc-14be6e876329_53ee8ab3-fbb9-44f9-85ce-a24d9e318379 的 0 条消息
2025-05-20 10:24:33.662 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回会话的全部 0 条消息
2025-05-20 10:24:33.662 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 10:24:33.662 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 0 条
2025-05-20 10:24:33.662 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 0 条
2025-05-20 10:25:02.634 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:25:02.635 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='dd3ee18f-5c32-4822-b186-a92e7700104d', requestId='9a7e7d3a-cd32-4a10-b83f-12efc80955e0', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707902635}
2025-05-20 10:25:02.635 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:25:02.636 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:25:27.424 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:25:27.426 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='6a46645c-57b5-4361-bd4a-e41a1b9cfff0', requestId='5f5f7202-132c-4428-bd37-d6f3af91c3a8', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707927425}
2025-05-20 10:25:27.426 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:25:27.426 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:25:32.638 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:25:32.640 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='6ba32cc7-fb24-4840-8957-830845928a0d', requestId='29d6c0e8-bfe8-4608-9635-be9d70a20be0', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707932639}
2025-05-20 10:25:32.640 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:25:32.640 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:25:35.765 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:25:35.765 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 1
2025-05-20 10:25:35.765 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=1 已离开聊天室, 是否群消息=false
2025-05-20 10:25:35.765 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-20 10:25:35.765 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:25:35.765 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]用户离线: 1, 是否群消息=false
2025-05-20 10:25:35.766 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]用户离线: 1
2025-05-20 10:25:35.766 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:25:35.766 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 用户离线: 1, 立即刷新用户列表
2025-05-20 10:25:35.766 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:25:35.766 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:25:35.766 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:25:35.791 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:25:35.793 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='08d6a9ad-5836-4275-89d4-c7edd98016c4', requestId='7740c452-7f2e-4a06-93a6-8fdc30b99ed1', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707935792}
2025-05-20 10:25:35.794 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:25:35.794 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:25:38.024 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:25:38.024 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 2
2025-05-20 10:25:38.024 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 2 已从群组 公共聊天室 中移除
2025-05-20 10:25:38.024 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:25:38.024 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:25:38.024 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:25:38.025 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:25:46.481 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-20 10:25:49.767 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-20 10:25:49.768 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 已加载 3 个用户凭据
2025-05-20 10:25:49.768 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 已初始化用户凭据管理器
2025-05-20 10:25:49.769 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始加载历史消息...
2025-05-20 10:25:49.769 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 群组消息目录存在: D:\java-chatroom\message_store\groups
2025-05-20 10:25:49.770 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现群组消息文件: public.dat
2025-05-20 10:25:49.770 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\groups\public.dat
2025-05-20 10:25:49.773 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 5 条
2025-05-20 10:25:49.773 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public 的 5 条历史消息
2025-05-20 10:25:49.774 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现群组消息文件: public_chat_room.dat
2025-05-20 10:25:49.774 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\groups\public_chat_room.dat
2025-05-20 10:25:49.777 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 33 条
2025-05-20 10:25:49.777 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public_chat_room 的 33 条历史消息
2025-05-20 10:25:49.777 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 私聊消息目录存在: D:\java-chatroom\message_store\private
2025-05-20 10:25:49.777 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a.dat
2025-05-20 10:25:49.777 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a.dat
2025-05-20 10:25:49.778 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 3 条
2025-05-20 10:25:49.779 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, new=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, userId1=521c718d-0f03-46f8-9732-9a6c8b57fa9a, userId2=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d
2025-05-20 10:25:49.779 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a 的 3 条历史消息
2025-05-20 10:25:49.779 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319.dat
2025-05-20 10:25:49.779 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319.dat
2025-05-20 10:25:49.780 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 2 条
2025-05-20 10:25:49.780 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319, new=1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319, userId1=1304ab0a-3af7-47ad-aadb-3eca30a27620, userId2=69b86457-6017-4f0c-bb67-a9a1f39af319
2025-05-20 10:25:49.780 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319 的 2 条历史消息
2025-05-20 10:25:49.780 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09.dat
2025-05-20 10:25:49.780 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09.dat
2025-05-20 10:25:49.781 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 1 条
2025-05-20 10:25:49.781 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, new=2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, userId1=b4cef39b-1188-4a45-af59-43e4c9c1da09, userId2=2fbfb16f-ee5c-44f8-bd92-df51cc4e1617
2025-05-20 10:25:49.781 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09 的 1 条历史消息
2025-05-20 10:25:49.781 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b.dat
2025-05-20 10:25:49.781 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b.dat
2025-05-20 10:25:49.782 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 4 条
2025-05-20 10:25:49.782 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, new=3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, userId1=3ba4d281-eb67-4770-b203-7ba5e50f92dc, userId2=c1865caa-6d9a-44c1-8e4b-bd08bcd8029b
2025-05-20 10:25:49.782 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b 的 4 条历史消息
2025-05-20 10:25:49.782 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393.dat
2025-05-20 10:25:49.782 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393.dat
2025-05-20 10:25:49.783 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 3 条
2025-05-20 10:25:49.783 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, new=6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, userId1=8f0c93e8-e594-41bc-b7b3-27cad6165393, userId2=6e700396-edde-4b85-9b9b-8d30c3b8ed52
2025-05-20 10:25:49.783 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393 的 3 条历史消息
2025-05-20 10:25:49.783 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684.dat
2025-05-20 10:25:49.783 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684.dat
2025-05-20 10:25:49.784 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 2 条
2025-05-20 10:25:49.784 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, new=80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, userId1=80706aa6-6683-4fbf-bee5-20bdc153e675, userId2=9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684
2025-05-20 10:25:49.784 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684 的 2 条历史消息
2025-05-20 10:25:49.784 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0.dat
2025-05-20 10:25:49.784 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0.dat
2025-05-20 10:25:49.785 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 5 条
2025-05-20 10:25:49.786 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, new=83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, userId1=83bfa283-d9d8-40f5-b6f9-341b391150af, userId2=c9fd85dd-eb31-458f-ab7c-e8c188e281a0
2025-05-20 10:25:49.786 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0 的 5 条历史消息
2025-05-20 10:25:49.786 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 历史消息加载完成，群组消息数: 2, 私聊消息数: 7
2025-05-20 10:25:49.786 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 消息存储服务初始化完成，存储路径: D:\java-chatroom\message_store
2025-05-20 10:25:49.787 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 服务器已启动: 10.29.183.159:9999
2025-05-20 10:25:49.787 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 10:25:49.791 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 10:25:54.425 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:25:55.700 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:25:58.101 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 10:25:58.103 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:12216
2025-05-20 10:25:58.104 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:25:58.106 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:25:58.110 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='8524ed81-5f2d-494b-a288-63a3315b5207', type=LOGIN, sender=null, timestamp=1747707958108}
2025-05-20 10:25:58.112 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 10:25:58.113 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@5a9f2dd3
2025-05-20 10:25:58.114 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:25:58.114 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 10:25:58.116 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 10:25:58.117 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:25:58.119 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:25:58.120 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:25:58.120 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:25:58.121 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 1
2025-05-20 10:25:58.121 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:25:58.175 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:25:58.176 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:25:58.176 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:25:58.177 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:25:58.178 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='ea0a8f75-8ba9-4e29-a15a-e7d7b53a299b', requestId='9e2e905c-7cc9-4625-8f12-c1668c738ab3', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707958177}
2025-05-20 10:25:58.181 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='ea0a8f75-8ba9-4e29-a15a-e7d7b53a299b', requestId='9e2e905c-7cc9-4625-8f12-c1668c738ab3', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707958177}
2025-05-20 10:25:58.182 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:25:58.184 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 10:25:58.184 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:25:58.184 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:25:58.184 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:25:58.184 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:25:58.184 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:25:58.184 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:25:58.186 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:25:58.188 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:25:58.188 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:25:58.188 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:25:58.188 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:25:58.188 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:25:58.188 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:25:58.222 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:25:58.223 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:25:58.224 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:25:58.224 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:26:01.263 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-20 10:26:01.266 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:12223
2025-05-20 10:26:01.267 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:26:01.268 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:26:01.270 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='07da2ba2-57a4-4154-92e2-16e4852e423c', type=LOGIN, sender=null, timestamp=1747707961269}
2025-05-20 10:26:01.270 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-20 10:26:01.270 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@7dec9655
2025-05-20 10:26:01.270 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:26:01.270 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已登录
2025-05-20 10:26:01.271 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]2 已登录, 是否群消息=false
2025-05-20 10:26:01.271 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已将用户 2 添加到公共聊天室
2025-05-20 10:26:01.271 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:26:01.271 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]2 已登录
2025-05-20 10:26:01.271 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 2 已登录, 立即刷新用户列表
2025-05-20 10:26:01.272 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:26:01.271 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:26:01.272 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:26:01.273 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='0c2a6e9f-9ee9-4e1b-8af4-ead32a99fe59', requestId='90d4aab7-0cad-48ce-abe8-915d0851fa7a', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707961273}
2025-05-20 10:26:01.276 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:26:01.276 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:26:01.277 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 2
2025-05-20 10:26:01.277 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:26:01.302 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:26:01.303 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:26:01.347 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:26:01.348 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:26:01.348 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:26:01.349 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:26:01.349 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='f48f60c9-5021-4718-be5d-c76a079bb8c5', requestId='95afeda6-ef3b-462b-815a-64733460a52b', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707961348}
2025-05-20 10:26:01.352 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='f48f60c9-5021-4718-be5d-c76a079bb8c5', requestId='95afeda6-ef3b-462b-815a-64733460a52b', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707961348}
2025-05-20 10:26:01.354 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:26:01.356 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:26:01.356 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:26:01.356 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:26:01.356 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:26:01.356 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:26:01.356 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:26:01.356 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:26:01.358 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:26:01.359 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:26:01.360 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:26:01.360 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:26:01.360 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:26:01.360 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:26:01.360 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:26:01.393 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:26:01.394 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:26:01.395 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:26:01.395 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:26:02.337 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-20 10:26:02.344 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=1
2025-05-20 10:26:02.344 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 1 的新聊天窗口
2025-05-20 10:26:02.344 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:26:02.345 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取私聊历史消息: targetId=28baa273-96a7-4bdb-9e09-31c7a50f0285
2025-05-20 10:26:02.345 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取私聊消息: userId1=5d9a7898-7b7b-4f4a-973b-47b54389bf08, userId2=28baa273-96a7-4bdb-9e09-31c7a50f0285, sessionKey1=28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08, sessionKey2=28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08, limit=50
2025-05-20 10:26:02.345 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 当前缓存中的私聊消息: [6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, 80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319]
2025-05-20 10:26:02.345 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到会话 28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08 的 0 条消息
2025-05-20 10:26:02.345 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回会话的全部 0 条消息
2025-05-20 10:26:02.345 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 10:26:02.345 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 0 条
2025-05-20 10:26:02.345 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 0 条
2025-05-20 10:26:31.362 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:26:31.363 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='a65b91d4-325a-4f4a-8ff0-14c4265f4312', requestId='77d6c4da-48b3-493b-91a0-6982b21619bb', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747707991363}
2025-05-20 10:26:31.363 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:26:31.364 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:26:58.196 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:26:58.197 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='9542ef31-71ae-4e9c-9955-f012efb810e7', requestId='43482e99-39dc-4a14-a0ce-820e792209fc', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708018197}
2025-05-20 10:26:58.197 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:26:58.197 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:27:01.374 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:27:01.374 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='c96be8c8-bf86-49b5-8e9a-bc005709aaad', requestId='46ecf407-3a7e-4313-b635-1408d0699fd6', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708021374}
2025-05-20 10:27:01.376 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:27:01.376 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:27:28.199 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:27:28.199 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='b71455ae-aba3-40b3-8adb-d0745fdae6bb', requestId='3ce004df-e844-41fa-ae8e-2d20ffe6f41c', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708048199}
2025-05-20 10:27:28.199 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:27:28.199 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:27:31.390 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:27:31.391 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='89a9e79e-97cd-4c39-880e-fc56bac2479d', requestId='288c6c65-ce26-4b6a-b80a-16045d8c22ed', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708051391}
2025-05-20 10:27:31.391 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:27:31.391 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:27:58.202 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:27:58.203 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='55a5efdb-19e9-4ccb-9f64-e3d8b92c6d69', requestId='8bea9174-eb65-4b54-a799-00ff313ca228', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708078203}
2025-05-20 10:27:58.203 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:27:58.203 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:28:01.402 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:28:01.403 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='6232320a-832a-4a9a-b53d-13dd5dd9623f', requestId='a7a8d22a-6c06-471b-9b53-8d4811acb123', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708081403}
2025-05-20 10:28:01.403 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:28:01.403 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:28:17.034 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 2 的聊天窗口
2025-05-20 10:28:17.041 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=2
2025-05-20 10:28:17.042 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 2 的新聊天窗口
2025-05-20 10:28:17.042 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 10:28:17.042 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取私聊历史消息: targetId=5d9a7898-7b7b-4f4a-973b-47b54389bf08
2025-05-20 10:28:17.042 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取私聊消息: userId1=28baa273-96a7-4bdb-9e09-31c7a50f0285, userId2=5d9a7898-7b7b-4f4a-973b-47b54389bf08, sessionKey1=28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08, sessionKey2=28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08, limit=50
2025-05-20 10:28:17.042 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 当前缓存中的私聊消息: [6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, 80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319]
2025-05-20 10:28:17.042 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到会话 28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08 的 0 条消息
2025-05-20 10:28:17.042 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回会话的全部 0 条消息
2025-05-20 10:28:17.042 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 10:28:17.043 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 0 条
2025-05-20 10:28:17.043 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 0 条
2025-05-20 10:28:18.412 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=5d9a7898-7b7b-4f4a-973b-47b54389bf08, 内容=1111, 是否群消息=false
2025-05-20 10:28:18.412 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=1, 接收者=5d9a7898-7b7b-4f4a-973b-47b54389bf08, 内容=1111
2025-05-20 10:28:18.413 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 5d9a7898-7b7b-4f4a-973b-47b54389bf08
2025-05-20 10:28:18.413 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 存储私聊消息: sessionKey=28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08, sender=1, receiver=5d9a7898-7b7b-4f4a-973b-47b54389bf08, content=1111
2025-05-20 10:28:18.413 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=5d9a7898-7b7b-4f4a-973b-47b54389bf08, 内容=1111, 是否群消息=false
2025-05-20 10:28:18.416 [Thread-2] INFO  c.c.s.service.MessageStoreService - 开始异步保存私聊消息到文件: D:\java-chatroom\message_store\private\28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08.dat
2025-05-20 10:28:18.418 [Thread-2] INFO  c.c.s.service.MessageStoreService - 私聊消息保存完成
2025-05-20 10:28:21.153 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=28baa273-96a7-4bdb-9e09-31c7a50f0285, 内容=11111, 是否群消息=false
2025-05-20 10:28:21.153 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=28baa273-96a7-4bdb-9e09-31c7a50f0285, 内容=11111
2025-05-20 10:28:21.153 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 28baa273-96a7-4bdb-9e09-31c7a50f0285
2025-05-20 10:28:21.154 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 存储私聊消息: sessionKey=28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08, sender=2, receiver=28baa273-96a7-4bdb-9e09-31c7a50f0285, content=11111
2025-05-20 10:28:21.154 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=28baa273-96a7-4bdb-9e09-31c7a50f0285, 内容=11111, 是否群消息=false
2025-05-20 10:28:21.154 [Thread-3] INFO  c.c.s.service.MessageStoreService - 开始异步保存私聊消息到文件: D:\java-chatroom\message_store\private\28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08.dat
2025-05-20 10:28:21.155 [Thread-3] INFO  c.c.s.service.MessageStoreService - 私聊消息保存完成
2025-05-20 10:28:22.781 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=5d9a7898-7b7b-4f4a-973b-47b54389bf08, 内容=1111, 是否群消息=false
2025-05-20 10:28:22.781 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=1, 接收者=5d9a7898-7b7b-4f4a-973b-47b54389bf08, 内容=1111
2025-05-20 10:28:22.781 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 5d9a7898-7b7b-4f4a-973b-47b54389bf08
2025-05-20 10:28:22.781 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 存储私聊消息: sessionKey=28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08, sender=1, receiver=5d9a7898-7b7b-4f4a-973b-47b54389bf08, content=1111
2025-05-20 10:28:22.781 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=5d9a7898-7b7b-4f4a-973b-47b54389bf08, 内容=1111, 是否群消息=false
2025-05-20 10:28:22.782 [Thread-4] INFO  c.c.s.service.MessageStoreService - 开始异步保存私聊消息到文件: D:\java-chatroom\message_store\private\28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08.dat
2025-05-20 10:28:22.783 [Thread-4] INFO  c.c.s.service.MessageStoreService - 私聊消息保存完成
2025-05-20 10:28:25.203 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=28baa273-96a7-4bdb-9e09-31c7a50f0285, 内容=1122, 是否群消息=false
2025-05-20 10:28:25.204 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=28baa273-96a7-4bdb-9e09-31c7a50f0285, 内容=1122
2025-05-20 10:28:25.204 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 28baa273-96a7-4bdb-9e09-31c7a50f0285
2025-05-20 10:28:25.204 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 存储私聊消息: sessionKey=28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08, sender=2, receiver=28baa273-96a7-4bdb-9e09-31c7a50f0285, content=1122
2025-05-20 10:28:25.204 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=28baa273-96a7-4bdb-9e09-31c7a50f0285, 内容=1122, 是否群消息=false
2025-05-20 10:28:25.204 [Thread-5] INFO  c.c.s.service.MessageStoreService - 开始异步保存私聊消息到文件: D:\java-chatroom\message_store\private\28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08.dat
2025-05-20 10:28:25.206 [Thread-5] INFO  c.c.s.service.MessageStoreService - 私聊消息保存完成
2025-05-20 10:28:28.217 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:28:28.218 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='f0f4bae1-15dc-4c33-b78b-a9053ecee736', requestId='da787345-485d-41e2-b50e-eaacea91477c', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708108218}
2025-05-20 10:28:28.218 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:28:28.219 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:28:31.404 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:28:31.406 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='770c55e5-d040-4d75-aa5d-c2618c3448ad', requestId='650bc683-e2b6-4415-93c6-ec9322ed030e', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708111404}
2025-05-20 10:28:31.406 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:28:31.406 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:28:46.140 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:28:46.141 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 1
2025-05-20 10:28:46.141 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=1 已离开聊天室, 是否群消息=false
2025-05-20 10:28:46.141 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:28:46.141 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]用户离线: 1, 是否群消息=false
2025-05-20 10:28:46.141 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-20 10:28:46.141 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]用户离线: 1
2025-05-20 10:28:46.141 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 用户离线: 1, 立即刷新用户列表
2025-05-20 10:28:46.142 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:28:46.143 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:28:46.146 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:28:46.146 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:28:46.173 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:28:46.174 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='b8b55ec6-b474-4334-8858-54bd1be1e550', requestId='49fe8768-d413-4b22-8f11-1bdb5892a57d', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708126174}
2025-05-20 10:28:46.180 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:28:46.180 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:28:55.652 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 2
2025-05-20 10:28:55.652 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:28:55.652 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 2 已从群组 公共聊天室 中移除
2025-05-20 10:28:55.653 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:28:55.653 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:28:55.653 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:28:55.653 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:28:59.462 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:29:00.664 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:29:03.127 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 10:29:03.129 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:10046
2025-05-20 10:29:03.130 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:29:03.131 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:29:03.133 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='70f666e4-4d25-41ee-9fc5-4038a0f36114', type=LOGIN, sender=null, timestamp=1747708143133}
2025-05-20 10:29:03.134 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 10:29:03.134 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@6c464f8c
2025-05-20 10:29:03.134 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:29:03.134 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 10:29:03.134 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 10:29:03.134 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:29:03.135 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:29:03.138 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:29:03.140 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:29:03.140 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 1
2025-05-20 10:29:03.140 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:29:03.206 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:29:03.208 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:29:03.208 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:29:03.208 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:29:03.208 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='7563d10b-9d4a-43ab-82b8-3310d1140a1d', requestId='cb374f30-9b71-4a5f-8fd7-fa5411febcfc', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708143207}
2025-05-20 10:29:03.212 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='7563d10b-9d4a-43ab-82b8-3310d1140a1d', requestId='cb374f30-9b71-4a5f-8fd7-fa5411febcfc', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708143207}
2025-05-20 10:29:03.215 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:29:03.216 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 10:29:03.216 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:29:03.216 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:29:03.216 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:29:03.216 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:29:03.216 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:29:03.216 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:29:03.218 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:29:03.224 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:29:03.226 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:29:03.226 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:29:03.227 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:29:03.227 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:29:03.227 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:29:03.263 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:29:03.264 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:29:03.264 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:29:03.264 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:29:05.874 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-20 10:29:05.876 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:10056
2025-05-20 10:29:05.877 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:29:05.878 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:29:05.880 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='443ec9e0-cc43-4b88-8751-c9e2a3d63c4b', type=LOGIN, sender=null, timestamp=1747708145879}
2025-05-20 10:29:05.880 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-20 10:29:05.880 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@19955f7
2025-05-20 10:29:05.880 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:29:05.880 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已登录
2025-05-20 10:29:05.880 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 2 添加到公共聊天室
2025-05-20 10:29:05.880 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]2 已登录, 是否群消息=false
2025-05-20 10:29:05.881 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:29:05.881 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]2 已登录
2025-05-20 10:29:05.881 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 2 已登录, 立即刷新用户列表
2025-05-20 10:29:05.881 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:29:05.882 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:29:05.882 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:29:05.883 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='4999ab37-dca4-4e27-9539-72c33b95d056', requestId='33e27b52-e988-475e-a099-6bedc9a270cc', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708145882}
2025-05-20 10:29:05.885 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:29:05.886 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:29:05.886 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 2
2025-05-20 10:29:05.886 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:29:05.918 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:29:05.918 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:29:05.950 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:29:05.951 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:29:05.952 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:29:05.952 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:29:05.952 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='210a4cee-d93a-4126-bcc3-e6c2d8b7834a', requestId='68b42c09-832d-4fe9-bdb0-7cd20efef55f', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708145951}
2025-05-20 10:29:05.961 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='3c8f1d9d-9173-4611-bc5e-13e32ffa4141', requestId='e3148c18-3726-4bf2-927c-083336659c82', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708145952}
2025-05-20 10:29:05.964 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:29:05.964 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:29:05.964 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:29:05.964 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:29:05.964 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:29:05.964 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:29:05.964 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:29:05.964 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:29:05.966 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:29:05.967 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:29:05.968 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:29:05.968 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:29:05.968 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:29:05.968 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:29:05.968 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:29:06.003 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:29:06.004 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:29:06.004 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:29:06.004 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:29:08.363 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-20 10:29:08.370 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=1
2025-05-20 10:29:08.370 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 1 的新聊天窗口
2025-05-20 10:29:08.370 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:29:08.370 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取私聊历史消息: targetId=6c5c2edc-21ee-46ac-a1f2-d972efafc117
2025-05-20 10:29:08.370 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取私聊消息: userId1=3c1f33c9-9e4c-4cec-8bab-a92277871343, userId2=6c5c2edc-21ee-46ac-a1f2-d972efafc117, sessionKey1=3c1f33c9-9e4c-4cec-8bab-a92277871343_6c5c2edc-21ee-46ac-a1f2-d972efafc117, sessionKey2=3c1f33c9-9e4c-4cec-8bab-a92277871343_6c5c2edc-21ee-46ac-a1f2-d972efafc117, limit=50
2025-05-20 10:29:08.370 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 当前缓存中的私聊消息: [28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08, 6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, 80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319]
2025-05-20 10:29:08.370 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到会话 3c1f33c9-9e4c-4cec-8bab-a92277871343_6c5c2edc-21ee-46ac-a1f2-d972efafc117 的 0 条消息
2025-05-20 10:29:08.370 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回会话的全部 0 条消息
2025-05-20 10:29:08.370 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 10:29:08.371 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 0 条
2025-05-20 10:29:08.371 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 0 条
2025-05-20 10:29:20.593 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:29:20.593 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=1 已离开聊天室, 是否群消息=false
2025-05-20 10:29:20.593 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 1
2025-05-20 10:29:20.594 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-20 10:29:20.594 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:29:20.594 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]用户离线: 1, 是否群消息=false
2025-05-20 10:29:20.594 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]用户离线: 1
2025-05-20 10:29:20.594 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 用户离线: 1, 立即刷新用户列表
2025-05-20 10:29:20.594 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:29:20.594 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:29:20.594 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:29:20.594 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:29:20.594 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:29:20.596 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='6740a718-546c-4f2d-99cc-941b1855e915', requestId='c3d332be-7425-4346-8cee-e8fd9e9bfc68', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708160596}
2025-05-20 10:29:20.636 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:29:20.636 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:29:23.184 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 2
2025-05-20 10:29:23.186 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:29:23.186 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 2 已从群组 公共聊天室 中移除
2025-05-20 10:29:23.186 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:29:23.186 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:29:23.187 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:29:23.187 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:31:05.913 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-20 10:31:06.816 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-20 10:31:06.818 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 已加载 3 个用户凭据
2025-05-20 10:31:06.818 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 已初始化用户凭据管理器
2025-05-20 10:31:06.818 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始加载历史消息...
2025-05-20 10:31:06.819 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 群组消息目录存在: D:\java-chatroom\message_store\groups
2025-05-20 10:31:06.819 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现群组消息文件: public.dat
2025-05-20 10:31:06.819 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\groups\public.dat
2025-05-20 10:31:06.823 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 5 条
2025-05-20 10:31:06.823 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public 的 5 条历史消息
2025-05-20 10:31:06.824 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现群组消息文件: public_chat_room.dat
2025-05-20 10:31:06.824 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\groups\public_chat_room.dat
2025-05-20 10:31:06.828 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 33 条
2025-05-20 10:31:06.828 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public_chat_room 的 33 条历史消息
2025-05-20 10:31:06.828 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 私聊消息目录存在: D:\java-chatroom\message_store\private
2025-05-20 10:31:06.829 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a.dat
2025-05-20 10:31:06.829 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a.dat
2025-05-20 10:31:06.830 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 3 条
2025-05-20 10:31:06.830 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, new=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, userId1=521c718d-0f03-46f8-9732-9a6c8b57fa9a, userId2=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d
2025-05-20 10:31:06.831 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a 的 3 条历史消息
2025-05-20 10:31:06.831 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319.dat
2025-05-20 10:31:06.831 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319.dat
2025-05-20 10:31:06.832 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 2 条
2025-05-20 10:31:06.832 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319, new=1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319, userId1=1304ab0a-3af7-47ad-aadb-3eca30a27620, userId2=69b86457-6017-4f0c-bb67-a9a1f39af319
2025-05-20 10:31:06.832 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319 的 2 条历史消息
2025-05-20 10:31:06.832 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08.dat
2025-05-20 10:31:06.832 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08.dat
2025-05-20 10:31:06.833 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 4 条
2025-05-20 10:31:06.833 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08, new=28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08, userId1=28baa273-96a7-4bdb-9e09-31c7a50f0285, userId2=5d9a7898-7b7b-4f4a-973b-47b54389bf08
2025-05-20 10:31:06.833 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08 的 4 条历史消息
2025-05-20 10:31:06.833 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09.dat
2025-05-20 10:31:06.833 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09.dat
2025-05-20 10:31:06.834 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 1 条
2025-05-20 10:31:06.835 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, new=2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, userId1=b4cef39b-1188-4a45-af59-43e4c9c1da09, userId2=2fbfb16f-ee5c-44f8-bd92-df51cc4e1617
2025-05-20 10:31:06.835 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09 的 1 条历史消息
2025-05-20 10:31:06.835 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b.dat
2025-05-20 10:31:06.835 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b.dat
2025-05-20 10:31:06.836 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 4 条
2025-05-20 10:31:06.836 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, new=3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, userId1=3ba4d281-eb67-4770-b203-7ba5e50f92dc, userId2=c1865caa-6d9a-44c1-8e4b-bd08bcd8029b
2025-05-20 10:31:06.836 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b 的 4 条历史消息
2025-05-20 10:31:06.836 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393.dat
2025-05-20 10:31:06.836 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393.dat
2025-05-20 10:31:06.837 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 3 条
2025-05-20 10:31:06.837 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, new=6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, userId1=8f0c93e8-e594-41bc-b7b3-27cad6165393, userId2=6e700396-edde-4b85-9b9b-8d30c3b8ed52
2025-05-20 10:31:06.837 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393 的 3 条历史消息
2025-05-20 10:31:06.837 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684.dat
2025-05-20 10:31:06.837 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684.dat
2025-05-20 10:31:06.838 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 2 条
2025-05-20 10:31:06.838 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, new=80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, userId1=80706aa6-6683-4fbf-bee5-20bdc153e675, userId2=9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684
2025-05-20 10:31:06.838 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684 的 2 条历史消息
2025-05-20 10:31:06.838 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0.dat
2025-05-20 10:31:06.838 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0.dat
2025-05-20 10:31:06.840 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 5 条
2025-05-20 10:31:06.840 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, new=83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, userId1=83bfa283-d9d8-40f5-b6f9-341b391150af, userId2=c9fd85dd-eb31-458f-ab7c-e8c188e281a0
2025-05-20 10:31:06.840 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0 的 5 条历史消息
2025-05-20 10:31:06.840 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 历史消息加载完成，群组消息数: 2, 私聊消息数: 8
2025-05-20 10:31:06.840 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 消息存储服务初始化完成，存储路径: D:\java-chatroom\message_store
2025-05-20 10:31:06.841 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 服务器已启动: 10.29.183.159:9999
2025-05-20 10:31:06.842 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 10:31:06.844 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 10:31:11.432 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:31:12.638 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:31:13.674 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 10:31:13.676 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:10264
2025-05-20 10:31:13.677 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:31:13.677 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:31:13.680 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='647dd4f7-1648-4e4b-b4c6-0abd6d56a71a', type=LOGIN, sender=null, timestamp=1747708273678}
2025-05-20 10:31:13.683 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 10:31:13.683 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@29393089
2025-05-20 10:31:13.683 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:31:13.684 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 10:31:13.687 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 10:31:13.688 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:31:13.689 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:31:13.691 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:31:13.692 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:31:13.692 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 1
2025-05-20 10:31:13.692 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:31:13.749 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:31:13.750 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:31:13.750 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:31:13.750 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:31:13.751 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='5550740a-c83a-4095-85cb-a6219eee090c', requestId='a8b36720-9e9b-4e93-805d-18d8ceb558ce', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708273751}
2025-05-20 10:31:13.754 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='5550740a-c83a-4095-85cb-a6219eee090c', requestId='a8b36720-9e9b-4e93-805d-18d8ceb558ce', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708273751}
2025-05-20 10:31:13.756 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:31:13.758 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 10:31:13.758 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:31:13.758 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:31:13.758 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:31:13.758 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:31:13.758 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:31:13.758 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:31:13.760 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:31:13.762 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:31:13.762 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:31:13.762 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:31:13.762 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:31:13.763 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:31:13.763 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:31:13.798 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:31:13.799 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:31:13.799 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:31:13.799 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:31:18.466 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-20 10:31:18.467 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:10269
2025-05-20 10:31:18.468 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:31:18.469 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:31:18.471 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='582c46b7-1c2a-4bed-a81f-40ac2af7c494', type=LOGIN, sender=null, timestamp=1747708278470}
2025-05-20 10:31:18.471 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-20 10:31:18.471 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@25463832
2025-05-20 10:31:18.471 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:31:18.472 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已登录
2025-05-20 10:31:18.473 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已将用户 2 添加到公共聊天室
2025-05-20 10:31:18.473 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]2 已登录, 是否群消息=false
2025-05-20 10:31:18.473 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]2 已登录
2025-05-20 10:31:18.473 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:31:18.473 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 2 已登录, 立即刷新用户列表
2025-05-20 10:31:18.473 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:31:18.474 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:31:18.474 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:31:18.475 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='917855cb-9982-43d0-ae8d-5a74ab6c1f03', requestId='1e758db1-7970-4928-85ac-389898dcd975', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708278475}
2025-05-20 10:31:18.477 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:31:18.478 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:31:18.478 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 2
2025-05-20 10:31:18.478 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:31:18.502 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:31:18.502 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:31:18.536 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:31:18.537 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:31:18.537 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:31:18.537 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:31:18.537 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='6f9ebc4e-5a57-4800-a9c9-360ee683bf5c', requestId='b1ed794c-812d-4f6b-9e00-f3c0f19db42d', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708278537}
2025-05-20 10:31:18.540 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='6f9ebc4e-5a57-4800-a9c9-360ee683bf5c', requestId='b1ed794c-812d-4f6b-9e00-f3c0f19db42d', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708278537}
2025-05-20 10:31:18.543 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:31:18.544 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:31:18.544 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:31:18.544 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:31:18.544 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:31:18.544 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:31:18.544 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:31:18.544 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:31:18.545 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:31:18.551 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:31:18.551 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:31:18.552 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:31:18.553 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:31:18.554 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:31:18.554 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:31:18.585 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:31:18.586 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:31:18.586 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:31:18.586 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:31:21.214 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-20 10:31:21.220 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=1
2025-05-20 10:31:21.220 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 1 的新聊天窗口
2025-05-20 10:31:21.220 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:31:21.220 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取私聊历史消息: targetId=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b
2025-05-20 10:31:21.220 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取私聊消息: userId1=d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, userId2=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b, sessionKey1=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, sessionKey2=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, limit=50
2025-05-20 10:31:21.220 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 当前缓存中的私聊消息: [28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08, 6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, 80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319]
2025-05-20 10:31:21.221 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到会话 6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35 的 0 条消息
2025-05-20 10:31:21.221 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回会话的全部 0 条消息
2025-05-20 10:31:21.221 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 0 条
2025-05-20 10:31:21.221 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 0 条
2025-05-20 10:31:21.221 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 0 条
2025-05-20 10:31:22.819 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b, 内容=1111, 是否群消息=false
2025-05-20 10:31:22.819 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b, 内容=1111
2025-05-20 10:31:22.819 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b
2025-05-20 10:31:22.819 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 存储私聊消息: sessionKey=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, sender=2, receiver=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b, content=1111
2025-05-20 10:31:22.820 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b, 内容=1111, 是否群消息=false
2025-05-20 10:31:22.820 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 2 的聊天窗口
2025-05-20 10:31:22.823 [Thread-2] INFO  c.c.s.service.MessageStoreService - 开始异步保存私聊消息到文件: D:\java-chatroom\message_store\private\6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35.dat
2025-05-20 10:31:22.824 [Thread-2] INFO  c.c.s.service.MessageStoreService - 私聊消息保存完成
2025-05-20 10:31:22.829 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=2
2025-05-20 10:31:22.830 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 2 的新聊天窗口
2025-05-20 10:31:22.830 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 10:31:22.830 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取私聊历史消息: targetId=d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35
2025-05-20 10:31:22.830 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取私聊消息: userId1=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b, userId2=d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, sessionKey1=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, sessionKey2=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, limit=50
2025-05-20 10:31:22.830 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 当前缓存中的私聊消息: [28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08, 6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, 80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, 6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319]
2025-05-20 10:31:22.830 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到会话 6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35 的 1 条消息
2025-05-20 10:31:22.830 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回会话的全部 1 条消息
2025-05-20 10:31:22.830 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 1 条
2025-05-20 10:31:22.830 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 1 条
2025-05-20 10:31:22.830 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 1 条
2025-05-20 10:31:26.268 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=1, 接收者=d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, 内容=22222
2025-05-20 10:31:26.268 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, 内容=22222, 是否群消息=false
2025-05-20 10:31:26.268 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35
2025-05-20 10:31:26.269 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 存储私聊消息: sessionKey=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, sender=1, receiver=d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, content=22222
2025-05-20 10:31:26.269 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, 内容=22222, 是否群消息=false
2025-05-20 10:31:26.269 [Thread-3] INFO  c.c.s.service.MessageStoreService - 开始异步保存私聊消息到文件: D:\java-chatroom\message_store\private\6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35.dat
2025-05-20 10:31:26.270 [Thread-3] INFO  c.c.s.service.MessageStoreService - 私聊消息保存完成
2025-05-20 10:31:28.204 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:31:28.206 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 1
2025-05-20 10:31:28.206 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:31:28.206 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=1 已离开聊天室, 是否群消息=false
2025-05-20 10:31:28.206 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-20 10:31:28.206 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]用户离线: 1, 是否群消息=false
2025-05-20 10:31:28.206 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]用户离线: 1
2025-05-20 10:31:28.207 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 用户离线: 1, 立即刷新用户列表
2025-05-20 10:31:28.207 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:31:28.208 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:31:28.210 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:31:28.210 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:31:28.224 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:31:28.225 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='0b1f000d-6a19-43de-98dc-5b07b20bd105', requestId='a62aa471-7f7b-47af-b0c5-31cec6baf1b0', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708288225}
2025-05-20 10:31:28.248 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:31:28.248 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:31:29.583 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 2
2025-05-20 10:31:29.583 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:31:29.583 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 2 已从群组 公共聊天室 中移除
2025-05-20 10:31:29.584 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:31:29.584 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:31:29.584 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:31:29.584 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:31:32.903 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:31:34.151 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:31:34.917 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 10:31:34.919 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:10302
2025-05-20 10:31:34.920 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:31:34.921 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:31:34.923 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='f197a7fc-d377-4966-b7e5-d3db1be8df7c', type=LOGIN, sender=null, timestamp=1747708294922}
2025-05-20 10:31:34.923 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 10:31:34.924 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@4cf79476
2025-05-20 10:31:34.924 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:31:34.924 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 10:31:34.924 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 10:31:34.924 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:31:34.924 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:31:34.929 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:31:34.930 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:31:34.930 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 1
2025-05-20 10:31:34.930 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:31:34.996 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:31:34.997 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:31:34.997 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:31:34.997 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:31:34.997 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='db0f443a-3953-44fe-93f1-add519da6a76', requestId='688948cf-b430-485e-8e24-676dcb7809ed', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708294997}
2025-05-20 10:31:35.001 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='db0f443a-3953-44fe-93f1-add519da6a76', requestId='688948cf-b430-485e-8e24-676dcb7809ed', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708294997}
2025-05-20 10:31:35.004 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:31:35.005 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 10:31:35.005 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:31:35.005 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:31:35.005 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:31:35.005 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:31:35.005 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:31:35.005 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:31:35.006 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:31:35.007 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:31:35.007 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:31:35.007 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:31:35.007 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:31:35.007 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:31:35.007 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:31:35.047 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:31:35.048 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:31:35.049 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:31:35.049 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:31:38.261 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-20 10:31:38.262 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:10305
2025-05-20 10:31:38.263 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:31:38.264 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:31:38.266 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='c368d422-ffa6-4a3f-853b-e5726b11587d', type=LOGIN, sender=null, timestamp=1747708298265}
2025-05-20 10:31:38.266 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-20 10:31:38.266 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@13beb700
2025-05-20 10:31:38.266 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:31:38.267 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已登录
2025-05-20 10:31:38.267 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 2 添加到公共聊天室
2025-05-20 10:31:38.267 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:31:38.268 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:31:38.268 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]2 已登录, 是否群消息=false
2025-05-20 10:31:38.269 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]2 已登录
2025-05-20 10:31:38.269 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 2 已登录, 立即刷新用户列表
2025-05-20 10:31:38.269 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:31:38.271 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:31:38.271 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:31:38.273 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:31:38.273 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 2
2025-05-20 10:31:38.273 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:31:38.273 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='d2877cf6-a88d-4740-820d-8ffc08d605fe', requestId='ef43b994-1cca-4875-9a85-32129dbaf687', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708298272}
2025-05-20 10:31:38.300 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:31:38.301 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:31:38.332 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:31:38.333 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:31:38.334 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:31:38.334 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:31:38.334 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='a1c9d440-15fc-4c05-8bb0-85ccfa84d698', requestId='a1c32a16-c9c6-45e3-a032-0be17e51e12c', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708298333}
2025-05-20 10:31:38.339 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='5d582a37-4bbb-46f2-be8c-f7f2e904c20c', requestId='84a1a227-5a3c-4cb3-9281-0111ea6754a1', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708298334}
2025-05-20 10:31:38.342 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:31:38.343 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:31:38.343 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:31:38.343 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:31:38.344 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:31:38.344 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:31:38.344 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:31:38.344 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:31:38.344 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:31:38.347 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:31:38.347 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:31:38.347 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:31:38.347 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:31:38.347 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:31:38.348 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:31:38.385 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:31:38.386 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:31:38.386 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:31:38.386 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:31:39.409 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-20 10:31:39.414 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=1
2025-05-20 10:31:39.414 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 1 的新聊天窗口
2025-05-20 10:31:39.414 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:31:39.414 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取私聊历史消息: targetId=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b
2025-05-20 10:31:39.416 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取私聊消息: userId1=d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, userId2=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b, sessionKey1=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, sessionKey2=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, limit=50
2025-05-20 10:31:39.416 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 当前缓存中的私聊消息: [28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08, 6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, 80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, 6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319]
2025-05-20 10:31:39.416 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到会话 6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35 的 2 条消息
2025-05-20 10:31:39.416 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回会话的全部 2 条消息
2025-05-20 10:31:39.416 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 2 条
2025-05-20 10:31:39.417 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 2 条
2025-05-20 10:31:39.417 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 2 条
2025-05-20 10:31:39.417 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b, 内容=1111, 是否群消息=false
2025-05-20 10:31:39.417 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, 内容=22222, 是否群消息=false
2025-05-20 10:31:43.664 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 2 的聊天窗口
2025-05-20 10:31:43.672 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=2
2025-05-20 10:31:43.673 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 2 的新聊天窗口
2025-05-20 10:31:43.673 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 10:31:43.673 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取私聊历史消息: targetId=d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35
2025-05-20 10:31:43.673 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取私聊消息: userId1=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b, userId2=d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, sessionKey1=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, sessionKey2=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, limit=50
2025-05-20 10:31:43.673 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 当前缓存中的私聊消息: [28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08, 6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, 80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, 6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319]
2025-05-20 10:31:43.673 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到会话 6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35 的 2 条消息
2025-05-20 10:31:43.673 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回会话的全部 2 条消息
2025-05-20 10:31:43.673 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 2 条
2025-05-20 10:31:43.674 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 2 条
2025-05-20 10:31:43.674 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 2 条
2025-05-20 10:31:43.674 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b, 内容=1111, 是否群消息=false
2025-05-20 10:31:43.674 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, 内容=22222, 是否群消息=false
2025-05-20 10:31:45.687 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:31:45.687 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 1
2025-05-20 10:31:45.687 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:31:45.687 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-20 10:31:45.688 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=1 已离开聊天室, 是否群消息=false
2025-05-20 10:31:45.688 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]用户离线: 1, 是否群消息=false
2025-05-20 10:31:45.688 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]用户离线: 1
2025-05-20 10:31:45.693 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 用户离线: 1, 立即刷新用户列表
2025-05-20 10:31:45.693 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:31:45.688 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:31:45.694 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:31:45.694 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:31:45.727 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:31:45.728 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='9ec7b0bd-8366-4c01-b235-dbe31cfbb22b', requestId='fa0e13ea-3746-4480-aea3-aa5494292049', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708305728}
2025-05-20 10:31:45.730 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:31:45.730 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:31:47.892 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 2
2025-05-20 10:31:47.892 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 2 已从群组 公共聊天室 中移除
2025-05-20 10:31:47.892 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:31:47.892 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:31:47.893 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:31:47.893 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:31:47.893 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:37:14.027 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-20 10:37:15.031 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-20 10:37:15.033 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 已加载 3 个用户凭据
2025-05-20 10:37:15.033 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 已初始化用户凭据管理器
2025-05-20 10:37:15.035 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始加载历史消息...
2025-05-20 10:37:15.035 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 群组消息目录存在: D:\java-chatroom\message_store\groups
2025-05-20 10:37:15.036 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现群组消息文件: public.dat
2025-05-20 10:37:15.036 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\groups\public.dat
2025-05-20 10:37:15.040 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 5 条
2025-05-20 10:37:15.040 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public 的 5 条历史消息
2025-05-20 10:37:15.040 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现群组消息文件: public_chat_room.dat
2025-05-20 10:37:15.041 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\groups\public_chat_room.dat
2025-05-20 10:37:15.046 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 33 条
2025-05-20 10:37:15.046 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public_chat_room 的 33 条历史消息
2025-05-20 10:37:15.046 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 私聊消息目录存在: D:\java-chatroom\message_store\private
2025-05-20 10:37:15.046 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a.dat
2025-05-20 10:37:15.046 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a.dat
2025-05-20 10:37:15.048 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 3 条
2025-05-20 10:37:15.049 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, new=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, userId1=521c718d-0f03-46f8-9732-9a6c8b57fa9a, userId2=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d
2025-05-20 10:37:15.049 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a 的 3 条历史消息
2025-05-20 10:37:15.049 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319.dat
2025-05-20 10:37:15.049 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319.dat
2025-05-20 10:37:15.050 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 2 条
2025-05-20 10:37:15.051 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319, new=1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319, userId1=1304ab0a-3af7-47ad-aadb-3eca30a27620, userId2=69b86457-6017-4f0c-bb67-a9a1f39af319
2025-05-20 10:37:15.051 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319 的 2 条历史消息
2025-05-20 10:37:15.051 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08.dat
2025-05-20 10:37:15.051 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08.dat
2025-05-20 10:37:15.053 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 4 条
2025-05-20 10:37:15.053 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08, new=28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08, userId1=28baa273-96a7-4bdb-9e09-31c7a50f0285, userId2=5d9a7898-7b7b-4f4a-973b-47b54389bf08
2025-05-20 10:37:15.053 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08 的 4 条历史消息
2025-05-20 10:37:15.053 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09.dat
2025-05-20 10:37:15.053 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09.dat
2025-05-20 10:37:15.054 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 1 条
2025-05-20 10:37:15.054 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, new=2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, userId1=b4cef39b-1188-4a45-af59-43e4c9c1da09, userId2=2fbfb16f-ee5c-44f8-bd92-df51cc4e1617
2025-05-20 10:37:15.054 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09 的 1 条历史消息
2025-05-20 10:37:15.054 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b.dat
2025-05-20 10:37:15.054 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b.dat
2025-05-20 10:37:15.058 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 4 条
2025-05-20 10:37:15.058 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, new=3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, userId1=3ba4d281-eb67-4770-b203-7ba5e50f92dc, userId2=c1865caa-6d9a-44c1-8e4b-bd08bcd8029b
2025-05-20 10:37:15.058 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b 的 4 条历史消息
2025-05-20 10:37:15.058 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35.dat
2025-05-20 10:37:15.058 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35.dat
2025-05-20 10:37:15.060 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 2 条
2025-05-20 10:37:15.060 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, new=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, userId1=d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, userId2=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b
2025-05-20 10:37:15.060 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35 的 2 条历史消息
2025-05-20 10:37:15.060 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393.dat
2025-05-20 10:37:15.060 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393.dat
2025-05-20 10:37:15.061 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 3 条
2025-05-20 10:37:15.061 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, new=6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, userId1=8f0c93e8-e594-41bc-b7b3-27cad6165393, userId2=6e700396-edde-4b85-9b9b-8d30c3b8ed52
2025-05-20 10:37:15.061 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393 的 3 条历史消息
2025-05-20 10:37:15.061 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684.dat
2025-05-20 10:37:15.061 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684.dat
2025-05-20 10:37:15.063 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 2 条
2025-05-20 10:37:15.063 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, new=80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, userId1=80706aa6-6683-4fbf-bee5-20bdc153e675, userId2=9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684
2025-05-20 10:37:15.063 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684 的 2 条历史消息
2025-05-20 10:37:15.063 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0.dat
2025-05-20 10:37:15.063 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0.dat
2025-05-20 10:37:15.066 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 5 条
2025-05-20 10:37:15.066 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, new=83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, userId1=83bfa283-d9d8-40f5-b6f9-341b391150af, userId2=c9fd85dd-eb31-458f-ab7c-e8c188e281a0
2025-05-20 10:37:15.066 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0 的 5 条历史消息
2025-05-20 10:37:15.066 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 历史消息加载完成，群组消息数: 2, 私聊消息数: 9
2025-05-20 10:37:15.066 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 消息存储服务初始化完成，存储路径: D:\java-chatroom\message_store
2025-05-20 10:37:15.067 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 服务器已启动: 10.29.183.159:9999
2025-05-20 10:37:15.068 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 10:37:15.070 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 10:37:18.795 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:37:20.074 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:37:21.280 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 10:37:21.282 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:13110
2025-05-20 10:37:21.283 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:37:21.284 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:37:21.287 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='9412c071-c0b8-47d5-8c37-e4511540a40d', type=LOGIN, sender=null, timestamp=1747708641284}
2025-05-20 10:37:21.290 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 10:37:21.290 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@2150dfc3
2025-05-20 10:37:21.290 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:37:21.291 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 10:37:21.294 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 10:37:21.295 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:37:21.296 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:37:21.298 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:37:21.299 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:37:21.299 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 1
2025-05-20 10:37:21.299 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:37:21.412 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:37:21.416 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:37:21.416 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:37:21.416 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:37:21.419 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='908c0ddf-7416-4139-b031-cf32222f92f7', requestId='bd08258e-208f-4883-ab9e-ac459bb94d6b', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708641419}
2025-05-20 10:37:21.423 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='908c0ddf-7416-4139-b031-cf32222f92f7', requestId='bd08258e-208f-4883-ab9e-ac459bb94d6b', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708641419}
2025-05-20 10:37:21.424 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:37:21.428 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 10:37:21.428 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:37:21.428 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:37:21.428 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:37:21.428 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:37:21.428 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:37:21.428 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:37:21.430 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:37:21.431 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:37:21.432 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:37:21.432 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:37:21.432 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:37:21.433 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:37:21.433 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:37:21.497 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:37:21.500 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:37:21.500 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:37:21.500 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:37:24.998 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 10:37:25.001 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:13117
2025-05-20 10:37:25.002 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:37:25.003 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:37:25.005 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='d69df071-9448-4173-b0fc-ac82fde84fbc', type=LOGIN, sender=null, timestamp=1747708645004}
2025-05-20 10:37:25.005 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 10:37:25.005 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@25463832
2025-05-20 10:37:25.005 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户密码验证通过，踢掉旧连接: 1
2025-05-20 10:37:25.005 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 客户端连接已关闭: /10.29.183.159:13110
2025-05-20 10:37:25.005 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:37:25.005 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=您的账号在其他地方登录，此连接已断开, 是否群消息=false
2025-05-20 10:37:25.005 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 10:37:25.005 [pool-1-thread-1] WARN  com.chatroom.client.MessageHandler - 服务器已关闭连接
2025-05-20 10:37:25.006 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:37:25.006 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 10:37:25.006 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 客户端断开连接: /10.29.183.159:13110
2025-05-20 10:37:25.006 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:37:25.007 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 1
2025-05-20 10:37:25.007 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:37:25.007 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-20 10:37:25.007 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 客户端连接已关闭: /10.29.183.159:13110
2025-05-20 10:37:25.012 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:37:25.012 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:37:25.012 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 1
2025-05-20 10:37:25.012 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:37:25.072 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:37:25.073 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:37:25.073 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:37:25.073 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:37:25.073 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='c8b2d98d-2f4e-4fb9-8c5e-687db2494b48', requestId='03d8e0e7-4625-4ef2-ad5d-bd460012fee3', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708645073}
2025-05-20 10:37:25.078 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='c8b2d98d-2f4e-4fb9-8c5e-687db2494b48', requestId='03d8e0e7-4625-4ef2-ad5d-bd460012fee3', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747708645073}
2025-05-20 10:37:25.081 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:37:25.081 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 10:37:25.081 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:37:25.081 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:37:25.082 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:37:25.082 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:37:25.082 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:37:25.082 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:37:25.083 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:37:25.084 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:37:25.084 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:37:25.086 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:37:25.086 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:37:25.086 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:37:25.086 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:37:25.122 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 服务器返回的用户列表为空
2025-05-20 10:37:25.123 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:37:25.123 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 服务器返回的用户列表为空
2025-05-20 10:37:25.123 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:37:34.279 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:37:34.279 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:37:34.280 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:37:34.283 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:37:34.283 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:37:35.897 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: 你的主机中的软件中止了一个已建立的连接。
2025-05-20 10:37:35.897 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 断开连接时出错: Socket closed
2025-05-20 10:48:14.326 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-20 10:48:16.858 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-20 10:48:16.860 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 已加载 3 个用户凭据
2025-05-20 10:48:16.860 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 已初始化用户凭据管理器
2025-05-20 10:48:16.861 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始加载历史消息...
2025-05-20 10:48:16.861 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 群组消息目录存在: D:\java-chatroom\message_store\groups
2025-05-20 10:48:16.862 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现群组消息文件: public.dat
2025-05-20 10:48:16.862 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\groups\public.dat
2025-05-20 10:48:16.883 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 5 条
2025-05-20 10:48:16.884 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public 的 5 条历史消息
2025-05-20 10:48:16.884 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现群组消息文件: public_chat_room.dat
2025-05-20 10:48:16.884 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\groups\public_chat_room.dat
2025-05-20 10:48:16.889 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 33 条
2025-05-20 10:48:16.889 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public_chat_room 的 33 条历史消息
2025-05-20 10:48:16.889 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 私聊消息目录存在: D:\java-chatroom\message_store\private
2025-05-20 10:48:16.890 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a.dat
2025-05-20 10:48:16.890 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a.dat
2025-05-20 10:48:16.892 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 3 条
2025-05-20 10:48:16.893 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, new=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, userId1=521c718d-0f03-46f8-9732-9a6c8b57fa9a, userId2=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d
2025-05-20 10:48:16.893 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a 的 3 条历史消息
2025-05-20 10:48:16.893 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319.dat
2025-05-20 10:48:16.893 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319.dat
2025-05-20 10:48:16.895 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 2 条
2025-05-20 10:48:16.895 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319, new=1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319, userId1=1304ab0a-3af7-47ad-aadb-3eca30a27620, userId2=69b86457-6017-4f0c-bb67-a9a1f39af319
2025-05-20 10:48:16.895 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319 的 2 条历史消息
2025-05-20 10:48:16.895 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08.dat
2025-05-20 10:48:16.895 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08.dat
2025-05-20 10:48:16.899 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 4 条
2025-05-20 10:48:16.899 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08, new=28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08, userId1=28baa273-96a7-4bdb-9e09-31c7a50f0285, userId2=5d9a7898-7b7b-4f4a-973b-47b54389bf08
2025-05-20 10:48:16.899 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08 的 4 条历史消息
2025-05-20 10:48:16.899 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09.dat
2025-05-20 10:48:16.899 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09.dat
2025-05-20 10:48:16.901 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 1 条
2025-05-20 10:48:16.901 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, new=2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, userId1=b4cef39b-1188-4a45-af59-43e4c9c1da09, userId2=2fbfb16f-ee5c-44f8-bd92-df51cc4e1617
2025-05-20 10:48:16.901 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09 的 1 条历史消息
2025-05-20 10:48:16.901 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b.dat
2025-05-20 10:48:16.901 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b.dat
2025-05-20 10:48:16.903 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 4 条
2025-05-20 10:48:16.903 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, new=3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, userId1=3ba4d281-eb67-4770-b203-7ba5e50f92dc, userId2=c1865caa-6d9a-44c1-8e4b-bd08bcd8029b
2025-05-20 10:48:16.903 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b 的 4 条历史消息
2025-05-20 10:48:16.903 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35.dat
2025-05-20 10:48:16.904 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35.dat
2025-05-20 10:48:16.906 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 2 条
2025-05-20 10:48:16.906 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, new=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, userId1=d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, userId2=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b
2025-05-20 10:48:16.906 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35 的 2 条历史消息
2025-05-20 10:48:16.906 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393.dat
2025-05-20 10:48:16.906 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393.dat
2025-05-20 10:48:16.908 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 3 条
2025-05-20 10:48:16.908 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, new=6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, userId1=8f0c93e8-e594-41bc-b7b3-27cad6165393, userId2=6e700396-edde-4b85-9b9b-8d30c3b8ed52
2025-05-20 10:48:16.908 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393 的 3 条历史消息
2025-05-20 10:48:16.908 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684.dat
2025-05-20 10:48:16.908 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684.dat
2025-05-20 10:48:16.912 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 2 条
2025-05-20 10:48:16.912 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, new=80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, userId1=80706aa6-6683-4fbf-bee5-20bdc153e675, userId2=9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684
2025-05-20 10:48:16.912 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684 的 2 条历史消息
2025-05-20 10:48:16.912 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0.dat
2025-05-20 10:48:16.912 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0.dat
2025-05-20 10:48:16.916 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 5 条
2025-05-20 10:48:16.916 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, new=83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, userId1=83bfa283-d9d8-40f5-b6f9-341b391150af, userId2=c9fd85dd-eb31-458f-ab7c-e8c188e281a0
2025-05-20 10:48:16.916 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0 的 5 条历史消息
2025-05-20 10:48:16.917 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 历史消息加载完成，群组消息数: 2, 私聊消息数: 9
2025-05-20 10:48:16.917 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 消息存储服务初始化完成，存储路径: D:\java-chatroom\message_store
2025-05-20 10:48:16.918 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 服务器已启动: 10.29.183.159:9999
2025-05-20 10:48:16.919 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 10:48:16.922 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 10:48:20.816 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:48:22.363 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:48:22.881 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 10:48:22.882 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:5595
2025-05-20 10:48:22.884 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:48:22.885 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:48:22.889 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='70a0490f-b395-46fa-897b-c8f1f67fa715', type=LOGIN, sender=null, timestamp=1747709302887}
2025-05-20 10:48:22.892 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 10:48:22.892 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@69b17dbc
2025-05-20 10:48:22.892 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:48:22.893 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 10:48:22.894 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 10:48:22.895 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:48:22.896 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:48:22.899 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:48:22.900 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:48:22.900 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 1
2025-05-20 10:48:22.900 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:48:22.997 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:48:22.998 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:48:22.998 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:48:22.999 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:48:23.001 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='be72bb91-dbb8-49d3-af76-0956dfaa4171', requestId='bff01f16-9669-4461-a4ea-e73a0c83693a', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747709303000}
2025-05-20 10:48:23.005 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='be72bb91-dbb8-49d3-af76-0956dfaa4171', requestId='bff01f16-9669-4461-a4ea-e73a0c83693a', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747709303000}
2025-05-20 10:48:23.007 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:48:23.008 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 10:48:23.009 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:48:23.009 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:48:23.009 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:48:23.009 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:48:23.009 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:48:23.009 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:48:23.011 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:48:23.013 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:48:23.014 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:48:23.014 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:48:23.014 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:48:23.014 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:48:23.015 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:48:23.064 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:48:23.065 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:48:23.065 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:48:23.065 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:48:27.075 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-20 10:48:27.076 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:5599
2025-05-20 10:48:27.077 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:48:27.078 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:48:27.081 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='158ef8e5-465d-48ba-bc42-5fcd8609189b', type=LOGIN, sender=null, timestamp=1747709307080}
2025-05-20 10:48:27.081 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-20 10:48:27.081 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@680a4c49
2025-05-20 10:48:27.081 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:48:27.081 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已登录
2025-05-20 10:48:27.082 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已将用户 2 添加到公共聊天室
2025-05-20 10:48:27.082 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:48:27.082 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]2 已登录, 是否群消息=false
2025-05-20 10:48:27.083 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:48:27.083 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:48:27.083 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]2 已登录
2025-05-20 10:48:27.083 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 2 已登录, 立即刷新用户列表
2025-05-20 10:48:27.083 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:48:27.085 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='a5145439-8840-4683-95af-5b5abcc044e4', requestId='993b3bdb-827f-4cc0-a5ac-40c0df2bc84d', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747709307084}
2025-05-20 10:48:27.087 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:48:27.088 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:48:27.089 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 2
2025-05-20 10:48:27.089 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:48:27.119 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:48:27.119 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:48:27.153 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:48:27.154 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:48:27.155 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:48:27.155 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:48:27.155 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='7a0a7b0f-6949-494b-b7a3-656ca9901988', requestId='3de2b32d-d0eb-4e64-a5cb-df10e781afe9', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747709307154}
2025-05-20 10:48:27.158 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='7a0a7b0f-6949-494b-b7a3-656ca9901988', requestId='3de2b32d-d0eb-4e64-a5cb-df10e781afe9', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747709307154}
2025-05-20 10:48:27.160 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:48:27.160 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:48:27.162 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:48:27.162 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:48:27.162 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:48:27.162 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:48:27.162 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:48:27.162 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:48:27.164 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:48:27.165 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:48:27.165 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:48:27.165 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:48:27.165 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:48:27.165 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:48:27.165 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:48:27.234 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:48:27.235 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:48:27.235 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:48:27.236 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:48:28.289 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-20 10:48:28.296 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=1
2025-05-20 10:48:28.297 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 1 的新聊天窗口
2025-05-20 10:48:28.297 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:48:28.297 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取私聊历史消息: targetId=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b
2025-05-20 10:48:28.297 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取私聊消息: userId1=d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, userId2=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b, sessionKey1=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, sessionKey2=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, limit=50
2025-05-20 10:48:28.297 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 当前缓存中的私聊消息: [28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08, 6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, 80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, 6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319]
2025-05-20 10:48:28.297 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到会话 6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35 的 2 条消息
2025-05-20 10:48:28.297 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回会话的全部 2 条消息
2025-05-20 10:48:28.297 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 2 条
2025-05-20 10:48:28.298 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 2 条
2025-05-20 10:48:28.298 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 2 条
2025-05-20 10:48:28.298 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b, 内容=1111, 是否群消息=false
2025-05-20 10:48:28.298 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, 内容=22222, 是否群消息=false
2025-05-20 10:48:30.816 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:48:30.817 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 2
2025-05-20 10:48:30.817 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=2 已离开聊天室, 是否群消息=false
2025-05-20 10:48:30.817 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:48:30.817 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 2 已从群组 公共聊天室 中移除
2025-05-20 10:48:30.818 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]用户离线: 2, 是否群消息=false
2025-05-20 10:48:30.818 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]用户离线: 2
2025-05-20 10:48:30.818 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 用户离线: 2, 立即刷新用户列表
2025-05-20 10:48:30.818 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:48:30.818 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:48:30.819 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='0c430c3b-9de0-4012-ae64-2a82ed522454', requestId='16335fda-d74d-4912-82bf-dfddc94f899b', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747709310819}
2025-05-20 10:48:30.820 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:48:30.823 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:48:30.823 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:48:30.842 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:48:30.843 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:48:31.972 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 1
2025-05-20 10:48:31.972 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-20 10:48:31.972 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:48:31.972 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:48:31.972 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:48:31.972 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:48:31.973 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:49:03.652 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-20 10:49:04.504 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-20 10:49:04.505 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 已加载 3 个用户凭据
2025-05-20 10:49:04.505 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 已初始化用户凭据管理器
2025-05-20 10:49:04.505 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始加载历史消息...
2025-05-20 10:49:04.505 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 群组消息目录存在: D:\java-chatroom\message_store\groups
2025-05-20 10:49:04.506 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现群组消息文件: public.dat
2025-05-20 10:49:04.506 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\groups\public.dat
2025-05-20 10:49:04.510 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 5 条
2025-05-20 10:49:04.510 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public 的 5 条历史消息
2025-05-20 10:49:04.510 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现群组消息文件: public_chat_room.dat
2025-05-20 10:49:04.510 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\groups\public_chat_room.dat
2025-05-20 10:49:04.514 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 33 条
2025-05-20 10:49:04.514 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public_chat_room 的 33 条历史消息
2025-05-20 10:49:04.514 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 私聊消息目录存在: D:\java-chatroom\message_store\private
2025-05-20 10:49:04.515 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a.dat
2025-05-20 10:49:04.515 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a.dat
2025-05-20 10:49:04.516 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 3 条
2025-05-20 10:49:04.516 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, new=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, userId1=521c718d-0f03-46f8-9732-9a6c8b57fa9a, userId2=0e53f82d-5fd7-47e9-8677-b05c9aa2e35d
2025-05-20 10:49:04.516 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a 的 3 条历史消息
2025-05-20 10:49:04.516 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319.dat
2025-05-20 10:49:04.516 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319.dat
2025-05-20 10:49:04.517 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 2 条
2025-05-20 10:49:04.518 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319, new=1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319, userId1=1304ab0a-3af7-47ad-aadb-3eca30a27620, userId2=69b86457-6017-4f0c-bb67-a9a1f39af319
2025-05-20 10:49:04.518 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319 的 2 条历史消息
2025-05-20 10:49:04.518 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08.dat
2025-05-20 10:49:04.518 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08.dat
2025-05-20 10:49:04.519 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 4 条
2025-05-20 10:49:04.519 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08, new=28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08, userId1=28baa273-96a7-4bdb-9e09-31c7a50f0285, userId2=5d9a7898-7b7b-4f4a-973b-47b54389bf08
2025-05-20 10:49:04.519 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08 的 4 条历史消息
2025-05-20 10:49:04.519 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09.dat
2025-05-20 10:49:04.519 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09.dat
2025-05-20 10:49:04.520 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 1 条
2025-05-20 10:49:04.520 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, new=2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, userId1=b4cef39b-1188-4a45-af59-43e4c9c1da09, userId2=2fbfb16f-ee5c-44f8-bd92-df51cc4e1617
2025-05-20 10:49:04.520 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09 的 1 条历史消息
2025-05-20 10:49:04.520 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b.dat
2025-05-20 10:49:04.520 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b.dat
2025-05-20 10:49:04.521 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 4 条
2025-05-20 10:49:04.522 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, new=3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, userId1=3ba4d281-eb67-4770-b203-7ba5e50f92dc, userId2=c1865caa-6d9a-44c1-8e4b-bd08bcd8029b
2025-05-20 10:49:04.522 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b 的 4 条历史消息
2025-05-20 10:49:04.522 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35.dat
2025-05-20 10:49:04.522 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35.dat
2025-05-20 10:49:04.523 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 2 条
2025-05-20 10:49:04.523 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, new=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, userId1=d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, userId2=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b
2025-05-20 10:49:04.523 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35 的 2 条历史消息
2025-05-20 10:49:04.523 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393.dat
2025-05-20 10:49:04.523 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393.dat
2025-05-20 10:49:04.524 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 3 条
2025-05-20 10:49:04.524 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, new=6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, userId1=8f0c93e8-e594-41bc-b7b3-27cad6165393, userId2=6e700396-edde-4b85-9b9b-8d30c3b8ed52
2025-05-20 10:49:04.524 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393 的 3 条历史消息
2025-05-20 10:49:04.524 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684.dat
2025-05-20 10:49:04.524 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684.dat
2025-05-20 10:49:04.525 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 2 条
2025-05-20 10:49:04.525 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, new=80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, userId1=80706aa6-6683-4fbf-bee5-20bdc153e675, userId2=9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684
2025-05-20 10:49:04.525 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684 的 2 条历史消息
2025-05-20 10:49:04.525 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 发现私聊消息文件: 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0.dat
2025-05-20 10:49:04.525 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 开始从文件加载消息: D:\java-chatroom\message_store\private\83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0.dat
2025-05-20 10:49:04.527 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 成功从文件加载消息: 5 条
2025-05-20 10:49:04.527 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 重新生成会话键: old=83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, new=83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, userId1=83bfa283-d9d8-40f5-b6f9-341b391150af, userId2=c9fd85dd-eb31-458f-ab7c-e8c188e281a0
2025-05-20 10:49:04.527 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载私聊会话 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0 的 5 条历史消息
2025-05-20 10:49:04.527 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 历史消息加载完成，群组消息数: 2, 私聊消息数: 9
2025-05-20 10:49:04.527 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 消息存储服务初始化完成，存储路径: D:\java-chatroom\message_store
2025-05-20 10:49:04.529 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 服务器已启动: 10.29.183.159:9999
2025-05-20 10:49:04.529 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 10:49:04.534 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-20 10:49:08.625 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:49:11.265 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 10:49:11.267 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:5670
2025-05-20 10:49:11.268 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:49:11.269 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:49:11.272 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='3334cc29-6c00-4a7a-a81a-0ccbb9732062', type=LOGIN, sender=null, timestamp=1747709351270}
2025-05-20 10:49:11.275 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 10:49:11.276 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@58a174b3
2025-05-20 10:49:11.276 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:49:11.279 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 10:49:11.280 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 10:49:11.281 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:49:11.282 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:49:11.284 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:49:11.285 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:49:11.285 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 1
2025-05-20 10:49:11.285 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:49:11.348 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:49:11.349 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:49:11.349 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:49:11.349 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:49:11.350 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='d5b8996a-5ee4-4f6b-a817-62bb9bcdd445', requestId='09402717-f8aa-4cd7-b70e-044a8b05268e', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747709351350}
2025-05-20 10:49:11.354 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='d5b8996a-5ee4-4f6b-a817-62bb9bcdd445', requestId='09402717-f8aa-4cd7-b70e-044a8b05268e', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747709351350}
2025-05-20 10:49:11.355 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:49:11.357 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 10:49:11.357 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:49:11.357 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:49:11.357 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:49:11.357 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:49:11.357 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:49:11.357 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:49:11.359 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:49:11.361 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:49:11.361 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:49:11.361 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:49:11.361 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:49:11.362 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:49:11.362 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:49:11.413 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:49:11.415 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:49:11.415 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:49:11.415 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:49:14.963 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:49:14.963 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 1
2025-05-20 10:49:14.963 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-20 10:49:14.963 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:49:14.965 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:49:14.968 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:49:14.968 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:49:17.636 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:49:19.321 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-20 10:49:21.192 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-20 10:49:21.193 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:5690
2025-05-20 10:49:21.194 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:49:21.195 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:49:21.197 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='0701825d-3db3-4514-8394-87a9bd0b3a04', type=LOGIN, sender=null, timestamp=1747709361196}
2025-05-20 10:49:21.198 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-20 10:49:21.198 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@1a9fa6e5
2025-05-20 10:49:21.198 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:49:21.198 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-20 10:49:21.198 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 已将用户 1 添加到公共聊天室
2025-05-20 10:49:21.199 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:49:21.199 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:49:21.203 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:49:21.204 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:49:21.204 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 1
2025-05-20 10:49:21.204 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:49:21.268 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:49:21.269 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:49:21.269 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:49:21.269 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:49:21.269 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='d477d9a7-d864-4577-b615-36d4afdbac97', requestId='ce242cdf-1731-401c-888a-773535c55bb4', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747709361269}
2025-05-20 10:49:21.272 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='d477d9a7-d864-4577-b615-36d4afdbac97', requestId='ce242cdf-1731-401c-888a-773535c55bb4', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747709361269}
2025-05-20 10:49:21.275 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:49:21.275 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=1
2025-05-20 10:49:21.276 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:49:21.276 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:49:21.276 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:49:21.276 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:49:21.276 [pool-1-thread-1] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:49:21.276 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:49:21.277 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:49:21.279 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:49:21.279 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:49:21.279 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:49:21.279 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:49:21.279 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:49:21.279 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:49:21.320 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:49:21.321 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:49:21.321 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:49:21.321 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:49:23.419 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-20 10:49:23.421 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:5693
2025-05-20 10:49:23.422 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-20 10:49:23.423 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-20 10:49:23.424 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='4c7a467d-2c07-4154-9ab7-e4971c469846', type=LOGIN, sender=null, timestamp=1747709363424}
2025-05-20 10:49:23.425 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-20 10:49:23.425 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@5472263f
2025-05-20 10:49:23.425 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-20 10:49:23.425 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已登录
2025-05-20 10:49:23.426 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 已将用户 2 添加到公共聊天室
2025-05-20 10:49:23.426 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-20 10:49:23.426 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]2 已登录, 是否群消息=false
2025-05-20 10:49:23.427 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]2 已登录
2025-05-20 10:49:23.427 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 2 已登录, 立即刷新用户列表
2025-05-20 10:49:23.427 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-20 10:49:23.427 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:49:23.428 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:49:23.429 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='bcd0e1c3-66f6-4d9d-9f8f-243e6beb069b', requestId='23cd4700-3f74-4bc0-8db0-5cce1bf317ec', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747709363429}
2025-05-20 10:49:23.431 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=LOGIN_RESULT, 成功=true, 消息=登录成功
2025-05-20 10:49:23.431 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-20 10:49:23.432 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已设置当前用户: 2
2025-05-20 10:49:23.432 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-20 10:49:23.468 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:49:23.469 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:49:23.500 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:49:23.501 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-20 10:49:23.502 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:49:23.502 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-20 10:49:23.502 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='1df49325-0444-4596-92e1-792179761ed8', requestId='145ac73d-db30-4438-b469-7bf8343f80fc', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747709363501}
2025-05-20 10:49:23.512 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='1bc27555-7aac-45be-84b5-e47a5a8e24d3', requestId='faf3cca0-1a55-4b27-832e-405e8559d554', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747709363502}
2025-05-20 10:49:23.515 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=true, target=公共聊天室
2025-05-20 10:49:23.516 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:49:23.516 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取群聊历史消息: groupId=public
2025-05-20 10:49:23.516 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取群组消息: groupId=public, limit=50
2025-05-20 10:49:23.516 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 当前缓存中的群组消息: [public, public_chat_room]
2025-05-20 10:49:23.516 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到群组 public 的 5 条消息
2025-05-20 10:49:23.516 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回群组 public 的全部 5 条消息
2025-05-20 10:49:23.516 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 5 条
2025-05-20 10:49:23.518 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 5 条
2025-05-20 10:49:23.519 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 5 条
2025-05-20 10:49:23.519 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:49:23.519 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=22222, 是否群消息=true
2025-05-20 10:49:23.520 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:49:23.520 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public, 内容=1111, 是否群消息=true
2025-05-20 10:49:23.520 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=public, 内容=11111, 是否群消息=true
2025-05-20 10:49:23.550 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:49:23.551 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:49:23.552 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-20 10:49:23.552 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-20 10:49:24.888 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-20 10:49:24.895 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 开始加载历史消息: isGroupChat=false, target=1
2025-05-20 10:49:24.896 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 1 的新聊天窗口
2025-05-20 10:49:24.896 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 处理获取历史消息请求: sender=2
2025-05-20 10:49:24.896 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取私聊历史消息: targetId=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b
2025-05-20 10:49:24.896 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 开始获取私聊消息: userId1=d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, userId2=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b, sessionKey1=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, sessionKey2=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, limit=50
2025-05-20 10:49:24.896 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 当前缓存中的私聊消息: [28baa273-96a7-4bdb-9e09-31c7a50f0285_5d9a7898-7b7b-4f4a-973b-47b54389bf08, 6e700396-edde-4b85-9b9b-8d30c3b8ed52_8f0c93e8-e594-41bc-b7b3-27cad6165393, 80706aa6-6683-4fbf-bee5-20bdc153e675_9c89d8eb-2d02-4ee0-8a88-d2fb9dd05684, 6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, 3ba4d281-eb67-4770-b203-7ba5e50f92dc_c1865caa-6d9a-44c1-8e4b-bd08bcd8029b, 83bfa283-d9d8-40f5-b6f9-341b391150af_c9fd85dd-eb31-458f-ab7c-e8c188e281a0, 0e53f82d-5fd7-47e9-8677-b05c9aa2e35d_521c718d-0f03-46f8-9732-9a6c8b57fa9a, 2fbfb16f-ee5c-44f8-bd92-df51cc4e1617_b4cef39b-1188-4a45-af59-43e4c9c1da09, 1304ab0a-3af7-47ad-aadb-3eca30a27620_69b86457-6017-4f0c-bb67-a9a1f39af319]
2025-05-20 10:49:24.896 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 从缓存中获取到会话 6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b_d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35 的 2 条消息
2025-05-20 10:49:24.896 [pool-1-thread-2] INFO  c.c.s.service.MessageStoreService - 返回会话的全部 2 条消息
2025-05-20 10:49:24.896 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取到历史消息: 2 条
2025-05-20 10:49:24.898 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到历史消息: 2 条
2025-05-20 10:49:24.898 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到历史消息: 2 条
2025-05-20 10:49:24.898 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b, 内容=1111, 是否群消息=false
2025-05-20 10:49:24.898 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35, 内容=22222, 是否群消息=false
2025-05-20 10:49:26.758 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:49:26.759 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 2
2025-05-20 10:49:26.759 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 2 已从群组 公共聊天室 中移除
2025-05-20 10:49:26.759 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:49:26.759 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=2 已离开聊天室, 是否群消息=false
2025-05-20 10:49:26.759 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]用户离线: 2, 是否群消息=false
2025-05-20 10:49:26.760 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]用户离线: 2
2025-05-20 10:49:26.760 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 用户离线: 2, 立即刷新用户列表
2025-05-20 10:49:26.760 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-20 10:49:26.760 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:49:26.760 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:49:26.760 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:49:26.760 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-20 10:49:26.761 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='e5c55dc8-848a-4c8c-9512-38914bab11e2', requestId='bd37e6c7-7055-47de-85d7-8b1b16af6ab8', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747709366761}
2025-05-20 10:49:26.783 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-20 10:49:26.783 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-20 10:49:28.532 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-20 10:49:28.532 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]用户离线: 1
2025-05-20 10:49:28.533 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 已从群组 公共聊天室 中移除
2025-05-20 10:49:28.533 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-20 10:49:28.534 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:410)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:231)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-20 10:49:28.534 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-20 10:49:28.534 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
