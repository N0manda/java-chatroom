2025-05-19 14:41:12.739 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.129.5.3, port=9999, autoSelectPort=true
2025-05-19 14:41:19.860 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-19 14:41:19.862 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 已加载 2 个用户凭据
2025-05-19 14:41:19.862 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 已初始化用户凭据管理器
2025-05-19 14:41:19.867 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public_chat_room 的 1 条历史消息
2025-05-19 14:41:19.867 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 消息存储服务初始化完成，存储路径: D:\java-chatroom\message_store
2025-05-19 14:41:19.869 [AWT-EventQueue-0] INFO  com.chatroom.server.ChatServer - 已创建公共聊天室: 公共聊天室
2025-05-19 14:41:19.870 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 服务器已启动: 10.29.183.159:9999
2025-05-19 14:41:19.871 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-19 14:41:19.874 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-19 14:41:25.229 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-19 14:41:26.534 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-19 14:41:33.998 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-19 14:41:34.000 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:11397
2025-05-19 14:41:34.001 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-19 14:41:34.002 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-19 14:41:34.008 [pool-2-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='c1657947-5137-41b8-bb38-441ad557ca97', type=LOGIN, sender=null, timestamp=1747636894004}
2025-05-19 14:41:34.014 [pool-2-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-19 14:41:34.014 [pool-2-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@64bc914b
2025-05-19 14:41:34.015 [pool-2-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-19 14:41:34.015 [pool-2-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 (ID: d8ab7d3c-7ed6-4c52-9103-e870afa2d261) 加入公共聊天室
2025-05-19 14:41:34.015 [pool-2-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 (ID: d8ab7d3c-7ed6-4c52-9103-e870afa2d261) 登录成功
2025-05-19 14:41:34.016 [pool-2-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-19 14:41:34.029 [pool-2-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-19 14:41:34.031 [pool-2-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-19 14:41:34.032 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-19 14:41:34.033 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-19 14:41:34.033 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 1
2025-05-19 14:41:34.033 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-19 14:41:34.033 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 请求公共聊天室历史消息
2025-05-19 14:41:34.033 [pool-1-thread-1] INFO  com.chatroom.client.ChatClient - 请求群组历史消息: targetId=public_chat_room, limit=50
2025-05-19 14:41:34.035 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-19 14:41:34.035 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-19 14:41:34.035 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-19 14:41:34.035 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-19 14:41:34.035 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 14:41:34.036 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-19 14:41:34.036 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-19 14:41:34.036 [pool-2-thread-1] INFO  c.c.server.handler.ClientHandler - 处理获取历史消息请求: ChatRequest{requestId='fdb2d53a-09b0-42b9-b50b-1762b3b23558', type=GET_HISTORY_MESSAGES, sender=1, timestamp=1747636894033}
2025-05-19 14:41:34.037 [pool-2-thread-1] INFO  com.chatroom.server.ChatServer - 获取群组 public_chat_room 的历史消息, 共 2 条
2025-05-19 14:41:34.038 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=获取历史消息成功
2025-05-19 14:41:34.038 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-19 14:41:34.038 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-19 14:46:34.704 [pool-1-thread-1] ERROR com.chatroom.client.MessageHandler - 读取数据时出错: 你的主机中的软件中止了一个已建立的连接。
2025-05-19 14:46:34.704 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-19 14:46:34.704 [pool-2-thread-1] INFO  c.c.server.handler.ClientHandler - 客户端断开连接: /10.29.183.159:11397
2025-05-19 14:46:34.704 [pool-2-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 (ID: d8ab7d3c-7ed6-4c52-9103-e870afa2d261) 已注销
2025-05-19 14:46:34.705 [pool-2-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已离线
2025-05-19 14:46:34.705 [pool-2-thread-1] INFO  c.c.server.handler.ClientHandler - 客户端连接已关闭: /10.29.183.159:11397
2025-05-19 14:47:45.443 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 发送请求失败: Connection reset by peer
2025-05-19 14:47:45.443 [AWT-EventQueue-0] ERROR com.chatroom.client.ChatClient - 断开连接时出错: Socket closed
2025-05-19 17:04:47.099 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-19 17:04:54.982 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-19 17:04:54.984 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 已加载 2 个用户凭据
2025-05-19 17:04:54.984 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 已初始化用户凭据管理器
2025-05-19 17:04:54.989 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public_chat_room 的 2 条历史消息
2025-05-19 17:04:54.989 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 消息存储服务初始化完成，存储路径: D:\java-chatroom\message_store
2025-05-19 17:04:54.991 [AWT-EventQueue-0] INFO  com.chatroom.server.ChatServer - 已创建公共聊天室: 公共聊天室
2025-05-19 17:04:54.992 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 服务器已启动: 10.29.183.159:9999
2025-05-19 17:04:54.993 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-19 17:04:54.995 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-19 17:05:00.291 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-19 17:05:03.870 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-19 17:05:03.872 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:8300
2025-05-19 17:05:03.873 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-19 17:05:03.874 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-19 17:05:03.877 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='a1d1d345-47ec-4ef6-b911-7ac579d7d607', type=LOGIN, sender=null, timestamp=1747645503876}
2025-05-19 17:05:03.880 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-19 17:05:03.880 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@3ee96b54
2025-05-19 17:05:03.881 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-19 17:05:03.881 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 (ID: 5a5317ff-5a26-4793-919c-80b342459087) 加入公共聊天室
2025-05-19 17:05:03.881 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 (ID: 5a5317ff-5a26-4793-919c-80b342459087) 登录成功
2025-05-19 17:05:03.881 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-19 17:05:03.886 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-19 17:05:03.887 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-19 17:05:03.889 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-19 17:05:03.889 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-19 17:05:03.889 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 1
2025-05-19 17:05:03.889 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-19 17:05:03.890 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 请求公共聊天室历史消息
2025-05-19 17:05:03.890 [pool-1-thread-1] INFO  com.chatroom.client.ChatClient - 请求群组历史消息: targetId=public_chat_room, limit=50
2025-05-19 17:05:03.892 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-19 17:05:03.892 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-19 17:05:03.892 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-19 17:05:03.892 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-19 17:05:03.892 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录用户: 1
2025-05-19 17:05:03.893 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:05:03.893 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-19 17:05:03.893 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-19 17:05:03.894 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理获取历史消息请求: ChatRequest{requestId='5241a2eb-08e7-40a3-ba63-6a2472b0821c', type=GET_HISTORY_MESSAGES, sender=1, timestamp=1747645503890}
2025-05-19 17:05:03.894 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取群组 public_chat_room 的历史消息, 共 3 条
2025-05-19 17:05:03.896 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=获取历史消息成功
2025-05-19 17:05:03.896 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-19 17:05:03.896 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-19 17:05:03.973 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-19 17:05:03.974 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-19 17:05:03.974 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-19 17:05:03.974 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:05:03.974 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-19 17:05:03.974 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='baac6d73-125c-4614-8170-0f9a97b551e9', requestId='0a248ea3-70dc-4aae-bf78-1ff72682e7be', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747645503974}
2025-05-19 17:05:03.977 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='baac6d73-125c-4614-8170-0f9a97b551e9', requestId='0a248ea3-70dc-4aae-bf78-1ff72682e7be', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747645503974}
2025-05-19 17:05:03.978 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 2 个响应监听器
2025-05-19 17:05:03.978 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:05:03.978 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-19 17:05:03.978 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-19 17:05:04.038 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-19 17:05:04.039 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-19 17:05:04.040 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-19 17:05:04.040 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-19 17:05:22.062 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 客户端断开连接: /10.29.183.159:8300
2025-05-19 17:05:22.063 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 (ID: 5a5317ff-5a26-4793-919c-80b342459087) 已注销
2025-05-19 17:05:22.063 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已离线
2025-05-19 17:05:22.064 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 客户端连接已关闭: /10.29.183.159:8300
2025-05-19 17:05:29.294 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-19 17:05:30.580 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-19 17:05:32.392 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-19 17:05:32.393 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:8346
2025-05-19 17:05:32.394 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-19 17:05:32.395 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-19 17:05:32.397 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='2bad8ed4-2665-4bd2-8e55-e9ddd7f699fc', type=LOGIN, sender=null, timestamp=1747645532396}
2025-05-19 17:05:32.397 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-19 17:05:32.397 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@716b49d9
2025-05-19 17:05:32.397 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-19 17:05:32.397 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 (ID: 4cfa00fa-8a07-47d8-b0af-5a3fd93e3e30) 加入公共聊天室
2025-05-19 17:05:32.397 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 (ID: 4cfa00fa-8a07-47d8-b0af-5a3fd93e3e30) 登录成功
2025-05-19 17:05:32.398 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-19 17:05:32.398 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-19 17:05:32.399 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-19 17:05:32.402 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-19 17:05:32.402 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-19 17:05:32.402 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 1
2025-05-19 17:05:32.402 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-19 17:05:32.403 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 请求公共聊天室历史消息
2025-05-19 17:05:32.403 [pool-1-thread-1] INFO  com.chatroom.client.ChatClient - 请求群组历史消息: targetId=public_chat_room, limit=50
2025-05-19 17:05:32.404 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-19 17:05:32.404 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-19 17:05:32.405 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-19 17:05:32.405 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-19 17:05:32.405 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录用户: 1
2025-05-19 17:05:32.405 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:05:32.405 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-19 17:05:32.405 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-19 17:05:32.423 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理获取历史消息请求: ChatRequest{requestId='cfd5e9c4-0f25-4d4d-91b6-891263cc9b96', type=GET_HISTORY_MESSAGES, sender=1, timestamp=1747645532403}
2025-05-19 17:05:32.424 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取群组 public_chat_room 的历史消息, 共 4 条
2025-05-19 17:05:32.426 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=获取历史消息成功
2025-05-19 17:05:32.426 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-19 17:05:32.426 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-19 17:05:32.479 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-19 17:05:32.479 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-19 17:05:32.479 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-19 17:05:32.480 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:05:32.480 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 2 个响应监听器
2025-05-19 17:05:32.480 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='a82de343-a43d-4aa2-b7fe-c5364db9e170', requestId='a388d6ed-9f9a-4f2b-ab31-3c9116d5e806', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747645532479}
2025-05-19 17:05:32.483 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='a82de343-a43d-4aa2-b7fe-c5364db9e170', requestId='a388d6ed-9f9a-4f2b-ab31-3c9116d5e806', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747645532479}
2025-05-19 17:05:32.483 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 2 个响应监听器
2025-05-19 17:05:32.483 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:05:32.483 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-19 17:05:32.483 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-19 17:05:32.518 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-19 17:05:32.519 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-19 17:05:32.519 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-19 17:05:32.519 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-19 17:05:41.893 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=admin, 服务器=10.29.183.159:9999
2025-05-19 17:05:41.895 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:8360
2025-05-19 17:05:41.896 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-19 17:05:41.897 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-19 17:05:41.900 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='154a77de-a2ae-4336-b821-5e61fd6f2d7f', type=LOGIN, sender=null, timestamp=1747645541899}
2025-05-19 17:05:41.900 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: admin，使用密码认证
2025-05-19 17:05:41.900 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@1652e946
2025-05-19 17:05:41.900 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-19 17:05:41.900 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 admin (ID: 0a1867a3-a302-4d3f-b8c5-25f35c7a0246) 加入公共聊天室
2025-05-19 17:05:41.900 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 admin (ID: 0a1867a3-a302-4d3f-b8c5-25f35c7a0246) 登录成功
2025-05-19 17:05:41.901 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]admin 已登录
2025-05-19 17:05:41.902 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-19 17:05:41.902 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-19 17:05:41.902 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]admin 已登录, 是否群消息=false
2025-05-19 17:05:41.903 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]admin 已登录
2025-05-19 17:05:41.903 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-19 17:05:41.903 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: admin 已登录, 立即刷新用户列表
2025-05-19 17:05:41.903 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=public_chat_room, 内容=欢迎 admin 加入聊天室！, 是否群消息=true
2025-05-19 17:05:41.905 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-19 17:05:41.905 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-19 17:05:41.905 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: admin
2025-05-19 17:05:41.905 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-19 17:05:41.906 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 请求公共聊天室历史消息
2025-05-19 17:05:41.906 [pool-1-thread-1] INFO  com.chatroom.client.ChatClient - 请求群组历史消息: targetId=public_chat_room, limit=50
2025-05-19 17:05:41.908 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-19 17:05:41.908 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理获取历史消息请求: ChatRequest{requestId='6e4d0d90-de1d-4642-87e8-ffc23e1112fa', type=GET_HISTORY_MESSAGES, sender=admin, timestamp=1747645541906}
2025-05-19 17:05:41.908 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-19 17:05:41.908 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取群组 public_chat_room 的历史消息, 共 5 条
2025-05-19 17:05:41.909 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-19 17:05:41.909 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-19 17:05:41.909 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录用户: admin
2025-05-19 17:05:41.909 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:05:41.909 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-19 17:05:41.909 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-19 17:05:41.910 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=获取历史消息成功
2025-05-19 17:05:41.911 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-19 17:05:41.911 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-19 17:05:41.961 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-19 17:05:41.962 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:05:41.962 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-19 17:05:41.962 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='73830c87-927f-4aaa-b7ca-1a1574587486', requestId='7df67c0d-da17-43cf-a5f6-79198c378970', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747645541962}
2025-05-19 17:05:41.962 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-19 17:05:41.969 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-19 17:05:41.970 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-19 17:05:41.991 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-19 17:05:41.992 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-19 17:05:41.992 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-19 17:05:41.992 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:05:41.993 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-19 17:05:41.993 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='6e6a2dcf-6d77-434d-aee7-07466c953044', requestId='dab9f28d-51b9-4352-9985-1f1632e674ac', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747645541992}
2025-05-19 17:05:41.996 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='6e6a2dcf-6d77-434d-aee7-07466c953044', requestId='dab9f28d-51b9-4352-9985-1f1632e674ac', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747645541992}
2025-05-19 17:05:41.996 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 2 个响应监听器
2025-05-19 17:05:41.997 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:05:41.997 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-19 17:05:41.997 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-19 17:05:42.037 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-19 17:05:42.039 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-19 17:05:42.039 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-19 17:05:42.039 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-19 17:05:49.077 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-19 17:05:49.084 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 1 的新聊天窗口
2025-05-19 17:05:51.114 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-19 17:05:55.470 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=admin, 接收者=4cfa00fa-8a07-47d8-b0af-5a3fd93e3e30, 内容=1
2025-05-19 17:05:55.470 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=admin, 接收者=4cfa00fa-8a07-47d8-b0af-5a3fd93e3e30, 内容=1, 是否群消息=false
2025-05-19 17:05:55.470 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 4cfa00fa-8a07-47d8-b0af-5a3fd93e3e30
2025-05-19 17:05:55.471 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-19 17:05:55.471 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理历史消息响应
2025-05-19 17:05:55.471 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=admin, 接收者=4cfa00fa-8a07-47d8-b0af-5a3fd93e3e30, 内容=1, 是否群消息=false
2025-05-19 17:05:55.471 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-19 17:05:55.471 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-19 17:05:55.471 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 admin 的聊天窗口
2025-05-19 17:05:55.479 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 admin 的新聊天窗口
2025-05-19 17:05:58.275 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=admin, 接收者=4cfa00fa-8a07-47d8-b0af-5a3fd93e3e30, 内容=1, 是否群消息=false
2025-05-19 17:05:58.275 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=admin, 接收者=4cfa00fa-8a07-47d8-b0af-5a3fd93e3e30, 内容=1
2025-05-19 17:05:58.275 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 4cfa00fa-8a07-47d8-b0af-5a3fd93e3e30
2025-05-19 17:05:58.276 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=admin, 接收者=4cfa00fa-8a07-47d8-b0af-5a3fd93e3e30, 内容=1, 是否群消息=false
2025-05-19 17:05:58.276 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-19 17:05:58.276 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理历史消息响应
2025-05-19 17:05:58.276 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-19 17:05:58.276 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-19 17:06:00.781 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 admin 的聊天窗口
2025-05-19 17:06:11.997 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-19 17:06:11.998 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:06:11.998 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-19 17:06:11.998 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='b085926d-7d22-4ac4-9627-8c942dcf89a6', requestId='9a6cc3fc-f1af-4624-9483-382a328adba4', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747645571998}
2025-05-19 17:06:11.998 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-19 17:06:11.998 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-19 17:06:11.999 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-19 17:06:14.000 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 (ID: 4cfa00fa-8a07-47d8-b0af-5a3fd93e3e30) 已注销
2025-05-19 17:06:14.000 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-19 17:06:14.000 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已离线
2025-05-19 17:06:14.000 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-19 17:06:14.000 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]1 已离线, 是否群消息=false
2025-05-19 17:06:14.001 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-19 17:06:14.001 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]1 已离线
2025-05-19 17:06:14.001 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 1 已离线, 立即刷新用户列表
2025-05-19 17:06:14.002 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:427)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:256)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-19 17:06:14.003 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-19 17:06:14.004 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-19 17:06:14.041 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-19 17:06:14.042 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:06:14.042 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-19 17:06:14.042 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='4c1c0041-38b8-41b2-8ba6-5f30ad7c2560', requestId='b0e80773-0333-4e0a-a679-4979965c002a', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747645574041}
2025-05-19 17:06:14.042 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-19 17:06:14.047 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-19 17:06:14.048 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-19 17:06:15.834 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 admin (ID: 0a1867a3-a302-4d3f-b8c5-25f35c7a0246) 已注销
2025-05-19 17:06:15.834 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]admin 已离线
2025-05-19 17:06:15.834 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-19 17:06:15.835 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-19 17:06:15.835 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:427)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:256)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-19 17:06:15.835 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-19 17:06:15.835 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-19 17:07:00.101 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-19 17:07:01.350 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-19 17:07:02.633 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-19 17:07:05.305 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-19 17:07:05.307 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:8474
2025-05-19 17:07:05.308 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-19 17:07:05.309 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-19 17:07:05.312 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='0abf1d87-84ff-47cc-8cf6-561c4e6a87cb', type=LOGIN, sender=null, timestamp=1747645625311}
2025-05-19 17:07:05.312 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-19 17:07:05.312 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@635c011b
2025-05-19 17:07:05.312 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-19 17:07:05.312 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 1 (ID: 7baad9f8-a24b-40d5-8cba-9e83a9971413) 加入公共聊天室
2025-05-19 17:07:05.312 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 1 (ID: 7baad9f8-a24b-40d5-8cba-9e83a9971413) 登录成功
2025-05-19 17:07:05.312 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-19 17:07:05.313 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-19 17:07:05.314 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-19 17:07:05.317 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-19 17:07:05.317 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-19 17:07:05.317 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 1
2025-05-19 17:07:05.317 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-19 17:07:05.317 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 请求公共聊天室历史消息
2025-05-19 17:07:05.318 [pool-1-thread-1] INFO  com.chatroom.client.ChatClient - 请求群组历史消息: targetId=public_chat_room, limit=50
2025-05-19 17:07:05.319 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-19 17:07:05.319 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理获取历史消息请求: ChatRequest{requestId='35641dcc-a825-41ef-8c34-e58116d45d22', type=GET_HISTORY_MESSAGES, sender=1, timestamp=1747645625318}
2025-05-19 17:07:05.320 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取群组 public_chat_room 的历史消息, 共 6 条
2025-05-19 17:07:05.320 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-19 17:07:05.320 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-19 17:07:05.320 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-19 17:07:05.320 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录用户: 1
2025-05-19 17:07:05.320 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:07:05.320 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-19 17:07:05.321 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-19 17:07:05.322 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=获取历史消息成功
2025-05-19 17:07:05.322 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-19 17:07:05.322 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-19 17:07:05.398 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-19 17:07:05.399 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-19 17:07:05.399 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:07:05.399 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-19 17:07:05.399 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-19 17:07:05.399 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='eccdd4a6-4a50-44ec-adba-0de2a2efe7d5', requestId='ef5e95f3-ae74-4244-bd41-8e448ede5aad', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747645625399}
2025-05-19 17:07:05.402 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-19 17:07:05.402 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:07:05.402 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-19 17:07:05.402 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='1e15651c-ea8e-411a-81d0-dbf4e5c0c288', requestId='a1099105-982f-4da7-9727-172257cb449b', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747645625400}
2025-05-19 17:07:05.402 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-19 17:07:05.447 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-19 17:07:05.448 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-19 17:07:05.448 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-19 17:07:05.449 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-19 17:07:09.646 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-19 17:07:09.648 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:8479
2025-05-19 17:07:09.648 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-19 17:07:09.649 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-19 17:07:09.651 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='a6778601-5fef-4b34-bf80-987be3bd10fa', type=LOGIN, sender=null, timestamp=1747645629650}
2025-05-19 17:07:09.651 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-19 17:07:09.651 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@1f61cc36
2025-05-19 17:07:09.651 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-19 17:07:09.651 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 2 (ID: 702c3f8f-aa08-49d7-ad8b-ae872c76075e) 加入公共聊天室
2025-05-19 17:07:09.651 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 2 (ID: 702c3f8f-aa08-49d7-ad8b-ae872c76075e) 登录成功
2025-05-19 17:07:09.651 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已登录
2025-05-19 17:07:09.652 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-19 17:07:09.652 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]2 已登录, 是否群消息=false
2025-05-19 17:07:09.652 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-19 17:07:09.653 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]2 已登录
2025-05-19 17:07:09.653 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-19 17:07:09.653 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 2 已登录, 立即刷新用户列表
2025-05-19 17:07:09.653 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-19 17:07:09.653 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=public_chat_room, 内容=欢迎 2 加入聊天室！, 是否群消息=true
2025-05-19 17:07:09.654 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:07:09.654 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-19 17:07:09.654 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='5d4d448f-2388-48cc-abd4-50eaf1a8a1f6', requestId='b269b1aa-1b0a-4d49-b240-50b6f9b3809a', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747645629654}
2025-05-19 17:07:09.654 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-19 17:07:09.655 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-19 17:07:09.656 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-19 17:07:09.656 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 2
2025-05-19 17:07:09.656 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-19 17:07:09.657 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 请求公共聊天室历史消息
2025-05-19 17:07:09.657 [pool-1-thread-1] INFO  com.chatroom.client.ChatClient - 请求群组历史消息: targetId=public_chat_room, limit=50
2025-05-19 17:07:09.659 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-19 17:07:09.659 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理获取历史消息请求: ChatRequest{requestId='7120213b-56f5-4c72-b0b4-3a20c705b7eb', type=GET_HISTORY_MESSAGES, sender=2, timestamp=1747645629657}
2025-05-19 17:07:09.659 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-19 17:07:09.659 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取群组 public_chat_room 的历史消息, 共 7 条
2025-05-19 17:07:09.659 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-19 17:07:09.659 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-19 17:07:09.660 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录用户: 2
2025-05-19 17:07:09.660 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:07:09.660 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-19 17:07:09.660 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-19 17:07:09.670 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=获取历史消息成功
2025-05-19 17:07:09.670 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-19 17:07:09.670 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-19 17:07:09.714 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-19 17:07:09.714 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-19 17:07:09.758 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-19 17:07:09.759 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:07:09.759 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-19 17:07:09.759 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-19 17:07:09.759 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-19 17:07:09.759 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='87aa6851-bc2a-415e-9f87-bb8a1c1b545b', requestId='9604bf4b-58bd-4bd3-8766-e8055b749130', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747645629758}
2025-05-19 17:07:09.762 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-19 17:07:09.762 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:07:09.762 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-19 17:07:09.762 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='393173ab-e643-45a7-9995-974ca12573eb', requestId='d60d4b67-a614-4821-8796-19222e43a010', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747645629759}
2025-05-19 17:07:09.762 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-19 17:07:09.798 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-19 17:07:09.799 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-19 17:07:09.799 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-19 17:07:09.799 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-19 17:07:30.215 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 1 的聊天窗口
2025-05-19 17:07:30.225 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 1 的新聊天窗口
2025-05-19 17:07:34.661 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=7baad9f8-a24b-40d5-8cba-9e83a9971413, 内容=你好
2025-05-19 17:07:34.661 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 7baad9f8-a24b-40d5-8cba-9e83a9971413
2025-05-19 17:07:34.661 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=7baad9f8-a24b-40d5-8cba-9e83a9971413, 内容=你好, 是否群消息=false
2025-05-19 17:07:34.662 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-19 17:07:34.662 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=7baad9f8-a24b-40d5-8cba-9e83a9971413, 内容=你好, 是否群消息=false
2025-05-19 17:07:34.662 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理历史消息响应
2025-05-19 17:07:34.662 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-19 17:07:34.662 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-19 17:07:34.662 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 尝试打开与用户 2 的聊天窗口
2025-05-19 17:07:34.671 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 已打开与用户 2 的新聊天窗口
2025-05-19 17:07:39.773 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-19 17:07:39.774 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:07:39.774 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-19 17:07:39.774 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='bf80d85a-3555-43ad-a17f-3eb9a09809ae', requestId='66af4bb5-440e-4ebc-8c6f-e72997447e39', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747645659774}
2025-05-19 17:07:39.774 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-19 17:07:39.774 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-19 17:07:39.775 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-19 17:07:42.978 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=1, 接收者=702c3f8f-aa08-49d7-ad8b-ae872c76075e, 内容=你好
2025-05-19 17:07:42.978 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=702c3f8f-aa08-49d7-ad8b-ae872c76075e, 内容=你好, 是否群消息=false
2025-05-19 17:07:42.978 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 向接收者发送消息: 702c3f8f-aa08-49d7-ad8b-ae872c76075e
2025-05-19 17:07:42.978 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-19 17:07:42.979 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理历史消息响应
2025-05-19 17:07:42.978 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=1, 接收者=702c3f8f-aa08-49d7-ad8b-ae872c76075e, 内容=你好, 是否群消息=false
2025-05-19 17:07:42.979 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-19 17:07:42.979 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-19 17:07:48.267 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 2 (ID: 702c3f8f-aa08-49d7-ad8b-ae872c76075e) 已注销
2025-05-19 17:07:48.268 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已离线
2025-05-19 17:07:48.268 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-19 17:07:48.268 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-19 17:07:48.268 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]2 已离线, 是否群消息=false
2025-05-19 17:07:48.268 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]2 已离线
2025-05-19 17:07:48.268 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-19 17:07:48.268 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 2 已离线, 立即刷新用户列表
2025-05-19 17:07:48.268 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:427)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:256)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-19 17:07:48.269 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-19 17:07:48.269 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-19 17:07:48.269 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-19 17:07:48.271 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:07:48.272 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-19 17:07:48.272 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='9d62703a-8d24-4d53-bb8b-01cecb957d35', requestId='2bf54465-cb37-46f5-a06c-596b0b1aa887', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747645668271}
2025-05-19 17:07:48.272 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-19 17:07:48.280 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-19 17:07:48.280 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-19 17:07:50.329 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 1 (ID: 7baad9f8-a24b-40d5-8cba-9e83a9971413) 已注销
2025-05-19 17:07:50.329 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-19 17:07:50.329 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已离线
2025-05-19 17:07:50.330 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-19 17:07:50.330 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:427)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:256)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-19 17:07:50.330 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-19 17:07:50.330 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-19 17:12:15.174 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-19 17:12:16.441 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-19 17:12:17.445 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-19 17:12:17.446 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:2697
2025-05-19 17:12:17.446 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-19 17:12:17.447 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-19 17:12:17.449 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='20b9e4d0-6e24-42c5-a7ed-71084467df71', type=LOGIN, sender=null, timestamp=1747645937448}
2025-05-19 17:12:17.449 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-19 17:12:17.449 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@4eaa46fb
2025-05-19 17:12:17.449 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-19 17:12:17.450 [pool-1-thread-3] INFO  com.chatroom.server.ChatServer - 用户 1 (ID: 37d60a5d-96a0-44d1-8e89-6162a99b0c7a) 加入公共聊天室
2025-05-19 17:12:17.450 [pool-1-thread-3] INFO  com.chatroom.server.ChatServer - 用户 1 (ID: 37d60a5d-96a0-44d1-8e89-6162a99b0c7a) 登录成功
2025-05-19 17:12:17.450 [pool-1-thread-3] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-19 17:12:17.450 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-19 17:12:17.451 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-19 17:12:17.454 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-19 17:12:17.455 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-19 17:12:17.455 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 1
2025-05-19 17:12:17.455 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-19 17:12:17.455 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 请求公共聊天室历史消息
2025-05-19 17:12:17.455 [pool-1-thread-1] INFO  com.chatroom.client.ChatClient - 请求群组历史消息: targetId=public_chat_room, limit=50
2025-05-19 17:12:17.457 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-19 17:12:17.457 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-19 17:12:17.457 [pool-1-thread-3] INFO  c.c.server.handler.ClientHandler - 处理获取历史消息请求: ChatRequest{requestId='fe0f099f-74c7-45f3-8d1b-532d5a768d40', type=GET_HISTORY_MESSAGES, sender=1, timestamp=1747645937455}
2025-05-19 17:12:17.457 [pool-1-thread-3] INFO  com.chatroom.server.ChatServer - 获取群组 public_chat_room 的历史消息, 共 8 条
2025-05-19 17:12:17.458 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-19 17:12:17.458 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-19 17:12:17.458 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:12:17.458 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-19 17:12:17.458 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-19 17:12:17.459 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=获取历史消息成功
2025-05-19 17:12:17.460 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-19 17:12:17.460 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-19 17:12:22.090 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-19 17:12:22.092 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:2706
2025-05-19 17:12:22.092 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-19 17:12:22.093 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-19 17:12:22.095 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='b5bbedba-c13e-41bd-ac97-9a914bdcf72b', type=LOGIN, sender=null, timestamp=1747645942094}
2025-05-19 17:12:22.095 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-19 17:12:22.095 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@6d5d0631
2025-05-19 17:12:22.096 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-19 17:12:22.096 [pool-1-thread-4] INFO  com.chatroom.server.ChatServer - 用户 2 (ID: 4bed5b99-aed7-4973-9ad9-24205db4a6a2) 加入公共聊天室
2025-05-19 17:12:22.096 [pool-1-thread-4] INFO  com.chatroom.server.ChatServer - 用户 2 (ID: 4bed5b99-aed7-4973-9ad9-24205db4a6a2) 登录成功
2025-05-19 17:12:22.096 [pool-1-thread-4] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已登录
2025-05-19 17:12:22.097 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-19 17:12:22.097 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-19 17:12:22.100 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-19 17:12:22.100 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-19 17:12:22.100 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 2
2025-05-19 17:12:22.100 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-19 17:12:22.100 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 请求公共聊天室历史消息
2025-05-19 17:12:22.101 [pool-1-thread-1] INFO  com.chatroom.client.ChatClient - 请求群组历史消息: targetId=public_chat_room, limit=50
2025-05-19 17:12:22.103 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-19 17:12:22.103 [pool-1-thread-4] INFO  c.c.server.handler.ClientHandler - 处理获取历史消息请求: ChatRequest{requestId='0e5f11ea-f079-4972-9e82-f6f66f30f5b3', type=GET_HISTORY_MESSAGES, sender=2, timestamp=1747645942101}
2025-05-19 17:12:22.103 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-19 17:12:22.103 [pool-1-thread-4] INFO  com.chatroom.server.ChatServer - 获取群组 public_chat_room 的历史消息, 共 9 条
2025-05-19 17:12:22.103 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-19 17:12:22.103 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-19 17:12:22.104 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:12:22.104 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-19 17:12:22.104 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-19 17:12:22.105 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=获取历史消息成功
2025-05-19 17:12:22.105 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-19 17:12:22.105 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-19 17:14:23.636 [pool-1-thread-3] INFO  com.chatroom.server.ChatServer - 用户 1 (ID: 37d60a5d-96a0-44d1-8e89-6162a99b0c7a) 已注销
2025-05-19 17:14:23.636 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-19 17:14:23.637 [pool-1-thread-3] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已离线
2025-05-19 17:14:23.637 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-19 17:14:23.637 [pool-1-thread-3] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:427)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:256)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-19 17:14:23.638 [pool-1-thread-3] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-19 17:14:23.638 [pool-1-thread-3] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-19 17:14:25.657 [pool-1-thread-4] INFO  com.chatroom.server.ChatServer - 用户 2 (ID: 4bed5b99-aed7-4973-9ad9-24205db4a6a2) 已注销
2025-05-19 17:14:25.657 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-19 17:14:25.657 [pool-1-thread-4] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已离线
2025-05-19 17:14:25.658 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-19 17:14:25.658 [pool-1-thread-4] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:427)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:256)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-19 17:14:25.658 [pool-1-thread-4] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-19 17:14:25.658 [pool-1-thread-4] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-19 17:14:36.278 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 从配置文件加载服务器配置: bindAddress=10.29.183.159, port=9999, autoSelectPort=true
2025-05-19 17:15:09.474 [AWT-EventQueue-0] INFO  c.c.server.config.ServerConfig - 服务器配置已保存
2025-05-19 17:15:09.476 [AWT-EventQueue-0] INFO  c.c.server.config.UserCredentials - 已加载 3 个用户凭据
2025-05-19 17:15:09.476 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 已初始化用户凭据管理器
2025-05-19 17:15:09.481 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 已加载群组 public_chat_room 的 9 条历史消息
2025-05-19 17:15:09.481 [AWT-EventQueue-0] INFO  c.c.s.service.MessageStoreService - 消息存储服务初始化完成，存储路径: D:\java-chatroom\message_store
2025-05-19 17:15:09.482 [AWT-EventQueue-0] INFO  com.chatroom.server.ChatServer - 已创建公共聊天室: 公共聊天室
2025-05-19 17:15:09.483 [AWT-EventQueue-0] INFO  c.chatroom.server.ChatServerLauncher - 服务器已启动: 10.29.183.159:9999
2025-05-19 17:15:09.484 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 聊天服务器已启动，监听地址: 10.29.183.159:9999
2025-05-19 17:15:09.485 [AWT-EventQueue-0] INFO  c.c.server.ui.ServerConfigFrame - 服务器已启动，监听地址: 10.29.183.159:9999
2025-05-19 17:15:15.291 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-19 17:15:16.510 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已加载 2 个历史连接记录
2025-05-19 17:15:19.096 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=1, 服务器=10.29.183.159:9999
2025-05-19 17:15:19.098 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:2956
2025-05-19 17:15:19.100 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-19 17:15:19.101 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-19 17:15:19.104 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='2fe9e755-b701-47a0-adb8-89f526c1f427', type=LOGIN, sender=null, timestamp=1747646119102}
2025-05-19 17:15:19.106 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 1，使用密码认证
2025-05-19 17:15:19.106 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@7011dd8e
2025-05-19 17:15:19.106 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-19 17:15:19.107 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 (ID: e204376d-376e-4d21-b000-86486a03fb63) 加入公共聊天室
2025-05-19 17:15:19.107 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 (ID: e204376d-376e-4d21-b000-86486a03fb63) 登录成功
2025-05-19 17:15:19.107 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已登录
2025-05-19 17:15:19.112 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-19 17:15:19.114 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-19 17:15:19.116 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-19 17:15:19.116 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-19 17:15:19.116 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 1
2025-05-19 17:15:19.116 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-19 17:15:19.117 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 请求公共聊天室历史消息
2025-05-19 17:15:19.117 [pool-1-thread-1] INFO  com.chatroom.client.ChatClient - 请求群组历史消息: targetId=public_chat_room, limit=50
2025-05-19 17:15:19.119 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-19 17:15:19.119 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-19 17:15:19.119 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-19 17:15:19.119 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-19 17:15:19.119 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录用户: 1
2025-05-19 17:15:19.120 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:15:19.120 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-19 17:15:19.120 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-19 17:15:19.120 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-19 17:15:19.120 [pool-1-thread-1] INFO  c.c.server.handler.ClientHandler - 处理获取历史消息请求: ChatRequest{requestId='82b7392e-1396-410a-ac1c-55ff2cd904ea', type=GET_HISTORY_MESSAGES, sender=1, timestamp=1747646119117}
2025-05-19 17:15:19.120 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 获取群组 public_chat_room 的历史消息, 共 10 条
2025-05-19 17:15:19.122 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=获取历史消息成功
2025-05-19 17:15:19.122 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-19 17:15:19.122 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-19 17:15:19.196 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-19 17:15:19.197 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-19 17:15:19.197 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-19 17:15:19.197 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:15:19.197 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 2 个响应监听器
2025-05-19 17:15:19.197 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-19 17:15:19.197 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='49344fd8-167e-4d2b-9d00-fa4d7ab106d8', requestId='18377444-9c04-46d9-ab78-7d9b130ad263', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747646119196}
2025-05-19 17:15:19.200 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='49344fd8-167e-4d2b-9d00-fa4d7ab106d8', requestId='18377444-9c04-46d9-ab78-7d9b130ad263', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747646119196}
2025-05-19 17:15:19.200 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 2 个响应监听器
2025-05-19 17:15:19.200 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:15:19.200 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-19 17:15:19.200 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-19 17:15:19.249 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-19 17:15:19.251 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-19 17:15:19.251 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-19 17:15:19.251 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-19 17:15:22.374 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 尝试登录: 用户=2, 服务器=10.29.183.159:9999
2025-05-19 17:15:22.376 [ForkJoinPool.commonPool-worker-1] INFO  com.chatroom.server.ChatServer - 新客户端连接: /10.29.183.159:2959
2025-05-19 17:15:22.377 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已连接到服务器: 10.29.183.159:9999
2025-05-19 17:15:22.377 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 已保存 2 个历史连接记录
2025-05-19 17:15:22.380 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理登录请求: ChatRequest{requestId='9f57a114-5d11-450c-9ac2-8fa3fcba90ae', type=LOGIN, sender=null, timestamp=1747646122379}
2025-05-19 17:15:22.380 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 用户尝试登录: 2，使用密码认证
2025-05-19 17:15:22.380 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已创建用户对象: com.chatroom.common.model.User@2014c57f
2025-05-19 17:15:22.380 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 调用服务器处理登录逻辑
2025-05-19 17:15:22.380 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 2 (ID: 65faba10-ce21-471c-b2b9-e803d381d6eb) 加入公共聊天室
2025-05-19 17:15:22.380 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 2 (ID: 65faba10-ce21-471c-b2b9-e803d381d6eb) 登录成功
2025-05-19 17:15:22.380 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已登录
2025-05-19 17:15:22.382 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 登录响应: success=true, message=登录成功
2025-05-19 17:15:22.382 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]2 已登录, 是否群消息=false
2025-05-19 17:15:22.383 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]2 已登录
2025-05-19 17:15:22.383 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-19 17:15:22.383 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 2 已登录, 立即刷新用户列表
2025-05-19 17:15:22.383 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 已发送登录响应
2025-05-19 17:15:22.383 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-19 17:15:22.383 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=public_chat_room, 内容=欢迎 2 加入聊天室！, 是否群消息=true
2025-05-19 17:15:22.385 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:15:22.385 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-19 17:15:22.385 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='0e090c11-80d2-4fd9-be4c-a15189bbb753', requestId='5b4f886d-4aff-4b51-8e64-43b127efb7c5', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747646122384}
2025-05-19 17:15:22.385 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-19 17:15:22.386 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-19 17:15:22.386 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理登录响应: 成功=true, 消息=登录成功
2025-05-19 17:15:22.386 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 设置当前用户: 2
2025-05-19 17:15:22.386 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 发送获取用户列表请求
2025-05-19 17:15:22.386 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 请求公共聊天室历史消息
2025-05-19 17:15:22.387 [pool-1-thread-1] INFO  com.chatroom.client.ChatClient - 请求群组历史消息: targetId=public_chat_room, limit=50
2025-05-19 17:15:22.389 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-19 17:15:22.389 [pool-1-thread-1] INFO  com.chatroom.client.ui.LoginFrame - 收到响应: 类型=GENERIC_RESULT, 成功=true, 消息=登录成功
2025-05-19 17:15:22.389 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理获取历史消息请求: ChatRequest{requestId='9011ba2b-8f14-4dd6-9874-90c42dc993fc', type=GET_HISTORY_MESSAGES, sender=2, timestamp=1747646122387}
2025-05-19 17:15:22.389 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 获取群组 public_chat_room 的历史消息, 共 11 条
2025-05-19 17:15:22.389 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-19 17:15:22.389 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录成功，准备打开主界面
2025-05-19 17:15:22.389 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 登录用户: 2
2025-05-19 17:15:22.389 [AWT-EventQueue-0] INFO  com.chatroom.client.ui.LoginFrame - 收到公共聊天室: 公共聊天室
2025-05-19 17:15:22.389 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:15:22.389 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-19 17:15:22.389 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-19 17:15:22.391 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=GENERIC_RESULT, 成功=true, 消息=获取历史消息成功
2025-05-19 17:15:22.391 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-19 17:15:22.391 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-19 17:15:22.432 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-19 17:15:22.432 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-19 17:15:22.476 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-19 17:15:22.477 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表自动刷新已启动，间隔: 30秒
2025-05-19 17:15:22.477 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:15:22.477 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-19 17:15:22.477 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-19 17:15:22.477 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 打开公共聊天室: 公共聊天室
2025-05-19 17:15:22.477 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='9b81813b-469a-441a-b034-60bb14138149', requestId='78025cca-fd9e-4702-8610-d2b80ce3d2fe', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747646122477}
2025-05-19 17:15:22.480 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-19 17:15:22.480 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:15:22.480 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-19 17:15:22.480 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='b785c2a3-d8fe-4bcc-8232-72e874611ac4', requestId='6e460a6c-4f78-4655-bd78-45bc13e003de', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747646122477}
2025-05-19 17:15:22.480 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-19 17:15:22.529 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-19 17:15:22.530 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-19 17:15:22.530 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 2 个用户
2025-05-19 17:15:22.530 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 1 个用户
2025-05-19 17:15:27.762 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 处理发送消息请求: 发送者=2, 接收者=public_chat_room, 内容=你好
2025-05-19 17:15:27.762 [pool-1-thread-2] INFO  c.c.server.handler.ClientHandler - 发送群组消息: groupId=public_chat_room
2025-05-19 17:15:27.762 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public_chat_room, 内容=你好, 是否群消息=true
2025-05-19 17:15:27.763 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=MESSAGE_RESULT, 成功=true, 消息=消息发送成功
2025-05-19 17:15:27.763 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 处理历史消息响应
2025-05-19 17:15:27.763 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 0 个响应监听器
2025-05-19 17:15:27.763 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=2, 接收者=public_chat_room, 内容=你好, 是否群消息=true
2025-05-19 17:15:27.763 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 0 个响应监听器
2025-05-19 17:15:31.223 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 用户 1 (ID: e204376d-376e-4d21-b000-86486a03fb63) 已注销
2025-05-19 17:15:31.223 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-19 17:15:31.224 [pool-1-thread-1] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]1 已离线
2025-05-19 17:15:31.224 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-19 17:15:31.224 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到消息: 发送者=系统, 接收者=null, 内容=[STATUS_CHANGE]1 已离线, 是否群消息=false
2025-05-19 17:15:31.224 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到控制消息: [STATUS_CHANGE]1 已离线
2025-05-19 17:15:31.224 [AWT-EventQueue-0] WARN  c.chatroom.client.ui.ChatMainFrame - 无法确定目标用户，消息将显示在系统消息面板
2025-05-19 17:15:31.225 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 检测到重要状态变更: 1 已离线, 立即刷新用户列表
2025-05-19 17:15:31.225 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 正在刷新用户列表...
2025-05-19 17:15:31.226 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 收到服务器响应: 类型=USER_LIST, 成功=true, 消息=获取用户列表成功
2025-05-19 17:15:31.226 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 通知 1 个响应监听器
2025-05-19 17:15:31.226 [pool-1-thread-1] INFO  c.chatroom.client.ui.ChatMainFrame - 收到用户列表响应：ChatResponse{responseId='012e3a10-0b86-4dd7-b23f-5174a3e5b261', requestId='2f234d02-600b-4205-a93d-5c97afc1ce95', type=USER_LIST, success=true, message='获取用户列表成功', timestamp=1747646131225}
2025-05-19 17:15:31.226 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 成功通知了 1 个响应监听器
2025-05-19 17:15:31.226 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:427)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:256)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-19 17:15:31.229 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-19 17:15:31.229 [pool-1-thread-1] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-19 17:15:31.261 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表不为空，共 1 个用户
2025-05-19 17:15:31.261 [AWT-EventQueue-0] INFO  c.chatroom.client.ui.ChatMainFrame - 用户列表已更新，共 0 个用户
2025-05-19 17:15:33.122 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 用户 2 (ID: 65faba10-ce21-471c-b2b9-e803d381d6eb) 已注销
2025-05-19 17:15:33.122 [AWT-EventQueue-0] INFO  com.chatroom.client.ChatClient - 已断开与服务器的连接
2025-05-19 17:15:33.122 [pool-1-thread-2] INFO  com.chatroom.server.ChatServer - 广播用户状态变更: [STATUS_CHANGE]2 已离线
2025-05-19 17:15:33.122 [pool-1-thread-1] INFO  com.chatroom.client.MessageHandler - 消息处理器已停止
2025-05-19 17:15:33.123 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 发送响应时出错: 你的主机中的软件中止了一个已建立的连接。
java.net.SocketException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.NioSocketImpl.tryWrite(NioSocketImpl.java:394)
	at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:410)
	at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:440)
	at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:819)
	at java.base/java.net.Socket$SocketOutputStream.implWrite(Socket.java:1231)
	at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:1218)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1900)
	at java.base/java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1809)
	at java.base/java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1619)
	at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:362)
	at com.chatroom.server.handler.ClientHandler.sendResponse(ClientHandler.java:427)
	at com.chatroom.server.handler.ClientHandler.handleLogout(ClientHandler.java:256)
	at com.chatroom.server.handler.ClientHandler.handleRequest(ClientHandler.java:113)
	at com.chatroom.server.handler.ClientHandler.run(ClientHandler.java:78)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-19 17:15:33.123 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
2025-05-19 17:15:33.123 [pool-1-thread-2] ERROR c.c.server.handler.ClientHandler - 关闭客户端连接时出错: Socket closed
